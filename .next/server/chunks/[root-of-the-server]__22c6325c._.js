module.exports=[25705,(e,t,r)=>{"use strict";var s=Object.prototype.hasOwnProperty,n=Object.prototype.toString,i=Object.defineProperty,o=Object.getOwnPropertyDescriptor,a=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===n.call(e)},c=function(e){if(!e||"[object Object]"!==n.call(e))return!1;var t,r=s.call(e,"constructor"),i=e.constructor&&e.constructor.prototype&&s.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!r&&!i)return!1;for(t in e);return void 0===t||s.call(e,t)},l=function(e,t){i&&"__proto__"===t.name?i(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},u=function(e,t){if("__proto__"===t){if(!s.call(e,t))return;else if(o)return o(e,t).value}return e[t]};t.exports=function e(){var t,r,s,n,i,o,h=arguments[0],d=1,f=arguments.length,p=!1;for("boolean"==typeof h&&(p=h,h=arguments[1]||{},d=2),(null==h||"object"!=typeof h&&"function"!=typeof h)&&(h={});d<f;++d)if(t=arguments[d],null!=t)for(r in t)s=u(h,r),h!==(n=u(t,r))&&(p&&n&&(c(n)||(i=a(n)))?(i?(i=!1,o=s&&a(s)?s:[]):o=s&&c(s)?s:{},l(h,{name:r,newValue:e(p,o,n)})):void 0!==n&&l(h,{name:r,newValue:n}));return h}},451,e=>{e.v({name:"gaxios",version:"7.1.3",description:"A simple common HTTP client specifically for Google APIs and services.",main:"build/cjs/src/index.js",types:"build/cjs/src/index.d.ts",files:["build/"],exports:{".":{import:{types:"./build/esm/src/index.d.ts",default:"./build/esm/src/index.js"},require:{types:"./build/cjs/src/index.d.ts",default:"./build/cjs/src/index.js"}}},scripts:{lint:"gts check --no-inline-config",test:"c8 mocha build/esm/test","presystem-test":"npm run compile","system-test":"mocha build/esm/system-test --timeout 80000",compile:"tsc -b ./tsconfig.json ./tsconfig.cjs.json && node utils/enable-esm.mjs",fix:"gts fix",prepare:"npm run compile",pretest:"npm run compile",webpack:"webpack","prebrowser-test":"npm run compile","browser-test":"node build/browser-test/browser-test-runner.js",docs:"jsdoc -c .jsdoc.js","docs-test":"linkinator docs","predocs-test":"npm run docs","samples-test":"cd samples/ && npm link ../ && npm test && cd ../",prelint:"cd samples; npm link ../; npm install",clean:"gts clean"},repository:{type:"git",directory:"packages/gaxios",url:"https://github.com/googleapis/google-cloud-node-core.git"},keywords:["google"],engines:{node:">=18"},author:"Google, LLC",license:"Apache-2.0",devDependencies:{"@babel/plugin-proposal-private-methods":"^7.18.6","@types/cors":"^2.8.6","@types/express":"^5.0.0","@types/extend":"^3.0.1","@types/mocha":"^10.0.10","@types/multiparty":"4.2.1","@types/mv":"^2.1.0","@types/ncp":"^2.0.1","@types/node":"^22.0.0","@types/sinon":"^17.0.0","@types/tmp":"0.2.6",assert:"^2.0.0",browserify:"^17.0.0",c8:"^10.0.0",cors:"^2.8.5",express:"^5.0.0",gts:"^6.0.0","is-docker":"^3.0.0",jsdoc:"^4.0.0","jsdoc-fresh":"^5.0.0","jsdoc-region-tag":"^4.0.0",karma:"^6.0.0","karma-chrome-launcher":"^3.0.0","karma-coverage":"^2.0.0","karma-firefox-launcher":"^2.0.0","karma-mocha":"^2.0.0","karma-remap-coverage":"^0.1.5","karma-sourcemap-loader":"^0.4.0","karma-webpack":"^5.0.1",linkinator:"^6.1.2",mocha:"^11.1.0",multiparty:"^4.2.1",mv:"^2.1.1",ncp:"^2.0.0",nock:"^14.0.0-beta.13","null-loader":"^4.0.0","pack-n-play":"^4.0.0",puppeteer:"^24.0.0",sinon:"^21.0.0","stream-browserify":"^3.0.0",tmp:"0.2.5","ts-loader":"^9.5.2",typescript:"^5.8.3",webpack:"^5.35.0","webpack-cli":"^6.0.1"},dependencies:{extend:"^3.0.2","https-proxy-agent":"^7.0.1","node-fetch":"^3.3.2",rimraf:"^5.0.1"},homepage:"https://github.com/googleapis/google-cloud-node-core/tree/main/packages/gaxios"})},61675,(e,t,r)=>{"use strict";t.exports={pkg:e.r(451)}},27078,(e,t,r)=>{"use strict";var s=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.GaxiosError=r.GAXIOS_ERROR_SYMBOL=void 0,r.defaultErrorRedactor=function e(t){let r="<<REDACTED> - See `errorRedactor` option in `gaxios` for configuration>.";function s(e){e&&e.forEach((t,s)=>{(/^authentication$/i.test(s)||/^authorization$/i.test(s)||/secret/i.test(s))&&e.set(s,r)})}function n(e,t){if("object"==typeof e&&null!==e&&"string"==typeof e[t]){let s=e[t];(/grant_type=/i.test(s)||/assertion=/i.test(s)||/secret/i.test(s))&&(e[t]=r)}}function i(e){!e||"object"!=typeof e||(e instanceof FormData||e instanceof URLSearchParams||"forEach"in e&&"set"in e?e.forEach((t,s)=>{(["grant_type","assertion"].includes(s)||/secret/.test(s))&&e.set(s,r)}):("grant_type"in e&&(e.grant_type=r),"assertion"in e&&(e.assertion=r),"client_secret"in e&&(e.client_secret=r)))}return t.config&&(s(t.config.headers),n(t.config,"data"),i(t.config.data),n(t.config,"body"),i(t.config.body),t.config.url.searchParams.has("token")&&t.config.url.searchParams.set("token",r),t.config.url.searchParams.has("client_secret")&&t.config.url.searchParams.set("client_secret",r)),t.response&&(e({config:t.response.config}),s(t.response.headers),t.response.bodyUsed&&(n(t.response,"data"),i(t.response.data))),t};let n=s(e.r(25705)),i=s(e.r(61675)).default.pkg;r.GAXIOS_ERROR_SYMBOL=Symbol.for(`${i.name}-gaxios-error`);class o extends Error{config;response;code;status;error;[r.GAXIOS_ERROR_SYMBOL]=i.version;static[Symbol.hasInstance](e){return!!e&&"object"==typeof e&&r.GAXIOS_ERROR_SYMBOL in e&&e[r.GAXIOS_ERROR_SYMBOL]===i.version||Function.prototype[Symbol.hasInstance].call(o,e)}constructor(e,t,r,s){if(super(e,{cause:s}),this.config=t,this.response=r,this.error=s instanceof Error?s:void 0,this.config=(0,n.default)(!0,{},t),this.response&&(this.response.config=(0,n.default)(!0,{},this.response.config)),this.response){try{this.response.data=function(e,t){switch(e){case"stream":default:return t;case"json":return JSON.parse(JSON.stringify(t));case"arraybuffer":return JSON.parse(Buffer.from(t).toString("utf8"));case"blob":return JSON.parse(t.text())}}(this.config.responseType,this.response?.bodyUsed?this.response?.data:void 0)}catch{}this.status=this.response.status}s instanceof DOMException?this.code=s.name:s&&"object"==typeof s&&"code"in s&&("string"==typeof s.code||"number"==typeof s.code)&&(this.code=s.code)}static extractAPIErrorFromResponse(e,t="The request failed"){let r=t;if("string"==typeof e.data&&(r=e.data),e.data&&"object"==typeof e.data&&"error"in e.data&&e.data.error&&!e.ok){if("string"==typeof e.data.error)return{message:e.data.error,code:e.status,status:e.statusText};if("object"==typeof e.data.error){r="message"in e.data.error&&"string"==typeof e.data.error.message?e.data.error.message:r;let t="status"in e.data.error&&"string"==typeof e.data.error.status?e.data.error.status:e.statusText,s="code"in e.data.error&&"number"==typeof e.data.error.code?e.data.error.code:e.status;if("errors"in e.data.error&&Array.isArray(e.data.error.errors)){let n=[];for(let t of e.data.error.errors)"object"==typeof t&&"message"in t&&"string"==typeof t.message&&n.push(t.message);return Object.assign({message:n.join("\n")||r,code:s,status:t},e.data.error)}return Object.assign({message:r,code:s,status:t},e.data.error)}}return{message:r,code:e.status,status:e.statusText}}}r.GaxiosError=o},35156,(e,t,r)=>{"use strict";async function s(e){var t;let r=i(e);if(!e||!e.config||!r&&!e.config.retry)return{shouldRetry:!1};(r=r||{}).currentRetryAttempt=r.currentRetryAttempt||0,r.retry=void 0===r.retry||null===r.retry?3:r.retry,r.httpMethodsToRetry=r.httpMethodsToRetry||["GET","HEAD","PUT","OPTIONS","DELETE"],r.noResponseRetries=void 0===r.noResponseRetries||null===r.noResponseRetries?2:r.noResponseRetries,r.retryDelayMultiplier=r.retryDelayMultiplier?r.retryDelayMultiplier:2,r.timeOfFirstRequest=r.timeOfFirstRequest?r.timeOfFirstRequest:Date.now(),r.totalTimeout=r.totalTimeout?r.totalTimeout:Number.MAX_SAFE_INTEGER,r.maxRetryDelay=r.maxRetryDelay?r.maxRetryDelay:Number.MAX_SAFE_INTEGER,r.statusCodesToRetry=r.statusCodesToRetry||[[100,199],[408,408],[429,429],[500,599]],e.config.retryConfig=r;let s=r.shouldRetry||n;if(!await s(e))return{shouldRetry:!1,config:e.config};let o=Math.min(((t=r).currentRetryAttempt?0:t.retryDelay??100)+(Math.pow(t.retryDelayMultiplier,t.currentRetryAttempt)-1)/2*1e3,t.totalTimeout-(Date.now()-t.timeOfFirstRequest),t.maxRetryDelay);e.config.retryConfig.currentRetryAttempt+=1;let a=r.retryBackoff?r.retryBackoff(e,o):new Promise(e=>{setTimeout(e,o)});return r.onRetryAttempt&&await r.onRetryAttempt(e),await a,{shouldRetry:!0,config:e.config}}function n(e){let t=i(e);if(e.config.signal?.aborted&&"TimeoutError"!==e.code||"AbortError"===e.code||!t||0===t.retry||!e.response&&(t.currentRetryAttempt||0)>=t.noResponseRetries||!t.httpMethodsToRetry||!t.httpMethodsToRetry.includes(e.config.method?.toUpperCase()||"GET"))return!1;if(e.response&&e.response.status){let r=!1;for(let[s,n]of t.statusCodesToRetry){let t=e.response.status;if(t>=s&&t<=n){r=!0;break}}if(!r)return!1}return t.currentRetryAttempt=t.currentRetryAttempt||0,!(t.currentRetryAttempt>=t.retry)}function i(e){if(e&&e.config&&e.config.retryConfig)return e.config.retryConfig}Object.defineProperty(r,"__esModule",{value:!0}),r.getRetryConfig=s},3137,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.GaxiosInterceptorManager=void 0;class s extends Set{}r.GaxiosInterceptorManager=s},80038,(e,t,r)=>{"use strict";var s,n=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.Gaxios=void 0;let i=n(e.r(25705)),o=e.r(24836),a=e.r(27078),c=e.r(35156),l=e.r(88947),u=e.r(3137),h=async()=>globalThis.crypto?.randomUUID()||(await e.A(85685)).randomUUID();class d{agentCache=new Map;defaults;interceptors;constructor(e){this.defaults=e||{},this.interceptors={request:new u.GaxiosInterceptorManager,response:new u.GaxiosInterceptorManager}}fetch(...e){let t,r=e[0],n=e[1],i=new Headers;return("string"==typeof r?t=new URL(r):r instanceof URL?t=r:r&&r.url&&(t=new URL(r.url)),r&&"object"==typeof r&&"headers"in r&&s.mergeHeaders(i,r.headers),n&&s.mergeHeaders(i,new Headers(n.headers)),"object"!=typeof r||r instanceof URL)?this.request({...n,headers:i,url:t}):this.request({...n,...r,headers:i,url:t})}async request(e={}){let t=await this.#e(e);return t=await this.#t(t),this.#r(this._request(t))}async _defaultAdapter(e){let t=e.fetchImplementation||this.defaults.fetchImplementation||await s.#s(),r={...e};delete r.data;let n=await t(e.url,r),i=await this.getResponseData(e,n);return Object.getOwnPropertyDescriptor(n,"data")?.configurable||Object.defineProperties(n,{data:{configurable:!0,writable:!0,enumerable:!0,value:i}}),Object.assign(n,{config:e,data:i})}async _request(e){try{let t;if(t=e.adapter?await e.adapter(e,this._defaultAdapter.bind(this)):await this._defaultAdapter(e),!e.validateStatus(t.status)){if("stream"===e.responseType){let e=[];for await(let r of t.data)e.push(r);t.data=e.toString()}let r=a.GaxiosError.extractAPIErrorFromResponse(t,`Request failed with status code ${t.status}`);throw new a.GaxiosError(r?.message,e,t,r)}return t}catch(n){let t;t=n instanceof a.GaxiosError?n:n instanceof Error?new a.GaxiosError(n.message,e,void 0,n):new a.GaxiosError("Unexpected Gaxios Error",e,void 0,n);let{shouldRetry:r,config:s}=await (0,c.getRetryConfig)(t);if(r&&s)return t.config.retryConfig.currentRetryAttempt=s.retryConfig.currentRetryAttempt,e.retryConfig=t.config?.retryConfig,this.#n(e),this._request(e);throw e.errorRedactor&&e.errorRedactor(t),t}}async getResponseData(e,t){if(204===t.status)return"";if(e.maxContentLength&&t.headers.has("content-length")&&e.maxContentLength<Number.parseInt(t.headers?.get("content-length")||""))throw new a.GaxiosError("Response's `Content-Length` is over the limit.",e,Object.assign(t,{config:e}));switch(e.responseType){case"stream":return t.body;case"json":{let e=await t.text();try{return JSON.parse(e)}catch{return e}}case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"text":return t.text();default:return this.getResponseDataFromContentType(t)}}#i(e,t=[]){let r=new URL(e),s=[...t];for(let e of(process.env.NO_PROXY??process.env.no_proxy)?.split(",")||[])s.push(e.trim());for(let e of s)if(e instanceof RegExp){if(e.test(r.toString()))return!1}else if(e instanceof URL){if(e.origin===r.origin)return!1}else if(e.startsWith("*.")||e.startsWith(".")){let t=e.replace(/^\*\./,".");if(r.hostname.endsWith(t))return!1}else if(e===r.origin||e===r.hostname||e===r.href)return!1;return!0}async #t(e){let t=Promise.resolve(e);for(let e of this.interceptors.request.values())e&&(t=t.then(e.resolved,e.rejected));return t}async #r(e){let t=Promise.resolve(e);for(let e of this.interceptors.response.values())e&&(t=t.then(e.resolved,e.rejected));return t}async #e(e){let t=new Headers(this.defaults.headers);s.mergeHeaders(t,e.headers);let r=(0,i.default)(!0,{},this.defaults,e);if(!r.url)throw Error("URL is required.");if(r.baseURL&&(r.url=new URL(r.url,r.baseURL)),r.url=new URL(r.url),r.params)if(r.paramsSerializer){let e=r.paramsSerializer(r.params);e.startsWith("?")&&(e=e.slice(1));let t=r.url.toString().includes("?")?"&":"?";r.url=r.url+t+e}else{let e=r.url instanceof URL?r.url:new URL(r.url);for(let[t,s]of new URLSearchParams(r.params))e.searchParams.append(t,s);r.url=e}"number"==typeof e.maxContentLength&&(r.size=e.maxContentLength),"number"==typeof e.maxRedirects&&(r.follow=e.maxRedirects);let n="string"==typeof r.data||r.data instanceof ArrayBuffer||r.data instanceof Blob||globalThis.File&&r.data instanceof File||r.data instanceof FormData||r.data instanceof l.Readable||r.data instanceof ReadableStream||r.data instanceof String||r.data instanceof URLSearchParams||ArrayBuffer.isView(r.data)||["Blob","File","FormData"].includes(r.data?.constructor?.name||"");if(r.multipart?.length){let e=await h();t.set("content-type",`multipart/related; boundary=${e}`),r.body=l.Readable.from(this.getMultipartRequest(r.multipart,e))}else n?r.body=r.data:"object"==typeof r.data?"application/x-www-form-urlencoded"===t.get("Content-Type")?r.body=r.paramsSerializer?r.paramsSerializer(r.data):new URLSearchParams(r.data):(t.has("content-type")||t.set("content-type","application/json"),r.body=JSON.stringify(r.data)):r.data&&(r.body=r.data);r.validateStatus=r.validateStatus||this.validateStatus,r.responseType=r.responseType||"unknown",t.has("accept")||"json"!==r.responseType||t.set("accept","application/json");let c=r.proxy||process?.env?.HTTPS_PROXY||process?.env?.https_proxy||process?.env?.HTTP_PROXY||process?.env?.http_proxy;if(r.agent);else if(c&&this.#i(r.url,r.noProxy)){let e=await s.#o();this.agentCache.has(c)?r.agent=this.agentCache.get(c):(r.agent=new e(c,{cert:r.cert,key:r.key}),this.agentCache.set(c,r.agent))}else r.cert&&r.key&&(this.agentCache.has(r.key)?r.agent=this.agentCache.get(r.key):(r.agent=new o.Agent({cert:r.cert,key:r.key}),this.agentCache.set(r.key,r.agent)));return"function"!=typeof r.errorRedactor&&!1!==r.errorRedactor&&(r.errorRedactor=a.defaultErrorRedactor),!r.body||"duplex"in r||(r.duplex="half"),this.#n(r),Object.assign(r,{headers:t,url:r.url instanceof URL?r.url:new URL(r.url)})}#n(e){if(e.timeout){let t=AbortSignal.timeout(e.timeout);e.signal&&!e.signal.aborted?e.signal=AbortSignal.any([e.signal,t]):e.signal=t}}validateStatus(e){return e>=200&&e<300}async getResponseDataFromContentType(e){let t=e.headers.get("Content-Type");if(null===t)return e.text();if((t=t.toLowerCase()).includes("application/json")){let t=await e.text();try{t=JSON.parse(t)}catch{}return t}return t.match(/^text\//)?e.text():e.blob()}async *getMultipartRequest(e,t){let r=`--${t}--`;for(let r of e){let e=r.headers.get("Content-Type")||"application/octet-stream",s=`--${t}\r
Content-Type: ${e}\r
\r
`;yield s,"string"==typeof r.content?yield r.content:yield*r.content,yield"\r\n"}yield r}static #a;static #c;static async #o(){return this.#a||=(await e.A(91961)).HttpsProxyAgent,this.#a}static async #s(){return this.#c||=(await e.A(72331)).default,this.#c}static mergeHeaders(e,...t){for(let r of(e=e instanceof Headers?e:new Headers(e),t))(r instanceof Headers?r:new Headers(r)).forEach((t,r)=>{"set-cookie"===r?e.append(r,t):e.set(r,t)});return e}}r.Gaxios=d,s=d},57612,(e,t,r)=>{"use strict";var s=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),n=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.instance=r.Gaxios=r.GaxiosError=void 0,r.request=a;let i=e.r(80038);Object.defineProperty(r,"Gaxios",{enumerable:!0,get:function(){return i.Gaxios}});var o=e.r(27078);async function a(e){return r.instance.request(e)}Object.defineProperty(r,"GaxiosError",{enumerable:!0,get:function(){return o.GaxiosError}}),n(e.r(3137),r),r.instance=new i.Gaxios},29077,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.GCE_LINUX_BIOS_PATHS=void 0,r.isGoogleCloudServerless=i,r.isGoogleComputeEngineLinux=o,r.isGoogleComputeEngineMACAddress=a,r.isGoogleComputeEngine=c,r.detectGCPResidency=function(){return i()||c()},e.r(22734);let s=e.r(46786);r.GCE_LINUX_BIOS_PATHS={BIOS_DATE:"/sys/class/dmi/id/bios_date",BIOS_VENDOR:"/sys/class/dmi/id/bios_vendor"};let n=/^42:01/;function i(){return!!(process.env.CLOUD_RUN_JOB||process.env.FUNCTION_NAME||process.env.K_SERVICE)}function o(){if("linux"!==(0,s.platform)())return!1}function a(){for(let e of Object.values((0,s.networkInterfaces)()))if(e){for(let{mac:t}of e)if(n.test(t))return!0}return!1}function c(){return o()||a()}},45905,(e,t,r)=>{!function(r){"use strict";var s,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,o=Math.floor,a="[BigNumber Error] ",c=a+"Number primitive has more than 15 significant digits: ",l=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13];function u(e){var t=0|e;return e>0||e===t?t:t-1}function h(e){for(var t,r,s=1,n=e.length,i=e[0]+"";s<n;){for(r=14-(t=e[s++]+"").length;r--;t="0"+t);i+=t}for(n=i.length;48===i.charCodeAt(--n););return i.slice(0,n+1||1)}function d(e,t){var r,s,n=e.c,i=t.c,o=e.s,a=t.s,c=e.e,l=t.e;if(!o||!a)return null;if(r=n&&!n[0],s=i&&!i[0],r||s)return r?s?0:-a:o;if(o!=a)return o;if(r=o<0,s=c==l,!n||!i)return s?0:!n^r?1:-1;if(!s)return c>l^r?1:-1;for(o=0,a=(c=n.length)<(l=i.length)?c:l;o<a;o++)if(n[o]!=i[o])return n[o]>i[o]^r?1:-1;return c==l?0:c>l^r?1:-1}function f(e,t,r,s){if(e<t||e>r||e!==o(e))throw Error(a+(s||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function p(e){var t=e.c.length-1;return u(e.e/14)==t&&e.c[t]%2!=0}function g(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function y(e,t,r){var s,n;if(t<0){for(n=r+".";++t;n+=r);e=n+e}else if(s=e.length,++t>s){for(n=r,t-=s;--t;n+=r);e+=n}else t<s&&(e=e.slice(0,t)+"."+e.slice(t));return e}if((s=function e(t){var r,s,m,w,_,b,A,E,v,T=M.prototype={constructor:M,toString:null,valueOf:null},S=new M(1),C=20,k=4,O=-7,R=21,P=-1e7,j=1e7,I=!1,x=1,N=0,D={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"Â ",suffix:""},U="0123456789abcdefghijklmnopqrstuvwxyz",F=!0;function M(e,t){var r,s,i,a,l,u,h,d,p=this;if(!(p instanceof M))return new M(e,t);if(null==t){if(e&&!0===e._isBigNumber){p.s=e.s,!e.c||e.e>j?p.c=p.e=null:e.e<P?p.c=[p.e=0]:(p.e=e.e,p.c=e.c.slice());return}if((u="number"==typeof e)&&0*e==0){if(p.s=1/e<0?(e=-e,-1):1,e===~~e){for(a=0,l=e;l>=10;l/=10,a++);a>j?p.c=p.e=null:(p.e=a,p.c=[e]);return}d=String(e)}else{if(!n.test(d=String(e)))return v(p,d,u);p.s=45==d.charCodeAt(0)?(d=d.slice(1),-1):1}(a=d.indexOf("."))>-1&&(d=d.replace(".","")),(l=d.search(/e/i))>0?(a<0&&(a=l),a+=+d.slice(l+1),d=d.substring(0,l)):a<0&&(a=d.length)}else{if(f(t,2,U.length,"Base"),10==t&&F)return B(p=new M(e),C+p.e+1,k);if(d=String(e),u="number"==typeof e){if(0*e!=0)return v(p,d,u,t);if(p.s=1/e<0?(d=d.slice(1),-1):1,M.DEBUG&&d.replace(/^0\.0*|\./,"").length>15)throw Error(c+e)}else p.s=45===d.charCodeAt(0)?(d=d.slice(1),-1):1;for(r=U.slice(0,t),a=l=0,h=d.length;l<h;l++)if(0>r.indexOf(s=d.charAt(l))){if("."==s){if(l>a){a=h;continue}}else if(!i&&(d==d.toUpperCase()&&(d=d.toLowerCase())||d==d.toLowerCase()&&(d=d.toUpperCase()))){i=!0,l=-1,a=0;continue}return v(p,String(e),u,t)}u=!1,(a=(d=E(d,t,10,p.s)).indexOf("."))>-1?d=d.replace(".",""):a=d.length}for(l=0;48===d.charCodeAt(l);l++);for(h=d.length;48===d.charCodeAt(--h););if(d=d.slice(l,++h)){if(h-=l,u&&M.DEBUG&&h>15&&(e>0x1fffffffffffff||e!==o(e)))throw Error(c+p.s*e);if((a=a-l-1)>j)p.c=p.e=null;else if(a<P)p.c=[p.e=0];else{if(p.e=a,p.c=[],l=(a+1)%14,a<0&&(l+=14),l<h){for(l&&p.c.push(+d.slice(0,l)),h-=14;l<h;)p.c.push(+d.slice(l,l+=14));l=14-(d=d.slice(l)).length}else l-=h;for(;l--;d+="0");p.c.push(+d)}}else p.c=[p.e=0]}function L(e,t,r,s){var n,i,o,a,c;if(null==r?r=k:f(r,0,8),!e.c)return e.toString();if(n=e.c[0],o=e.e,null==t)c=h(e.c),c=1==s||2==s&&(o<=O||o>=R)?g(c,o):y(c,o,"0");else if(i=(e=B(new M(e),t,r)).e,a=(c=h(e.c)).length,1==s||2==s&&(t<=i||i<=O)){for(;a<t;c+="0",a++);c=g(c,i)}else if(t-=o+(2===s&&i>o),c=y(c,i,"0"),i+1>a){if(--t>0)for(c+=".";t--;c+="0");}else if((t+=i-a)>0)for(i+1==a&&(c+=".");t--;c+="0");return e.s<0&&n?"-"+c:c}function G(e,t){for(var r,s,n=1,i=new M(e[0]);n<e.length;n++)(s=new M(e[n])).s&&(r=d(i,s))!==t&&(0!==r||i.s!==t)||(i=s);return i}function $(e,t,r){for(var s=1,n=t.length;!t[--n];t.pop());for(n=t[0];n>=10;n/=10,s++);return(r=s+14*r-1)>j?e.c=e.e=null:r<P?e.c=[e.e=0]:(e.e=r,e.c=t),e}function B(e,t,r,s){var n,a,c,u,h,d,f,p=e.c;if(p){e:{for(n=1,u=p[0];u>=10;u/=10,n++);if((a=t-n)<0)a+=14,c=t,f=o((h=p[d=0])/l[n-c-1]%10);else if((d=i((a+1)/14))>=p.length)if(s){for(;p.length<=d;p.push(0));h=f=0,n=1,a%=14,c=a-14+1}else break e;else{for(n=1,h=u=p[d];u>=10;u/=10,n++);a%=14,f=(c=a-14+n)<0?0:o(h/l[n-c-1]%10)}if(s=s||t<0||null!=p[d+1]||(c<0?h:h%l[n-c-1]),s=r<4?(f||s)&&(0==r||r==(e.s<0?3:2)):f>5||5==f&&(4==r||s||6==r&&(a>0?c>0?h/l[n-c]:0:p[d-1])%10&1||r==(e.s<0?8:7)),t<1||!p[0])return p.length=0,s?(t-=e.e+1,p[0]=l[(14-t%14)%14],e.e=-t||0):p[0]=e.e=0,e;if(0==a?(p.length=d,u=1,d--):(p.length=d+1,u=l[14-a],p[d]=c>0?o(h/l[n-c]%l[c])*u:0),s)for(;;)if(0==d){for(a=1,c=p[0];c>=10;c/=10,a++);for(c=p[0]+=u,u=1;c>=10;c/=10,u++);a!=u&&(e.e++,1e14==p[0]&&(p[0]=1));break}else{if(p[d]+=u,1e14!=p[d])break;p[d--]=0,u=1}for(a=p.length;0===p[--a];p.pop());}e.e>j?e.c=e.e=null:e.e<P&&(e.c=[e.e=0])}return e}function q(e){var t,r=e.e;return null===r?e.toString():(t=h(e.c),t=r<=O||r>=R?g(t,r):y(t,r,"0"),e.s<0?"-"+t:t)}return M.clone=e,M.ROUND_UP=0,M.ROUND_DOWN=1,M.ROUND_CEIL=2,M.ROUND_FLOOR=3,M.ROUND_HALF_UP=4,M.ROUND_HALF_DOWN=5,M.ROUND_HALF_EVEN=6,M.ROUND_HALF_CEIL=7,M.ROUND_HALF_FLOOR=8,M.EUCLID=9,M.config=M.set=function(e){var t,r;if(null!=e)if("object"==typeof e){if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(f(r=e[t],0,1e9,t),C=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(f(r=e[t],0,8,t),k=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(f(r[0],-1e9,0,t),f(r[1],0,1e9,t),O=r[0],R=r[1]):(f(r,-1e9,1e9,t),O=-(R=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)f(r[0],-1e9,-1,t),f(r[1],1,1e9,t),P=r[0],j=r[1];else if(f(r,-1e9,1e9,t),r)P=-(j=r<0?-r:r);else throw Error(a+t+" cannot be zero: "+r);if(e.hasOwnProperty(t="CRYPTO"))if(!!(r=e[t])===r)if(r)if("u">typeof crypto&&crypto&&(crypto.getRandomValues||crypto.randomBytes))I=r;else throw I=!r,Error(a+"crypto unavailable");else I=r;else throw Error(a+t+" not true or false: "+r);if(e.hasOwnProperty(t="MODULO_MODE")&&(f(r=e[t],0,9,t),x=r),e.hasOwnProperty(t="POW_PRECISION")&&(f(r=e[t],0,1e9,t),N=r),e.hasOwnProperty(t="FORMAT"))if("object"==typeof(r=e[t]))D=r;else throw Error(a+t+" not an object: "+r);if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(a+t+" invalid: "+r);F="0123456789"==r.slice(0,10),U=r}}else throw Error(a+"Object expected: "+e);return{DECIMAL_PLACES:C,ROUNDING_MODE:k,EXPONENTIAL_AT:[O,R],RANGE:[P,j],CRYPTO:I,MODULO_MODE:x,POW_PRECISION:N,FORMAT:D,ALPHABET:U}},M.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!M.DEBUG)return!0;var t,r,s=e.c,n=e.e,i=e.s;e:if("[object Array]"==({}).toString.call(s)){if((1===i||-1===i)&&n>=-1e9&&n<=1e9&&n===o(n)){if(0===s[0]){if(0===n&&1===s.length)return!0;break e}if((t=(n+1)%14)<1&&(t+=14),String(s[0]).length==t){for(t=0;t<s.length;t++)if((r=s[t])<0||r>=1e14||r!==o(r))break e;if(0!==r)return!0}}}else if(null===s&&null===n&&(null===i||1===i||-1===i))return!0;throw Error(a+"Invalid BigNumber: "+e)},M.maximum=M.max=function(){return G(arguments,-1)},M.minimum=M.min=function(){return G(arguments,1)},r=0x20000000000000*Math.random()&2097151?function(){return o(0x20000000000000*Math.random())}:function(){return(0x40000000*Math.random()|0)*8388608+(8388608*Math.random()|0)},M.random=function(e){var t,s,n,c,u,h=0,d=[],p=new M(S);if(null==e?e=C:f(e,0,1e9),c=i(e/14),I)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(c*=2));h<c;)(u=131072*t[h]+(t[h+1]>>>11))>=9e15?(s=crypto.getRandomValues(new Uint32Array(2)),t[h]=s[0],t[h+1]=s[1]):(d.push(u%1e14),h+=2);h=c/2}else if(crypto.randomBytes){for(t=crypto.randomBytes(c*=7);h<c;)(u=(31&t[h])*0x1000000000000+0x10000000000*t[h+1]+0x100000000*t[h+2]+0x1000000*t[h+3]+(t[h+4]<<16)+(t[h+5]<<8)+t[h+6])>=9e15?crypto.randomBytes(7).copy(t,h):(d.push(u%1e14),h+=7);h=c/7}else throw I=!1,Error(a+"crypto unavailable");if(!I)for(;h<c;)(u=r())<9e15&&(d[h++]=u%1e14);for(c=d[--h],e%=14,c&&e&&(u=l[14-e],d[h]=o(c/u)*u);0===d[h];d.pop(),h--);if(h<0)d=[n=0];else{for(n=-1;0===d[0];d.splice(0,1),n-=14);for(h=1,u=d[0];u>=10;u/=10,h++);h<14&&(n-=14-h)}return p.e=n,p.c=d,p},M.sum=function(){for(var e=1,t=arguments,r=new M(t[0]);e<t.length;)r=r.plus(t[e++]);return r},E=function(){var e="0123456789";function t(e,t,r,s){for(var n,i,o=[0],a=0,c=e.length;a<c;){for(i=o.length;i--;o[i]*=t);for(o[0]+=s.indexOf(e.charAt(a++)),n=0;n<o.length;n++)o[n]>r-1&&(null==o[n+1]&&(o[n+1]=0),o[n+1]+=o[n]/r|0,o[n]%=r)}return o.reverse()}return function(r,s,n,i,o){var a,c,l,u,d,f,p,g,m=r.indexOf("."),w=C,_=k;for(m>=0&&(u=N,N=0,r=r.replace(".",""),f=(g=new M(s)).pow(r.length-m),N=u,g.c=t(y(h(f.c),f.e,"0"),10,n,e),g.e=g.c.length),l=u=(p=t(r,s,n,o?(a=U,e):(a=e,U))).length;0==p[--u];p.pop());if(!p[0])return a.charAt(0);if(m<0?--l:(f.c=p,f.e=l,f.s=i,p=(f=A(f,g,w,_,n)).c,d=f.r,l=f.e),m=p[c=l+w+1],u=n/2,d=d||c<0||null!=p[c+1],d=_<4?(null!=m||d)&&(0==_||_==(f.s<0?3:2)):m>u||m==u&&(4==_||d||6==_&&1&p[c-1]||_==(f.s<0?8:7)),c<1||!p[0])r=d?y(a.charAt(1),-w,a.charAt(0)):a.charAt(0);else{if(p.length=c,d)for(--n;++p[--c]>n;)p[c]=0,c||(++l,p=[1].concat(p));for(u=p.length;!p[--u];);for(m=0,r="";m<=u;r+=a.charAt(p[m++]));r=y(r,l,a.charAt(0))}return r}}(),A=function(){function e(e,t,r){var s,n,i,o,a=0,c=e.length,l=t%1e7,u=t/1e7|0;for(e=e.slice();c--;)s=u*(i=e[c]%1e7)+(o=e[c]/1e7|0)*l,a=((n=l*i+s%1e7*1e7+a)/r|0)+(s/1e7|0)+u*o,e[c]=n%r;return a&&(e=[a].concat(e)),e}function t(e,t,r,s){var n,i;if(r!=s)i=r>s?1:-1;else for(n=i=0;n<r;n++)if(e[n]!=t[n]){i=e[n]>t[n]?1:-1;break}return i}function r(e,t,r,s){for(var n=0;r--;)e[r]-=n,n=+(e[r]<t[r]),e[r]=n*s+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(s,n,i,a,c){var l,h,d,f,p,g,y,m,w,_,b,A,E,v,T,S,C,k=s.s==n.s?1:-1,O=s.c,R=n.c;if(!O||!O[0]||!R||!R[0])return new M(!s.s||!n.s||(O?R&&O[0]==R[0]:!R)?NaN:O&&0==O[0]||!R?0*k:k/0);for(w=(m=new M(k)).c=[],k=i+(h=s.e-n.e)+1,c||(c=1e14,h=u(s.e/14)-u(n.e/14),k=k/14|0),d=0;R[d]==(O[d]||0);d++);if(R[d]>(O[d]||0)&&h--,k<0)w.push(1),f=!0;else{for(v=O.length,S=R.length,d=0,k+=2,(p=o(c/(R[0]+1)))>1&&(R=e(R,p,c),O=e(O,p,c),S=R.length,v=O.length),E=S,b=(_=O.slice(0,S)).length;b<S;_[b++]=0);C=[0].concat(C=R.slice()),T=R[0],R[1]>=c/2&&T++;do{if(p=0,(l=t(R,_,S,b))<0){if(A=_[0],S!=b&&(A=A*c+(_[1]||0)),(p=o(A/T))>1)for(p>=c&&(p=c-1),y=(g=e(R,p,c)).length,b=_.length;1==t(g,_,y,b);)p--,r(g,S<y?C:R,y,c),y=g.length,l=1;else 0==p&&(l=p=1),y=(g=R.slice()).length;if(y<b&&(g=[0].concat(g)),r(_,g,b,c),b=_.length,-1==l)for(;1>t(R,_,S,b);)p++,r(_,S<b?C:R,b,c),b=_.length}else 0===l&&(p++,_=[0]);w[d++]=p,_[0]?_[b++]=O[E]||0:(_=[O[E]],b=1)}while((E++<v||null!=_[0])&&k--)f=null!=_[0],w[0]||w.splice(0,1)}if(1e14==c){for(d=1,k=w[0];k>=10;k/=10,d++);B(m,i+(m.e=d+14*h-1)+1,a,f)}else m.e=h,m.r=+f;return m}}(),s=/^(-?)0([xbo])(?=\w[\w.]*$)/i,m=/^([^.]+)\.$/,w=/^\.([^.]+)$/,_=/^-?(Infinity|NaN)$/,b=/^\s*\+(?=[\w.])|^\s+|\s+$/g,v=function(e,t,r,n){var i,o=r?t:t.replace(b,"");if(_.test(o))e.s=isNaN(o)?null:o<0?-1:1;else{if(!r&&(o=o.replace(s,function(e,t,r){return i="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=i?e:t}),n&&(i=n,o=o.replace(m,"$1").replace(w,"0.$1")),t!=o))return new M(o,i);if(M.DEBUG)throw Error(a+"Not a"+(n?" base "+n:"")+" number: "+t);e.s=null}e.c=e.e=null},T.absoluteValue=T.abs=function(){var e=new M(this);return e.s<0&&(e.s=1),e},T.comparedTo=function(e,t){return d(this,new M(e,t))},T.decimalPlaces=T.dp=function(e,t){var r,s,n;if(null!=e)return f(e,0,1e9),null==t?t=k:f(t,0,8),B(new M(this),e+this.e+1,t);if(!(r=this.c))return null;if(s=((n=r.length-1)-u(this.e/14))*14,n=r[n])for(;n%10==0;n/=10,s--);return s<0&&(s=0),s},T.dividedBy=T.div=function(e,t){return A(this,new M(e,t),C,k)},T.dividedToIntegerBy=T.idiv=function(e,t){return A(this,new M(e,t),0,1)},T.exponentiatedBy=T.pow=function(e,t){var r,s,n,c,l,u,h,d,f,g=this;if((e=new M(e)).c&&!e.isInteger())throw Error(a+"Exponent not an integer: "+q(e));if(null!=t&&(t=new M(t)),u=e.e>14,!g.c||!g.c[0]||1==g.c[0]&&!g.e&&1==g.c.length||!e.c||!e.c[0])return f=new M(Math.pow(+q(g),u?e.s*(2-p(e)):+q(e))),t?f.mod(t):f;if(h=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new M(NaN);(s=!h&&g.isInteger()&&t.isInteger())&&(g=g.mod(t))}else{if(e.e>9&&(g.e>0||g.e<-1||(0==g.e?g.c[0]>1||u&&g.c[1]>=24e7:g.c[0]<8e13||u&&g.c[0]<=9999975e7)))return c=g.s<0&&p(e)?-0:0,g.e>-1&&(c=1/c),new M(h?1/c:c);N&&(c=i(N/14+2))}for(u?(r=new M(.5),h&&(e.s=1),d=p(e)):d=(n=Math.abs(+q(e)))%2,f=new M(S);;){if(d){if(!(f=f.times(g)).c)break;c?f.c.length>c&&(f.c.length=c):s&&(f=f.mod(t))}if(n){if(0===(n=o(n/2)))break;d=n%2}else if(B(e=e.times(r),e.e+1,1),e.e>14)d=p(e);else{if(0==(n=+q(e)))break;d=n%2}g=g.times(g),c?g.c&&g.c.length>c&&(g.c.length=c):s&&(g=g.mod(t))}return s?f:(h&&(f=S.div(f)),t?f.mod(t):c?B(f,N,k,l):f)},T.integerValue=function(e){var t=new M(this);return null==e?e=k:f(e,0,8),B(t,t.e+1,e)},T.isEqualTo=T.eq=function(e,t){return 0===d(this,new M(e,t))},T.isFinite=function(){return!!this.c},T.isGreaterThan=T.gt=function(e,t){return d(this,new M(e,t))>0},T.isGreaterThanOrEqualTo=T.gte=function(e,t){return 1===(t=d(this,new M(e,t)))||0===t},T.isInteger=function(){return!!this.c&&u(this.e/14)>this.c.length-2},T.isLessThan=T.lt=function(e,t){return 0>d(this,new M(e,t))},T.isLessThanOrEqualTo=T.lte=function(e,t){return -1===(t=d(this,new M(e,t)))||0===t},T.isNaN=function(){return!this.s},T.isNegative=function(){return this.s<0},T.isPositive=function(){return this.s>0},T.isZero=function(){return!!this.c&&0==this.c[0]},T.minus=function(e,t){var r,s,n,i,o=this.s;if(t=(e=new M(e,t)).s,!o||!t)return new M(NaN);if(o!=t)return e.s=-t,this.plus(e);var a=this.e/14,c=e.e/14,l=this.c,h=e.c;if(!a||!c){if(!l||!h)return l?(e.s=-t,e):new M(h?this:NaN);if(!l[0]||!h[0])return h[0]?(e.s=-t,e):new M(l[0]?this:3==k?-0:0)}if(a=u(a),c=u(c),l=l.slice(),o=a-c){for((i=o<0)?(o=-o,n=l):(c=a,n=h),n.reverse(),t=o;t--;n.push(0));n.reverse()}else for(s=(i=(o=l.length)<(t=h.length))?o:t,o=t=0;t<s;t++)if(l[t]!=h[t]){i=l[t]<h[t];break}if(i&&(n=l,l=h,h=n,e.s=-e.s),(t=(s=h.length)-(r=l.length))>0)for(;t--;l[r++]=0);for(t=1e14-1;s>o;){if(l[--s]<h[s]){for(r=s;r&&!l[--r];l[r]=t);--l[r],l[s]+=1e14}l[s]-=h[s]}for(;0==l[0];l.splice(0,1),--c);return l[0]?$(e,l,c):(e.s=3==k?-1:1,e.c=[e.e=0],e)},T.modulo=T.mod=function(e,t){var r,s;return(e=new M(e,t),this.c&&e.s&&(!e.c||e.c[0]))?e.c&&(!this.c||this.c[0])?(9==x?(s=e.s,e.s=1,r=A(this,e,0,3),e.s=s,r.s*=s):r=A(this,e,0,x),(e=this.minus(r.times(e))).c[0]||1!=x||(e.s=this.s),e):new M(this):new M(NaN)},T.multipliedBy=T.times=function(e,t){var r,s,n,i,o,a,c,l,h,d,f,p,g,y=this.c,m=(e=new M(e,t)).c;if(!y||!m||!y[0]||!m[0])return this.s&&e.s&&(!y||y[0]||m)&&(!m||m[0]||y)?(e.s*=this.s,y&&m?(e.c=[0],e.e=0):e.c=e.e=null):e.c=e.e=e.s=null,e;for(s=u(this.e/14)+u(e.e/14),e.s*=this.s,(c=y.length)<(d=m.length)&&(g=y,y=m,m=g,n=c,c=d,d=n),n=c+d,g=[];n--;g.push(0));for(n=d;--n>=0;){for(r=0,f=m[n]%1e7,p=m[n]/1e7|0,i=n+(o=c);i>n;)a=p*(l=y[--o]%1e7)+(h=y[o]/1e7|0)*f,r=((l=f*l+a%1e7*1e7+g[i]+r)/1e14|0)+(a/1e7|0)+p*h,g[i--]=l%1e14;g[i]=r}return r?++s:g.splice(0,1),$(e,g,s)},T.negated=function(){var e=new M(this);return e.s=-e.s||null,e},T.plus=function(e,t){var r,s=this.s;if(t=(e=new M(e,t)).s,!s||!t)return new M(NaN);if(s!=t)return e.s=-t,this.minus(e);var n=this.e/14,i=e.e/14,o=this.c,a=e.c;if(!n||!i){if(!o||!a)return new M(s/0);if(!o[0]||!a[0])return a[0]?e:new M(o[0]?this:0*s)}if(n=u(n),i=u(i),o=o.slice(),s=n-i){for(s>0?(i=n,r=a):(s=-s,r=o),r.reverse();s--;r.push(0));r.reverse()}for((s=o.length)-(t=a.length)<0&&(r=a,a=o,o=r,t=s),s=0;t;)s=(o[--t]=o[t]+a[t]+s)/1e14|0,o[t]=1e14===o[t]?0:o[t]%1e14;return s&&(o=[s].concat(o),++i),$(e,o,i)},T.precision=T.sd=function(e,t){var r,s,n;if(null!=e&&!!e!==e)return f(e,1,1e9),null==t?t=k:f(t,0,8),B(new M(this),e,t);if(!(r=this.c))return null;if(s=14*(n=r.length-1)+1,n=r[n]){for(;n%10==0;n/=10,s--);for(n=r[0];n>=10;n/=10,s++);}return e&&this.e+1>s&&(s=this.e+1),s},T.shiftedBy=function(e){return f(e,-0x1fffffffffffff,0x1fffffffffffff),this.times("1e"+e)},T.squareRoot=T.sqrt=function(){var e,t,r,s,n,i=this.c,o=this.s,a=this.e,c=C+4,l=new M("0.5");if(1!==o||!i||!i[0])return new M(!o||o<0&&(!i||i[0])?NaN:i?this:1/0);if(0==(o=Math.sqrt(+q(this)))||o==1/0?(((t=h(i)).length+a)%2==0&&(t+="0"),o=Math.sqrt(+t),a=u((a+1)/2)-(a<0||a%2),r=new M(t=o==1/0?"5e"+a:(t=o.toExponential()).slice(0,t.indexOf("e")+1)+a)):r=new M(o+""),r.c[0]){for((o=(a=r.e)+c)<3&&(o=0);;)if(n=r,r=l.times(n.plus(A(this,n,c,1))),h(n.c).slice(0,o)===(t=h(r.c)).slice(0,o)){if(r.e<a&&--o,"9999"!=(t=t.slice(o-3,o+1))&&(s||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(B(r,r.e+C+2,1),e=!r.times(r).eq(this));break}if(!s&&(B(n,n.e+C+2,0),n.times(n).eq(this))){r=n;break}c+=4,o+=4,s=1}}return B(r,r.e+C+1,k,e)},T.toExponential=function(e,t){return null!=e&&(f(e,0,1e9),e++),L(this,e,t,1)},T.toFixed=function(e,t){return null!=e&&(f(e,0,1e9),e=e+this.e+1),L(this,e,t)},T.toFormat=function(e,t,r){var s;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=D;else if("object"!=typeof r)throw Error(a+"Argument not an object: "+r);if(s=this.toFixed(e,t),this.c){var n,i=s.split("."),o=+r.groupSize,c=+r.secondaryGroupSize,l=r.groupSeparator||"",u=i[0],h=i[1],d=this.s<0,f=d?u.slice(1):u,p=f.length;if(c&&(n=o,o=c,c=n,p-=n),o>0&&p>0){for(n=p%o||o,u=f.substr(0,n);n<p;n+=o)u+=l+f.substr(n,o);c>0&&(u+=l+f.slice(n)),d&&(u="-"+u)}s=h?u+(r.decimalSeparator||"")+((c=+r.fractionGroupSize)?h.replace(RegExp("\\d{"+c+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):h):u}return(r.prefix||"")+s+(r.suffix||"")},T.toFraction=function(e){var t,r,s,n,i,o,c,u,d,f,p,g,y=this.c;if(null!=e&&(!(c=new M(e)).isInteger()&&(c.c||1!==c.s)||c.lt(S)))throw Error(a+"Argument "+(c.isInteger()?"out of range: ":"not an integer: ")+q(c));if(!y)return new M(this);for(t=new M(S),d=r=new M(S),s=u=new M(S),g=h(y),i=t.e=g.length-this.e-1,t.c[0]=l[(o=i%14)<0?14+o:o],e=!e||c.comparedTo(t)>0?i>0?t:d:c,o=j,j=1/0,c=new M(g),u.c[0]=0;f=A(c,t,0,1),1!=(n=r.plus(f.times(s))).comparedTo(e);)r=s,s=n,d=u.plus(f.times(n=d)),u=n,t=c.minus(f.times(n=t)),c=n;return n=A(e.minus(r),s,0,1),u=u.plus(n.times(d)),r=r.plus(n.times(s)),u.s=d.s=this.s,i*=2,p=1>A(d,s,i,k).minus(this).abs().comparedTo(A(u,r,i,k).minus(this).abs())?[d,s]:[u,r],j=o,p},T.toNumber=function(){return+q(this)},T.toPrecision=function(e,t){return null!=e&&f(e,1,1e9),L(this,e,t,2)},T.toString=function(e){var t,r=this,s=r.s,n=r.e;return null===n?s?(t="Infinity",s<0&&(t="-"+t)):t="NaN":(null==e?t=n<=O||n>=R?g(h(r.c),n):y(h(r.c),n,"0"):10===e&&F?t=y(h((r=B(new M(r),C+n+1,k)).c),r.e,"0"):(f(e,2,U.length,"Base"),t=E(y(h(r.c),n,"0"),10,e,s,!0)),s<0&&r.c[0]&&(t="-"+t)),t},T.valueOf=T.toJSON=function(){return q(this)},T._isBigNumber=!0,null!=t&&M.set(t),M}()).default=s.BigNumber=s,"function"==typeof define&&define.amd)e.r,void 0!==s&&e.v(s);else t.exports?t.exports=s:(r||(r="u">typeof self&&self?self:window),r.BigNumber=s)}(e.e)},64349,(e,t,r)=>{var s=e.r(45905),n=t.exports;!function(){"use strict";var e,t,r,i=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function a(e){return i.lastIndex=0,i.test(e)?'"'+e.replace(i,function(e){var t=o[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}"function"!=typeof n.stringify&&(n.stringify=function(n,i,o){var c;if(e="",t="","number"==typeof o)for(c=0;c<o;c+=1)t+=" ";else"string"==typeof o&&(t=o);if(r=i,i&&"function"!=typeof i&&("object"!=typeof i||"number"!=typeof i.length))throw Error("JSON.stringify");return function n(i,o){var c,l,u,h,d,f=e,p=o[i],g=null!=p&&(p instanceof s||s.isBigNumber(p));switch(p&&"object"==typeof p&&"function"==typeof p.toJSON&&(p=p.toJSON(i)),"function"==typeof r&&(p=r.call(o,i,p)),typeof p){case"string":if(g)return p;return a(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":case"bigint":return String(p);case"object":if(!p)return"null";if(e+=t,d=[],"[object Array]"===Object.prototype.toString.apply(p)){for(c=0,h=p.length;c<h;c+=1)d[c]=n(c,p)||"null";return u=0===d.length?"[]":e?"[\n"+e+d.join(",\n"+e)+"\n"+f+"]":"["+d.join(",")+"]",e=f,u}if(r&&"object"==typeof r)for(c=0,h=r.length;c<h;c+=1)"string"==typeof r[c]&&(u=n(l=r[c],p))&&d.push(a(l)+(e?": ":":")+u);else Object.keys(p).forEach(function(t){var r=n(t,p);r&&d.push(a(t)+(e?": ":":")+r)});return u=0===d.length?"{}":e?"{\n"+e+d.join(",\n"+e)+"\n"+f+"}":"{"+d.join(",")+"}",e=f,u}}("",{"":n})})}()},67104,(e,t,r)=>{var s=null;let n=/(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])/,i=/(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)/;t.exports=function(t){"use strict";var r={strict:!1,storeAsString:!1,alwaysParseAsBig:!1,useNativeBigInt:!1,protoAction:"error",constructorAction:"error"};if(null!=t){if(!0===t.strict&&(r.strict=!0),!0===t.storeAsString&&(r.storeAsString=!0),r.alwaysParseAsBig=!0===t.alwaysParseAsBig&&t.alwaysParseAsBig,r.useNativeBigInt=!0===t.useNativeBigInt&&t.useNativeBigInt,void 0!==t.constructorAction)if("error"===t.constructorAction||"ignore"===t.constructorAction||"preserve"===t.constructorAction)r.constructorAction=t.constructorAction;else throw Error(`Incorrect value for constructorAction option, must be "error", "ignore" or undefined but passed ${t.constructorAction}`);if(void 0!==t.protoAction)if("error"===t.protoAction||"ignore"===t.protoAction||"preserve"===t.protoAction)r.protoAction=t.protoAction;else throw Error(`Incorrect value for protoAction option, must be "error", "ignore" or undefined but passed ${t.protoAction}`)}var o,a,c,l,u={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"},h=function(e){throw{name:"SyntaxError",message:e,at:o,text:c}},d=function(e){return e&&e!==a&&h("Expected '"+e+"' instead of '"+a+"'"),a=c.charAt(o),o+=1,a},f=function(){var t,n="";for("-"===a&&(n="-",d("-"));a>="0"&&a<="9";)n+=a,d();if("."===a)for(n+=".";d()&&a>="0"&&a<="9";)n+=a;if("e"===a||"E"===a)for(n+=a,d(),("-"===a||"+"===a)&&(n+=a,d());a>="0"&&a<="9";)n+=a,d();if(isFinite(t=+n))return(null==s&&(s=e.r(45905)),n.length>15)?r.storeAsString?n:r.useNativeBigInt?BigInt(n):new s(n):r.alwaysParseAsBig?r.useNativeBigInt?BigInt(t):new s(t):t;h("Bad number")},p=function(){var e,t,r,s="";if('"'===a)for(var n=o;d();){if('"'===a)return o-1>n&&(s+=c.substring(n,o-1)),d(),s;if("\\"===a){if(o-1>n&&(s+=c.substring(n,o-1)),d(),"u"===a){for(t=0,r=0;t<4&&isFinite(e=parseInt(d(),16));t+=1)r=16*r+e;s+=String.fromCharCode(r)}else if("string"==typeof u[a])s+=u[a];else break;n=o}}h("Bad string")},g=function(){for(;a&&a<=" ";)d()},y=function(){switch(a){case"t":return d("t"),d("r"),d("u"),d("e"),!0;case"f":return d("f"),d("a"),d("l"),d("s"),d("e"),!1;case"n":return d("n"),d("u"),d("l"),d("l"),null}h("Unexpected '"+a+"'")},m=function(){var e=[];if("["===a){if(d("["),g(),"]"===a)return d("]"),e;for(;a;){if(e.push(l()),g(),"]"===a)return d("]"),e;d(","),g()}}h("Bad array")},w=function(){var e,t=Object.create(null);if("{"===a){if(d("{"),g(),"}"===a)return d("}"),t;for(;a;){if(e=p(),g(),d(":"),!0===r.strict&&Object.hasOwnProperty.call(t,e)&&h('Duplicate key "'+e+'"'),!0===n.test(e)?"error"===r.protoAction?h("Object contains forbidden prototype property"):"ignore"===r.protoAction?l():t[e]=l():!0===i.test(e)?"error"===r.constructorAction?h("Object contains forbidden constructor property"):"ignore"===r.constructorAction?l():t[e]=l():t[e]=l(),g(),"}"===a)return d("}"),t;d(","),g()}}h("Bad object")};return l=function(){switch(g(),a){case"{":return w();case"[":return m();case'"':return p();case"-":return f();default:return a>="0"&&a<="9"?f():y()}},function(e,t){var r;return c=e+"",o=0,a=" ",r=l(),g(),a&&h("Syntax error"),"function"==typeof t?function e(r,s){var n,i=r[s];return i&&"object"==typeof i&&Object.keys(i).forEach(function(t){void 0!==(n=e(i,t))?i[t]=n:delete i[t]}),t.call(r,s,i)}({"":r},""):r}}},1158,(e,t,r)=>{var s=e.r(64349).stringify,n=e.r(67104);t.exports=function(e){return{parse:n(e),stringify:s}},t.exports.parse=n(),t.exports.stringify=s},5365,(e,t,r)=>{t.exports=e.x("process",()=>require("process"))},6737,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Colours=void 0;class s{static isEnabled(e){return e&&e.isTTY&&("function"!=typeof e.getColorDepth||e.getColorDepth()>2)}static refresh(){s.enabled=s.isEnabled(null==process?void 0:process.stderr),this.enabled?(s.reset="\x1b[0m",s.bright="\x1b[1m",s.dim="\x1b[2m",s.red="\x1b[31m",s.green="\x1b[32m",s.yellow="\x1b[33m",s.blue="\x1b[34m",s.magenta="\x1b[35m",s.cyan="\x1b[36m",s.white="\x1b[37m",s.grey="\x1b[90m"):(s.reset="",s.bright="",s.dim="",s.red="",s.green="",s.yellow="",s.blue="",s.magenta="",s.cyan="",s.white="",s.grey="")}}r.Colours=s,s.enabled=!1,s.reset="",s.bright="",s.dim="",s.red="",s.green="",s.yellow="",s.blue="",s.magenta="",s.cyan="",s.white="",s.grey="",s.refresh()},90812,(e,t,r)=>{"use strict";let s;var n,i,o,a=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),c=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=e.e&&e.e.__importStar||(n=function(e){return(n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),s=0;s<r.length;s++)"default"!==r[s]&&a(t,e,r[s]);return c(t,e),t});Object.defineProperty(r,"__esModule",{value:!0}),r.env=r.DebugLogBackendBase=r.placeholder=r.AdhocDebugLogger=r.LogSeverity=void 0,r.getNodeBackend=m,r.getDebugBackend=function(e){return new w(e)},r.getStructuredBackend=function(e){return new _(e)},r.setBackend=function(e){s=e,b.clear()},r.log=A;let u=e.r(27699),h=l(e.r(5365)),d=l(e.r(24361)),f=e.r(6737);(i=o||(r.LogSeverity=o={})).DEFAULT="DEFAULT",i.DEBUG="DEBUG",i.INFO="INFO",i.WARNING="WARNING",i.ERROR="ERROR";class p extends u.EventEmitter{constructor(e,t){super(),this.namespace=e,this.upstream=t,this.func=Object.assign(this.invoke.bind(this),{instance:this,on:(e,t)=>this.on(e,t)}),this.func.debug=(...e)=>this.invokeSeverity(o.DEBUG,...e),this.func.info=(...e)=>this.invokeSeverity(o.INFO,...e),this.func.warn=(...e)=>this.invokeSeverity(o.WARNING,...e),this.func.error=(...e)=>this.invokeSeverity(o.ERROR,...e),this.func.sublog=e=>A(e,this.func)}invoke(e,...t){if(this.upstream)try{this.upstream(e,...t)}catch(e){}try{this.emit("log",e,t)}catch(e){}}invokeSeverity(e,...t){this.invoke({severity:e},...t)}}r.AdhocDebugLogger=p,r.placeholder=new p("",()=>{}).func;class g{constructor(){var e;this.cached=new Map,this.filters=[],this.filtersSet=!1;let t=null!=(e=h.env[r.env.nodeEnables])?e:"*";"all"===t&&(t="*"),this.filters=t.split(",")}log(e,t,...r){try{this.filtersSet||(this.setFilters(),this.filtersSet=!0);let s=this.cached.get(e);s||(s=this.makeLogger(e),this.cached.set(e,s)),s(t,...r)}catch(e){console.error(e)}}}r.DebugLogBackendBase=g;class y extends g{constructor(){super(...arguments),this.enabledRegexp=/.*/g}isEnabled(e){return this.enabledRegexp.test(e)}makeLogger(e){return this.enabledRegexp.test(e)?(t,...r)=>{var s;let n,i=`${f.Colours.green}${e}${f.Colours.reset}`,a=`${f.Colours.yellow}${h.pid}${f.Colours.reset}`;switch(t.severity){case o.ERROR:n=`${f.Colours.red}${t.severity}${f.Colours.reset}`;break;case o.INFO:n=`${f.Colours.magenta}${t.severity}${f.Colours.reset}`;break;case o.WARNING:n=`${f.Colours.yellow}${t.severity}${f.Colours.reset}`;break;default:n=null!=(s=t.severity)?s:o.DEFAULT}let c=d.formatWithOptions({colors:f.Colours.enabled},...r),l=Object.assign({},t);delete l.severity;let u=Object.getOwnPropertyNames(l).length?JSON.stringify(l):"",p=u?`${f.Colours.grey}${u}${f.Colours.reset}`:"";console.error("%s [%s|%s] %s%s",a,i,n,c,u?` ${p}`:"")}:()=>{}}setFilters(){let e=this.filters.join(",").replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^");this.enabledRegexp=RegExp(`^${e}$`,"i")}}function m(){return new y}class w extends g{constructor(e){super(),this.debugPkg=e}makeLogger(e){let t=this.debugPkg(e);return(e,...r)=>{t(r[0],...r.slice(1))}}setFilters(){var e;let t=null!=(e=h.env.NODE_DEBUG)?e:"";h.env.NODE_DEBUG=`${t}${t?",":""}${this.filters.join(",")}`}}class _ extends g{constructor(e){super(),this.upstream=null!=e?e:void 0}makeLogger(e){var t;let r=null==(t=this.upstream)?void 0:t.makeLogger(e);return(e,...t)=>{var s;let n=JSON.stringify(Object.assign({severity:null!=(s=e.severity)?s:o.INFO,message:d.format(...t)},e));r?r(e,n):console.log("%s",n)}}setFilters(){var e;null==(e=this.upstream)||e.setFilters()}}r.env={nodeEnables:"GOOGLE_SDK_NODE_LOGGING"};let b=new Map;function A(e,t){let n;if(!s&&!h.env[r.env.nodeEnables]||!e)return r.placeholder;t&&(e=`${t.instance.namespace}:${e}`);let i=b.get(e);if(i)return i.func;if(null===s)return r.placeholder;void 0===s&&(s=m());let o=new p(e,(t,...r)=>{if(n!==s){if(null===s)return;void 0===s&&(s=m()),n=s}null==s||s.log(e,t,...r)});return b.set(e,o),o.func}},47637,(e,t,r)=>{"use strict";var s=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),n=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),n(e.r(90812),r)},82e3,(e,t,r)=>{"use strict";let s;var n,i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),o=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=e.e&&e.e.__importStar||(n=function(e){return(n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),s=0;s<r.length;s++)"default"!==r[s]&&i(t,e,r[s]);return o(t,e),t}),c=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.gcpResidencyCache=r.METADATA_SERVER_DETECTION=r.HEADERS=r.HEADER_VALUE=r.HEADER_NAME=r.SECONDARY_HOST_ADDRESS=r.HOST_ADDRESS=r.BASE_PATH=void 0,r.instance=function(e){return g("instance",e)},r.project=function(e){return g("project",e)},r.universe=function(e){return g("universe",e)},r.bulk=m,r.isAvailable=w,r.resetIsAvailableCache=function(){s=void 0},r.getGCPResidency=_,r.setGCPResidency=b,r.requestTimeout=A;let l=e.r(57612),u=e.r(1158),h=e.r(29077),d=a(e.r(47637));r.BASE_PATH="/computeMetadata/v1",r.HOST_ADDRESS="http://169.254.169.254",r.SECONDARY_HOST_ADDRESS="http://metadata.google.internal.",r.HEADER_NAME="Metadata-Flavor",r.HEADER_VALUE="Google",r.HEADERS=Object.freeze({[r.HEADER_NAME]:r.HEADER_VALUE});let f=d.log("gcp-metadata");function p(e){return e||(e=process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST||r.HOST_ADDRESS),/^https?:\/\//.test(e)||(e=`http://${e}`),new URL(r.BASE_PATH,e).href}async function g(e,t={},s=3,n=!1){let i=new Headers(r.HEADERS),o="",a={};("object"==typeof e?(new Headers(e.headers).forEach((e,t)=>i.set(t,e)),o=e.metadataKey,a=e.params||a,s=e.noResponseRetries||s,n=e.fastFail||n):o=e,"string"==typeof t)?o+=`/${t}`:(Object.keys(t).forEach(e=>{switch(e){case"params":case"property":case"headers":break;case"qs":throw Error("'qs' is not a valid configuration option. Please use 'params' instead.");default:throw Error(`'${e}' is not a valid configuration option.`)}}),t.property&&(o+=`/${t.property}`),new Headers(t.headers).forEach((e,t)=>i.set(t,e)),a=t.params||a);let c=n?y:l.request,h={url:`${p()}/${o}`,headers:i,retryConfig:{noResponseRetries:s},params:a,responseType:"text",timeout:A()};f.info("instance request %j",h);let d=await c(h);f.info("instance metadata is %s",d.data);let m=d.headers.get(r.HEADER_NAME);if(m!==r.HEADER_VALUE)throw RangeError(`Invalid response from metadata service: incorrect ${r.HEADER_NAME} header. Expected '${r.HEADER_VALUE}', got ${m?`'${m}'`:"no header"}`);if("string"==typeof d.data)try{return u.parse(d.data)}catch{}return d.data}async function y(e){let t={...e,url:e.url?.toString().replace(p(),p(r.SECONDARY_HOST_ADDRESS))};return Promise.any([(0,l.request)(e),(0,l.request)(t)])}async function m(e){let t={};return await Promise.all(e.map(e=>(async()=>{let r=await g(e);t[e.metadataKey]=r})())),t}async function w(){if(process.env.METADATA_SERVER_DETECTION){let e=process.env.METADATA_SERVER_DETECTION.trim().toLocaleLowerCase();if(!(e in r.METADATA_SERVER_DETECTION))throw RangeError(`Unknown \`METADATA_SERVER_DETECTION\` env variable. Got \`${e}\`, but it should be \`${Object.keys(r.METADATA_SERVER_DETECTION).join("`, `")}\`, or unset`);switch(e){case"assume-present":return!0;case"none":return!1;case"bios-only":return _()}}try{return void 0===s&&(s=g("instance",void 0,process.env.DETECT_GCP_RETRIES?Number(process.env.DETECT_GCP_RETRIES):0,!(process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST))),await s,!0}catch(e){if(process.env.DEBUG_AUTH&&console.info(e),"request-timeout"===e.type||e.response&&404===e.response.status)return!1;if(!(e.response&&404===e.response.status)&&(!e.code||!["EHOSTDOWN","EHOSTUNREACH","ENETUNREACH","ENOENT","ENOTFOUND","ECONNREFUSED"].includes(e.code.toString()))){let t="UNKNOWN";e.code&&(t=e.code.toString()),process.emitWarning(`received unexpected error = ${e.message} code = ${t}`,"MetadataLookupWarning")}return!1}}function _(){return null===r.gcpResidencyCache&&b(),r.gcpResidencyCache}function b(e=null){r.gcpResidencyCache=null!==e?e:(0,h.detectGCPResidency)()}function A(){return 3e3*!_()}r.METADATA_SERVER_DETECTION=Object.freeze({"assume-present":"don't try to ping the metadata server, but assume it's present",none:"don't try to ping the metadata server, but don't try to use it either","bios-only":"treat the result of a BIOS probe as canonical (don't fall back to pinging)","ping-only":"skip the BIOS probe, and go straight to pinging"}),r.gcpResidencyCache=null,c(e.r(29077),r)},6920,(e,t,r)=>{"use strict";r.byteLength=function(e){var t=l(e),r=t[0],s=t[1];return(r+s)*3/4-s},r.toByteArray=function(e){var t,r,s=l(e),o=s[0],a=s[1],c=new i((o+a)*3/4-a),u=0,h=a>0?o-4:o;for(r=0;r<h;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;return 2===a&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,c[u++]=255&t),1===a&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t),c},r.fromByteArray=function(e){for(var t,r=e.length,n=r%3,i=[],o=0,a=r-n;o<a;o+=16383)i.push(function(e,t,r){for(var n,i=[],o=t;o<r;o+=3)n=(e[o]<<16&0xff0000)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(s[n>>18&63]+s[n>>12&63]+s[n>>6&63]+s[63&n]);return i.join("")}(e,o,o+16383>a?a:o+16383));return 1===n?i.push(s[(t=e[r-1])>>2]+s[t<<4&63]+"=="):2===n&&i.push(s[(t=(e[r-2]<<8)+e[r-1])>>10]+s[t>>4&63]+s[t<<2&63]+"="),i.join("")};for(var s=[],n=[],i="u">typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=o.length;a<c;++a)s[a]=o[a],n[o.charCodeAt(a)]=a;function l(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var s=r===t?0:4-r%4;return[r,s]}n[45]=62,n[95]=63},46902,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.fromArrayBufferToHex=function(e){return Array.from(new Uint8Array(e)).map(e=>e.toString(16).padStart(2,"0")).join("")}},69216,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BrowserCrypto=void 0;let s=e.r(6920),n=e.r(46902);class i{constructor(){throw Error("SubtleCrypto not found. Make sure it's an https:// website.")}async sha256DigestBase64(e){let t=new TextEncoder().encode(e),r=await window.crypto.subtle.digest("SHA-256",t);return s.fromByteArray(new Uint8Array(r))}randomBytesBase64(e){let t=new Uint8Array(e);return window.crypto.getRandomValues(t),s.fromByteArray(t)}static padBase64(e){for(;e.length%4!=0;)e+="=";return e}async verify(e,t,r){let n={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},o=new TextEncoder().encode(t),a=s.toByteArray(i.padBase64(r)),c=await window.crypto.subtle.importKey("jwk",e,n,!0,["verify"]);return await window.crypto.subtle.verify(n,c,a,o)}async sign(e,t){let r={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},n=new TextEncoder().encode(t),i=await window.crypto.subtle.importKey("jwk",e,r,!0,["sign"]),o=await window.crypto.subtle.sign(r,i,n);return s.fromByteArray(new Uint8Array(o))}decodeBase64StringUtf8(e){let t=s.toByteArray(i.padBase64(e));return new TextDecoder().decode(t)}encodeBase64StringUtf8(e){let t=new TextEncoder().encode(e);return s.fromByteArray(t)}async sha256DigestHex(e){let t=new TextEncoder().encode(e),r=await window.crypto.subtle.digest("SHA-256",t);return(0,n.fromArrayBufferToHex)(r)}async signWithHmacSha256(e,t){let r="string"==typeof e?e:String.fromCharCode(...new Uint16Array(e)),s=new TextEncoder,n=await window.crypto.subtle.importKey("raw",s.encode(r),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return window.crypto.subtle.sign("HMAC",n,s.encode(t))}}r.BrowserCrypto=i},21962,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.NodeCrypto=void 0;let s=e.r(54799);r.NodeCrypto=class{async sha256DigestBase64(e){return s.createHash("sha256").update(e).digest("base64")}randomBytesBase64(e){return s.randomBytes(e).toString("base64")}async verify(e,t,r){let n=s.createVerify("RSA-SHA256");return n.update(t),n.end(),n.verify(e,r,"base64")}async sign(e,t){let r=s.createSign("RSA-SHA256");return r.update(t),r.end(),r.sign(e,"base64")}decodeBase64StringUtf8(e){return Buffer.from(e,"base64").toString("utf-8")}encodeBase64StringUtf8(e){return Buffer.from(e,"utf-8").toString("base64")}async sha256DigestHex(e){return s.createHash("sha256").update(e).digest("hex")}async signWithHmacSha256(e,t){var r,n;let i="string"==typeof e?e:(r=e,Buffer.from(r));return(n=s.createHmac("sha256",i).update(t).digest()).buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)}}},1426,(e,t,r)=>{"use strict";var s=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),n=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.createCrypto=function(){return function(){;}(),new i.NodeCrypto},r.hasBrowserCrypto=o,e.r(69216);let i=e.r(21962);function o(){return!1}n(e.r(46902),r)},23469,(e,t,r)=>{var s=e.r(874),n=s.Buffer;function i(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return n(e,t,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=s:(i(s,r),r.Buffer=o),o.prototype=Object.create(n.prototype),i(n,o),o.from=function(e,t,r){if("number"==typeof e)throw TypeError("Argument must not be a number");return n(e,t,r)},o.alloc=function(e,t,r){if("number"!=typeof e)throw TypeError("Argument must be a number");var s=n(e);return void 0!==t?"string"==typeof r?s.fill(t,r):s.fill(t):s.fill(0),s},o.allocUnsafe=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return n(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return s.SlowBuffer(e)}},65880,(e,t,r)=>{"use strict";function s(e){return(e/8|0)+ +(e%8!=0)}var n={ES256:s(256),ES384:s(384),ES512:s(521)};t.exports=function(e){var t=n[e];if(t)return t;throw Error('Unknown algorithm "'+e+'"')}},32955,(e,t,r)=>{"use strict";var s=e.r(23469).Buffer,n=e.r(65880);function i(e){if(s.isBuffer(e))return e;if("string"==typeof e)return s.from(e,"base64");throw TypeError("ECDSA signature must be a Base64 string or a Buffer")}function o(e,t,r){for(var s=0;t+s<r&&0===e[t+s];)++s;return e[t+s]>=128&&--s,s}t.exports={derToJose:function(e,t){e=i(e);var r=n(t),o=r+1,a=e.length,c=0;if(48!==e[c++])throw Error('Could not find expected "seq"');var l=e[c++];if(129===l&&(l=e[c++]),a-c<l)throw Error('"seq" specified length of "'+l+'", only "'+(a-c)+'" remaining');if(2!==e[c++])throw Error('Could not find expected "int" for "r"');var u=e[c++];if(a-c-2<u)throw Error('"r" specified length of "'+u+'", only "'+(a-c-2)+'" available');if(o<u)throw Error('"r" specified length of "'+u+'", max of "'+o+'" is acceptable');var h=c;if(c+=u,2!==e[c++])throw Error('Could not find expected "int" for "s"');var d=e[c++];if(a-c!==d)throw Error('"s" specified length of "'+d+'", expected "'+(a-c)+'"');if(o<d)throw Error('"s" specified length of "'+d+'", max of "'+o+'" is acceptable');var f=c;if((c+=d)!==a)throw Error('Expected to consume entire buffer, but "'+(a-c)+'" bytes remain');var p=r-u,g=r-d,y=s.allocUnsafe(p+u+g+d);for(c=0;c<p;++c)y[c]=0;e.copy(y,c,h+Math.max(-p,0),h+u),c=r;for(var m=c;c<m+g;++c)y[c]=0;return e.copy(y,c,f+Math.max(-g,0),f+d),y=(y=y.toString("base64")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},joseToDer:function(e,t){e=i(e);var r=n(t),a=e.length;if(a!==2*r)throw TypeError('"'+t+'" signatures must be "'+2*r+'" bytes, saw "'+a+'"');var c=o(e,0,r),l=o(e,r,e.length),u=r-c,h=r-l,d=2+u+1+1+h,f=d<128,p=s.allocUnsafe((f?2:3)+d),g=0;return p[g++]=48,f?p[g++]=d:(p[g++]=129,p[g++]=255&d),p[g++]=2,p[g++]=u,c<0?(p[g++]=0,g+=e.copy(p,g,0,r)):g+=e.copy(p,g,c,r),p[g++]=2,p[g++]=h,l<0?(p[g++]=0,e.copy(p,g,r)):e.copy(p,g,r+l),p}}},15733,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.LRUCache=void 0,r.snakeToCamel=a,r.originalOrCamelOptions=function(e){return{get:function(t){let r=e||{};return r[t]??r[a(t)]}}},r.removeUndefinedValuesInObject=function(e){return Object.entries(e).forEach(([t,r])=>{(void 0===r||"undefined"===r)&&delete e[t]}),e},r.isValidFile=l,r.getWellKnownCertificateConfigFileLocation=function(){let e=process.env.CLOUDSDK_CONFIG||(n.platform().startsWith("win")?i.join(process.env.APPDATA||"",o):i.join(process.env.HOME||"",".config",o));return i.join(e,"certificate_config.json")};let s=e.r(22734),n=e.r(46786),i=e.r(14747),o="gcloud";function a(e){return e.replace(/([_][^_])/g,e=>e.slice(1).toUpperCase())}class c{capacity;#l=new Map;maxAge;constructor(e){this.capacity=e.capacity,this.maxAge=e.maxAge}#u(e,t){this.#l.delete(e),this.#l.set(e,{value:t,lastAccessed:Date.now()})}set(e,t){this.#u(e,t),this.#h()}get(e){let t=this.#l.get(e);if(t)return this.#u(e,t.value),this.#h(),t.value}#h(){let e=this.maxAge?Date.now()-this.maxAge:0,t=this.#l.entries().next();for(;!t.done&&(this.#l.size>this.capacity||t.value[1].lastAccessed<e);)this.#l.delete(t.value[0]),t=this.#l.entries().next()}}async function l(e){try{return(await s.promises.lstat(e)).isFile()}catch(e){return!1}}r.LRUCache=c},91829,e=>{e.v({name:"google-auth-library",version:"10.5.0",author:"Google Inc.",description:"Google APIs Authentication Client Library for Node.js",engines:{node:">=18"},main:"./build/src/index.js",types:"./build/src/index.d.ts",repository:"googleapis/google-auth-library-nodejs.git",keywords:["google","api","google apis","client","client library"],dependencies:{"base64-js":"^1.3.0","ecdsa-sig-formatter":"^1.0.11",gaxios:"^7.0.0","gcp-metadata":"^8.0.0","google-logging-utils":"^1.0.0",gtoken:"^8.0.0",jws:"^4.0.0"},devDependencies:{"@types/base64-js":"^1.2.5","@types/jws":"^3.1.0","@types/mocha":"^10.0.10","@types/mv":"^2.1.0","@types/ncp":"^2.0.1","@types/node":"^22.0.0","@types/sinon":"^17.0.0","assert-rejects":"^1.0.0",c8:"^10.0.0",codecov:"^3.0.2",gts:"^6.0.0","is-docker":"^3.0.0",jsdoc:"^4.0.0","jsdoc-fresh":"^5.0.0","jsdoc-region-tag":"^4.0.0",karma:"^6.0.0","karma-chrome-launcher":"^3.0.0","karma-coverage":"^2.0.0","karma-firefox-launcher":"^2.0.0","karma-mocha":"^2.0.0","karma-sourcemap-loader":"^0.4.0","karma-webpack":"^5.0.1",keypair:"^1.0.4",mocha:"^11.1.0",mv:"^2.1.1",ncp:"^2.0.0",nock:"^14.0.5","null-loader":"^4.0.0",puppeteer:"^24.0.0",sinon:"^21.0.0","ts-loader":"^8.0.0",typescript:"5.8.2",webpack:"^5.21.2","webpack-cli":"^4.0.0"},files:["build/src","!build/src/**/*.map"],scripts:{test:"c8 mocha build/test",clean:"gts clean",prepare:"npm run compile",lint:"gts check --no-inline-config",compile:"tsc -p .",fix:"gts fix",pretest:"npm run compile -- --sourceMap",docs:"jsdoc -c .jsdoc.js","samples-setup":"cd samples/ && npm link ../ && npm run setup && cd ../","samples-test":"cd samples/ && npm link ../ && npm test && cd ../","system-test":"mocha build/system-test --timeout 60000","presystem-test":"npm run compile -- --sourceMap",webpack:"webpack","browser-test":"karma start","docs-test":"echo 'disabled until linkinator is fixed'","predocs-test":"npm run docs",prelint:"cd samples; npm link ../; npm install"},license:"Apache-2.0"})},93714,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.USER_AGENT=r.PRODUCT_NAME=r.pkg=void 0;let s=e.r(91829);r.pkg=s;let n="google-api-nodejs-client";r.PRODUCT_NAME=n,r.USER_AGENT=`${n}/${s.version}`},11656,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AuthClient=r.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS=r.DEFAULT_UNIVERSE=void 0;let s=e.r(27699),n=e.r(57612),i=e.r(15733),o=e.r(47637),a=e.r(93714);r.DEFAULT_UNIVERSE="googleapis.com",r.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS=3e5;class c extends s.EventEmitter{apiKey;projectId;quotaProjectId;transporter;credentials={};eagerRefreshThresholdMillis=r.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS;forceRefreshOnFailure=!1;universeDomain=r.DEFAULT_UNIVERSE;static RequestMethodNameSymbol=Symbol("request method name");static RequestLogIdSymbol=Symbol("request log id");constructor(e={}){super();const t=(0,i.originalOrCamelOptions)(e);this.apiKey=e.apiKey,this.projectId=t.get("project_id")??null,this.quotaProjectId=t.get("quota_project_id"),this.credentials=t.get("credentials")??{},this.universeDomain=t.get("universe_domain")??r.DEFAULT_UNIVERSE,this.transporter=e.transporter??new n.Gaxios(e.transporterOptions),!1!==t.get("useAuthRequestParameters")&&(this.transporter.interceptors.request.add(c.DEFAULT_REQUEST_INTERCEPTOR),this.transporter.interceptors.response.add(c.DEFAULT_RESPONSE_INTERCEPTOR)),e.eagerRefreshThresholdMillis&&(this.eagerRefreshThresholdMillis=e.eagerRefreshThresholdMillis),this.forceRefreshOnFailure=e.forceRefreshOnFailure??!1}fetch(...e){let t,r=e[0],s=e[1],i=new Headers;return("string"==typeof r?t=new URL(r):r instanceof URL?t=r:r&&r.url&&(t=new URL(r.url)),r&&"object"==typeof r&&"headers"in r&&n.Gaxios.mergeHeaders(i,r.headers),s&&n.Gaxios.mergeHeaders(i,new Headers(s.headers)),"object"!=typeof r||r instanceof URL)?this.request({...s,headers:i,url:t}):this.request({...s,...r,headers:i,url:t})}setCredentials(e){this.credentials=e}addSharedMetadataHeaders(e){return!e.has("x-goog-user-project")&&this.quotaProjectId&&e.set("x-goog-user-project",this.quotaProjectId),e}addUserProjectAndAuthHeaders(e,t){let r=t.get("x-goog-user-project"),s=t.get("authorization");return r&&e.set("x-goog-user-project",r),s&&e.set("authorization",s),e}static log=(0,o.log)("auth");static DEFAULT_REQUEST_INTERCEPTOR={resolved:async e=>{if(!e.headers.has("x-goog-api-client")){let t=process.version.replace(/^v/,"");e.headers.set("x-goog-api-client",`gl-node/${t}`)}let t=e.headers.get("User-Agent");t?t.includes(`${a.PRODUCT_NAME}/`)||e.headers.set("User-Agent",`${t} ${a.USER_AGENT}`):e.headers.set("User-Agent",a.USER_AGENT);try{let t=e[c.RequestMethodNameSymbol],r=`${Math.floor(1e3*Math.random())}`;e[c.RequestLogIdSymbol]=r;let s={url:e.url,headers:e.headers};t?c.log.info("%s [%s] request %j",t,r,s):c.log.info("[%s] request %j",r,s)}catch(e){}return e}};static DEFAULT_RESPONSE_INTERCEPTOR={resolved:async e=>{try{let t=e.config,r=t[c.RequestMethodNameSymbol],s=t[c.RequestLogIdSymbol];r?c.log.info("%s [%s] response %j",r,s,e.data):c.log.info("[%s] response %j",s,e.data)}catch(e){}return e},rejected:async e=>{try{let t=e.config,r=t[c.RequestMethodNameSymbol],s=t[c.RequestLogIdSymbol];r?c.log.info("%s [%s] error %j",r,s,e.response?.data):c.log.error("[%s] error %j",s,e.response?.data)}catch(e){}throw e}};static setMethodName(e,t){try{e[c.RequestMethodNameSymbol]=t}catch(e){}}static get RETRY_CONFIG(){return{retry:!0,retryConfig:{httpMethodsToRetry:["GET","PUT","POST","HEAD","OPTIONS","DELETE"]}}}}r.AuthClient=c},42602,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.LoginTicket=void 0,r.LoginTicket=class{envelope;payload;constructor(e,t){this.envelope=e,this.payload=t}getEnvelope(){return this.envelope}getPayload(){return this.payload}getUserId(){let e=this.getPayload();return e&&e.sub?e.sub:null}getAttributes(){return{envelope:this.getEnvelope(),payload:this.getPayload()}}}},701,(e,t,r)=>{"use strict";var s,n,i,o,a,c;Object.defineProperty(r,"__esModule",{value:!0}),r.OAuth2Client=r.ClientAuthentication=r.CertificateFormat=r.CodeChallengeMethod=void 0;let l=e.r(57612),u=e.r(45706),h=e.r(88947),d=e.r(32955),f=e.r(15733),p=e.r(1426),g=e.r(11656),y=e.r(42602);(o=s||(r.CodeChallengeMethod=s={})).Plain="plain",o.S256="S256",(a=n||(r.CertificateFormat=n={})).PEM="PEM",a.JWK="JWK",(c=i||(r.ClientAuthentication=i={})).ClientSecretPost="ClientSecretPost",c.ClientSecretBasic="ClientSecretBasic",c.None="None";class m extends g.AuthClient{redirectUri;certificateCache={};certificateExpiry=null;certificateCacheFormat=n.PEM;refreshTokenPromises=new Map;endpoints;issuers;clientAuthentication;_clientId;_clientSecret;refreshHandler;constructor(e={},t,r){super("object"==typeof e?e:{}),"object"!=typeof e&&(e={clientId:e,clientSecret:t,redirectUri:r}),this._clientId=e.clientId||e.client_id,this._clientSecret=e.clientSecret||e.client_secret,this.redirectUri=e.redirectUri||e.redirect_uris?.[0],this.endpoints={tokenInfoUrl:"https://oauth2.googleapis.com/tokeninfo",oauth2AuthBaseUrl:"https://accounts.google.com/o/oauth2/v2/auth",oauth2TokenUrl:"https://oauth2.googleapis.com/token",oauth2RevokeUrl:"https://oauth2.googleapis.com/revoke",oauth2FederatedSignonPemCertsUrl:"https://www.googleapis.com/oauth2/v1/certs",oauth2FederatedSignonJwkCertsUrl:"https://www.googleapis.com/oauth2/v3/certs",oauth2IapPublicKeyUrl:"https://www.gstatic.com/iap/verify/public_key",...e.endpoints},this.clientAuthentication=e.clientAuthentication||i.ClientSecretPost,this.issuers=e.issuers||["accounts.google.com","https://accounts.google.com",this.universeDomain]}static GOOGLE_TOKEN_INFO_URL="https://oauth2.googleapis.com/tokeninfo";static CLOCK_SKEW_SECS_=300;static DEFAULT_MAX_TOKEN_LIFETIME_SECS_=86400;generateAuthUrl(e={}){if(e.code_challenge_method&&!e.code_challenge)throw Error("If a code_challenge_method is provided, code_challenge must be included.");return e.response_type=e.response_type||"code",e.client_id=e.client_id||this._clientId,e.redirect_uri=e.redirect_uri||this.redirectUri,Array.isArray(e.scope)&&(e.scope=e.scope.join(" ")),this.endpoints.oauth2AuthBaseUrl.toString()+"?"+u.stringify(e)}generateCodeVerifier(){throw Error("generateCodeVerifier is removed, please use generateCodeVerifierAsync instead.")}async generateCodeVerifierAsync(){let e=(0,p.createCrypto)(),t=e.randomBytesBase64(96).replace(/\+/g,"~").replace(/=/g,"_").replace(/\//g,"-"),r=(await e.sha256DigestBase64(t)).split("=")[0].replace(/\+/g,"-").replace(/\//g,"_");return{codeVerifier:t,codeChallenge:r}}getToken(e,t){let r="string"==typeof e?{code:e}:e;if(!t)return this.getTokenAsync(r);this.getTokenAsync(r).then(e=>t(null,e.tokens,e.res),e=>t(e,null,e.response))}async getTokenAsync(e){let t=this.endpoints.oauth2TokenUrl.toString(),r=new Headers,s={client_id:e.client_id||this._clientId,code_verifier:e.codeVerifier,code:e.code,grant_type:"authorization_code",redirect_uri:e.redirect_uri||this.redirectUri};if(this.clientAuthentication===i.ClientSecretBasic){let e=Buffer.from(`${this._clientId}:${this._clientSecret}`);r.set("authorization",`Basic ${e.toString("base64")}`)}this.clientAuthentication===i.ClientSecretPost&&(s.client_secret=this._clientSecret);let n={...m.RETRY_CONFIG,method:"POST",url:t,data:new URLSearchParams((0,f.removeUndefinedValuesInObject)(s)),headers:r};g.AuthClient.setMethodName(n,"getTokenAsync");let o=await this.transporter.request(n),a=o.data;return o.data&&o.data.expires_in&&(a.expiry_date=new Date().getTime()+1e3*o.data.expires_in,delete a.expires_in),this.emit("tokens",a),{tokens:a,res:o}}async refreshToken(e){if(!e)return this.refreshTokenNoCache(e);if(this.refreshTokenPromises.has(e))return this.refreshTokenPromises.get(e);let t=this.refreshTokenNoCache(e).then(t=>(this.refreshTokenPromises.delete(e),t),t=>{throw this.refreshTokenPromises.delete(e),t});return this.refreshTokenPromises.set(e,t),t}async refreshTokenNoCache(e){let t;if(!e)throw Error("No refresh token is set.");let r=this.endpoints.oauth2TokenUrl.toString(),s={refresh_token:e,client_id:this._clientId,client_secret:this._clientSecret,grant_type:"refresh_token"};try{let e={...m.RETRY_CONFIG,method:"POST",url:r,data:new URLSearchParams((0,f.removeUndefinedValuesInObject)(s))};g.AuthClient.setMethodName(e,"refreshTokenNoCache"),t=await this.transporter.request(e)}catch(e){throw e instanceof l.GaxiosError&&"invalid_grant"===e.message&&e.response?.data&&/ReAuth/i.test(e.response.data.error_description)&&(e.message=JSON.stringify(e.response.data)),e}let n=t.data;return t.data&&t.data.expires_in&&(n.expiry_date=new Date().getTime()+1e3*t.data.expires_in,delete n.expires_in),this.emit("tokens",n),{tokens:n,res:t}}refreshAccessToken(e){if(!e)return this.refreshAccessTokenAsync();this.refreshAccessTokenAsync().then(t=>e(null,t.credentials,t.res),e)}async refreshAccessTokenAsync(){let e=await this.refreshToken(this.credentials.refresh_token),t=e.tokens;return t.refresh_token=this.credentials.refresh_token,this.credentials=t,{credentials:this.credentials,res:e.res}}getAccessToken(e){if(!e)return this.getAccessTokenAsync();this.getAccessTokenAsync().then(t=>e(null,t.token,t.res),e)}async getAccessTokenAsync(){if(!(!this.credentials.access_token||this.isTokenExpiring()))return{token:this.credentials.access_token};{if(!this.credentials.refresh_token)if(this.refreshHandler){let e=await this.processAndValidateRefreshHandler();if(e?.access_token)return this.setCredentials(e),{token:this.credentials.access_token}}else throw Error("No refresh token or refresh handler callback is set.");let e=await this.refreshAccessTokenAsync();if(!e.credentials||e.credentials&&!e.credentials.access_token)throw Error("Could not refresh access token.");return{token:e.credentials.access_token,res:e.res}}}async getRequestHeaders(e){return(await this.getRequestMetadataAsync(e)).headers}async getRequestMetadataAsync(e){let t=this.credentials;if(!t.access_token&&!t.refresh_token&&!this.apiKey&&!this.refreshHandler)throw Error("No access, refresh token, API key or refresh handler callback is set.");if(t.access_token&&!this.isTokenExpiring()){t.token_type=t.token_type||"Bearer";let e=new Headers({authorization:t.token_type+" "+t.access_token});return{headers:this.addSharedMetadataHeaders(e)}}if(this.refreshHandler){let e=await this.processAndValidateRefreshHandler();if(e?.access_token){this.setCredentials(e);let t=new Headers({authorization:"Bearer "+this.credentials.access_token});return{headers:this.addSharedMetadataHeaders(t)}}}if(this.apiKey)return{headers:new Headers({"X-Goog-Api-Key":this.apiKey})};let r=null,s=null;try{s=(r=await this.refreshToken(t.refresh_token)).tokens}catch(e){throw e.response&&(403===e.response.status||404===e.response.status)&&(e.message=`Could not refresh access token: ${e.message}`),e}let n=this.credentials;n.token_type=n.token_type||"Bearer",s.refresh_token=n.refresh_token,this.credentials=s;let i=new Headers({authorization:n.token_type+" "+s.access_token});return{headers:this.addSharedMetadataHeaders(i),res:r.res}}static getRevokeTokenUrl(e){return new m().getRevokeTokenURL(e).toString()}getRevokeTokenURL(e){let t=new URL(this.endpoints.oauth2RevokeUrl);return t.searchParams.append("token",e),t}revokeToken(e,t){let r={...m.RETRY_CONFIG,url:this.getRevokeTokenURL(e).toString(),method:"POST"};if(g.AuthClient.setMethodName(r,"revokeToken"),!t)return this.transporter.request(r);this.transporter.request(r).then(e=>t(null,e),t)}revokeCredentials(e){if(!e)return this.revokeCredentialsAsync();this.revokeCredentialsAsync().then(t=>e(null,t),e)}async revokeCredentialsAsync(){let e=this.credentials.access_token;if(this.credentials={},e)return this.revokeToken(e);throw Error("No access token to revoke.")}request(e,t){if(!t)return this.requestAsync(e);this.requestAsync(e).then(e=>t(null,e),e=>t(e,e.response))}async requestAsync(e,t=!1){try{let t=await this.getRequestMetadataAsync();return e.headers=l.Gaxios.mergeHeaders(e.headers),this.addUserProjectAndAuthHeaders(e.headers,t.headers),this.apiKey&&e.headers.set("X-Goog-Api-Key",this.apiKey),await this.transporter.request(e)}catch(s){let r=s.response;if(r){let s=r.status,n=this.credentials&&this.credentials.access_token&&this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure),i=this.credentials&&this.credentials.access_token&&!this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure)&&this.refreshHandler,o=r.config.data instanceof h.Readable,a=401===s||403===s;if(!t&&a&&!o&&n)return await this.refreshAccessTokenAsync(),this.requestAsync(e,!0);if(!t&&a&&!o&&i){let t=await this.processAndValidateRefreshHandler();return t?.access_token&&this.setCredentials(t),this.requestAsync(e,!0)}}throw s}}verifyIdToken(e,t){if(t&&"function"!=typeof t)throw Error("This method accepts an options object as the first parameter, which includes the idToken, audience, and maxExpiry.");if(!t)return this.verifyIdTokenAsync(e);this.verifyIdTokenAsync(e).then(e=>t(null,e),t)}async verifyIdTokenAsync(e){if(!e.idToken)throw Error("The verifyIdToken method requires an ID Token");let t=await this.getFederatedSignonCertsAsync();return await this.verifySignedJwtWithCertsAsync(e.idToken,t.certs,e.audience,this.issuers,e.maxExpiry)}async getTokenInfo(e){let{data:t}=await this.transporter.request({...m.RETRY_CONFIG,method:"POST",headers:{"content-type":"application/x-www-form-urlencoded;charset=UTF-8",authorization:`Bearer ${e}`},url:this.endpoints.tokenInfoUrl.toString()}),r=Object.assign({expiry_date:new Date().getTime()+1e3*t.expires_in,scopes:t.scope.split(" ")},t);return delete r.expires_in,delete r.scope,r}getFederatedSignonCerts(e){if(!e)return this.getFederatedSignonCertsAsync();this.getFederatedSignonCertsAsync().then(t=>e(null,t.certs,t.res),e)}async getFederatedSignonCertsAsync(){let e,t,r=new Date().getTime(),s=(0,p.hasBrowserCrypto)()?n.JWK:n.PEM;if(this.certificateExpiry&&r<this.certificateExpiry.getTime()&&this.certificateCacheFormat===s)return{certs:this.certificateCache,format:s};switch(s){case n.PEM:t=this.endpoints.oauth2FederatedSignonPemCertsUrl.toString();break;case n.JWK:t=this.endpoints.oauth2FederatedSignonJwkCertsUrl.toString();break;default:throw Error(`Unsupported certificate format ${s}`)}try{let r={...m.RETRY_CONFIG,url:t};g.AuthClient.setMethodName(r,"getFederatedSignonCertsAsync"),e=await this.transporter.request(r)}catch(e){throw e instanceof Error&&(e.message=`Failed to retrieve verification certificates: ${e.message}`),e}let i=e?.headers.get("cache-control"),o=-1;if(i){let e=/max-age=(?<maxAge>[0-9]+)/.exec(i)?.groups?.maxAge;e&&(o=1e3*Number(e))}let a={};switch(s){case n.PEM:a=e.data;break;case n.JWK:for(let t of e.data.keys)a[t.kid]=t;break;default:throw Error(`Unsupported certificate format ${s}`)}let c=new Date;return this.certificateExpiry=-1===o?null:new Date(c.getTime()+o),this.certificateCache=a,this.certificateCacheFormat=s,{certs:a,format:s,res:e}}getIapPublicKeys(e){if(!e)return this.getIapPublicKeysAsync();this.getIapPublicKeysAsync().then(t=>e(null,t.pubkeys,t.res),e)}async getIapPublicKeysAsync(){let e,t=this.endpoints.oauth2IapPublicKeyUrl.toString();try{let r={...m.RETRY_CONFIG,url:t};g.AuthClient.setMethodName(r,"getIapPublicKeysAsync"),e=await this.transporter.request(r)}catch(e){throw e instanceof Error&&(e.message=`Failed to retrieve verification certificates: ${e.message}`),e}return{pubkeys:e.data,res:e}}verifySignedJwtWithCerts(){throw Error("verifySignedJwtWithCerts is removed, please use verifySignedJwtWithCertsAsync instead.")}async verifySignedJwtWithCertsAsync(e,t,r,s,n){let i,o,a=(0,p.createCrypto)();n||(n=m.DEFAULT_MAX_TOKEN_LIFETIME_SECS_);let c=e.split(".");if(3!==c.length)throw Error("Wrong number of segments in token: "+e);let l=c[0]+"."+c[1],u=c[2];try{i=JSON.parse(a.decodeBase64StringUtf8(c[0]))}catch(e){throw e instanceof Error&&(e.message=`Can't parse token envelope: ${c[0]}': ${e.message}`),e}if(!i)throw Error("Can't parse token envelope: "+c[0]);try{o=JSON.parse(a.decodeBase64StringUtf8(c[1]))}catch(e){throw e instanceof Error&&(e.message=`Can't parse token payload '${c[0]}`),e}if(!o)throw Error("Can't parse token payload: "+c[1]);if(!Object.prototype.hasOwnProperty.call(t,i.kid))throw Error("No pem found for envelope: "+JSON.stringify(i));let h=t[i.kid];if("ES256"===i.alg&&(u=d.joseToDer(u,"ES256").toString("base64")),!await a.verify(h,l,u))throw Error("Invalid token signature: "+e);if(!o.iat)throw Error("No issue time in token: "+JSON.stringify(o));if(!o.exp)throw Error("No expiration time in token: "+JSON.stringify(o));let f=Number(o.iat);if(isNaN(f))throw Error("iat field using invalid format");let g=Number(o.exp);if(isNaN(g))throw Error("exp field using invalid format");let w=new Date().getTime()/1e3;if(g>=w+n)throw Error("Expiration time too far in future: "+JSON.stringify(o));let _=f-m.CLOCK_SKEW_SECS_,b=g+m.CLOCK_SKEW_SECS_;if(w<_)throw Error("Token used too early, "+w+" < "+_+": "+JSON.stringify(o));if(w>b)throw Error("Token used too late, "+w+" > "+b+": "+JSON.stringify(o));if(s&&0>s.indexOf(o.iss))throw Error("Invalid issuer, expected one of ["+s+"], but got "+o.iss);if(null!=r){let e=o.aud;if(!(r.constructor===Array?r.indexOf(e)>-1:e===r))throw Error("Wrong recipient, payload audience != requiredAudience")}return new y.LoginTicket(i,o)}async processAndValidateRefreshHandler(){if(this.refreshHandler){let e=await this.refreshHandler();if(!e.access_token)throw Error("No access token is returned by the refreshHandler callback.");return e}}isTokenExpiring(){let e=this.credentials.expiry_date;return!!e&&e<=new Date().getTime()+this.eagerRefreshThresholdMillis}}r.OAuth2Client=m},70814,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Compute=void 0;let s=e.r(57612),n=e.r(82e3),i=e.r(701);class o extends i.OAuth2Client{serviceAccountEmail;scopes;constructor(e={}){super(e),this.credentials={expiry_date:1,refresh_token:"compute-placeholder"},this.serviceAccountEmail=e.serviceAccountEmail||"default",this.scopes=Array.isArray(e.scopes)?e.scopes:e.scopes?[e.scopes]:[]}async refreshTokenNoCache(){let e,t=`service-accounts/${this.serviceAccountEmail}/token`;try{let r={property:t};this.scopes.length>0&&(r.params={scopes:this.scopes.join(",")}),e=await n.instance(r)}catch(e){throw e instanceof s.GaxiosError&&(e.message=`Could not refresh access token: ${e.message}`,this.wrapError(e)),e}let r=e;return e&&e.expires_in&&(r.expiry_date=new Date().getTime()+1e3*e.expires_in,delete r.expires_in),this.emit("tokens",r),{tokens:r,res:null}}async fetchIdToken(e){let t,r=`service-accounts/${this.serviceAccountEmail}/identity?format=full&audience=${e}`;try{t=await n.instance({property:r})}catch(e){throw e instanceof Error&&(e.message=`Could not fetch ID token: ${e.message}`),e}return t}wrapError(e){let t=e.response;t&&t.status&&(e.status=t.status,403===t.status?e.message="A Forbidden error was returned while attempting to retrieve an access token for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have the correct permission scopes specified: "+e.message:404===t.status&&(e.message="A Not Found error was returned while attempting to retrieve an accesstoken for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have any permission scopes specified: "+e.message))}}r.Compute=o},80732,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.IdTokenClient=void 0;let s=e.r(701);class n extends s.OAuth2Client{targetAudience;idTokenProvider;constructor(e){super(e),this.targetAudience=e.targetAudience,this.idTokenProvider=e.idTokenProvider}async getRequestMetadataAsync(){if(!this.credentials.id_token||!this.credentials.expiry_date||this.isTokenExpiring()){let e=await this.idTokenProvider.fetchIdToken(this.targetAudience);this.credentials={id_token:e,expiry_date:this.getIdTokenExpiryDate(e)}}return{headers:new Headers({authorization:"Bearer "+this.credentials.id_token})}}getIdTokenExpiryDate(e){let t=e.split(".")[1];if(t)return 1e3*JSON.parse(Buffer.from(t,"base64").toString("ascii")).exp}}r.IdTokenClient=n},80243,(e,t,r)=>{"use strict";var s,n;let i;Object.defineProperty(r,"__esModule",{value:!0}),r.GCPEnv=void 0,r.clear=function(){i=void 0},r.getEnv=a;let o=e.r(82e3);async function a(){return i||(i=c())}async function c(){s.NONE;return process.env.GAE_SERVICE||process.env.GAE_MODULE_NAME?s.APP_ENGINE:process.env.FUNCTION_NAME||process.env.FUNCTION_TARGET?s.CLOUD_FUNCTIONS:await u()?await l()?s.KUBERNETES_ENGINE:process.env.K_CONFIGURATION?s.CLOUD_RUN:process.env.CLOUD_RUN_JOB?s.CLOUD_RUN_JOBS:s.COMPUTE_ENGINE:s.NONE}async function l(){try{return await o.instance("attributes/cluster-name"),!0}catch(e){return!1}}async function u(){return o.isAvailable()}(n=s||(r.GCPEnv=s={})).APP_ENGINE="APP_ENGINE",n.KUBERNETES_ENGINE="KUBERNETES_ENGINE",n.CLOUD_FUNCTIONS="CLOUD_FUNCTIONS",n.COMPUTE_ENGINE="COMPUTE_ENGINE",n.CLOUD_RUN="CLOUD_RUN",n.CLOUD_RUN_JOBS="CLOUD_RUN_JOBS",n.NONE="NONE"},41949,(e,t,r)=>{var s=e.r(23469).Buffer,n=e.r(88947);function i(e){if(this.buffer=null,this.writable=!0,this.readable=!0,!e)return this.buffer=s.alloc(0),this;if("function"==typeof e.pipe)return this.buffer=s.alloc(0),e.pipe(this),this;if(e.length||"object"==typeof e)return this.buffer=e,this.writable=!1,process.nextTick((function(){this.emit("end",e),this.readable=!1,this.emit("close")}).bind(this)),this;throw TypeError("Unexpected data type ("+typeof e+")")}e.r(24361).inherits(i,n),i.prototype.write=function(e){this.buffer=s.concat([this.buffer,s.from(e)]),this.emit("data",e)},i.prototype.end=function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1},t.exports=i},22691,(e,t,r)=>{"use strict";var s=e.r(874).Buffer,n=e.r(874).SlowBuffer;function i(e,t){if(!s.isBuffer(e)||!s.isBuffer(t)||e.length!==t.length)return!1;for(var r=0,n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r}t.exports=i,i.install=function(){s.prototype.equal=n.prototype.equal=function(e){return i(this,e)}};var o=s.prototype.equal,a=n.prototype.equal;i.restore=function(){s.prototype.equal=o,n.prototype.equal=a}},57067,(e,t,r)=>{var s,n=e.r(23469).Buffer,i=e.r(54799),o=e.r(32955),a=e.r(24361),c="secret must be a string or buffer",l="key must be a string or a buffer",u="function"==typeof i.createPublicKey;function h(e){if(!n.isBuffer(e)&&"string"!=typeof e&&(!u||"object"!=typeof e||"string"!=typeof e.type||"string"!=typeof e.asymmetricKeyType||"function"!=typeof e.export))throw g(l)}function d(e){if(!n.isBuffer(e)&&"string"!=typeof e&&"object"!=typeof e)throw g("key must be a string, a buffer or an object")}function f(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function p(e){var t=4-(e=e.toString()).length%4;if(4!==t)for(var r=0;r<t;++r)e+="=";return e.replace(/\-/g,"+").replace(/_/g,"/")}function g(e){var t=[].slice.call(arguments,1);return TypeError(a.format.bind(a,e).apply(null,t))}function y(e){var t;return t=e,n.isBuffer(t)||"string"==typeof t||(e=JSON.stringify(e)),e}function m(e){return function(t,r){!function(e){if(!n.isBuffer(e)){if("string"!=typeof e){if(!u||"object"!=typeof e||"secret"!==e.type||"function"!=typeof e.export)throw g(c)}}}(r),t=y(t);var s=i.createHmac("sha"+e,r);return f((s.update(t),s.digest("base64")))}}u&&(l+=" or a KeyObject",c+="or a KeyObject");var w="timingSafeEqual"in i?function(e,t){return e.byteLength===t.byteLength&&i.timingSafeEqual(e,t)}:function(t,r){return s||(s=e.r(22691)),s(t,r)};function _(e){return function(t,r,s){var i=m(e)(t,s);return w(n.from(r),n.from(i))}}function b(e){return function(t,r){d(r),t=y(t);var s=i.createSign("RSA-SHA"+e);return f((s.update(t),s.sign(r,"base64")))}}function A(e){return function(t,r,s){h(s),t=y(t),r=p(r);var n=i.createVerify("RSA-SHA"+e);return n.update(t),n.verify(s,r,"base64")}}function E(e){return function(t,r){d(r),t=y(t);var s=i.createSign("RSA-SHA"+e);return f((s.update(t),s.sign({key:r,padding:i.constants.RSA_PKCS1_PSS_PADDING,saltLength:i.constants.RSA_PSS_SALTLEN_DIGEST},"base64")))}}function v(e){return function(t,r,s){h(s),t=y(t),r=p(r);var n=i.createVerify("RSA-SHA"+e);return n.update(t),n.verify({key:s,padding:i.constants.RSA_PKCS1_PSS_PADDING,saltLength:i.constants.RSA_PSS_SALTLEN_DIGEST},r,"base64")}}function T(e){var t=b(e);return function(){var r=t.apply(null,arguments);return o.derToJose(r,"ES"+e)}}function S(e){var t=A(e);return function(r,s,n){return t(r,s=o.joseToDer(s,"ES"+e).toString("base64"),n)}}function C(){return function(){return""}}function k(){return function(e,t){return""===t}}t.exports=function(e){var t=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/);if(!t)throw g('"%s" is not a valid algorithm.\n  Supported algorithms are:\n  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".',e);var r=(t[1]||t[3]).toLowerCase(),s=t[2];return{sign:({hs:m,rs:b,ps:E,es:T,none:C})[r](s),verify:({hs:_,rs:A,ps:v,es:S,none:k})[r](s)}}},76872,(e,t,r)=>{var s=e.r(874).Buffer;t.exports=function(e){return"string"==typeof e?e:"number"==typeof e||s.isBuffer(e)?e.toString():JSON.stringify(e)}},14743,(e,t,r)=>{var s=e.r(23469).Buffer,n=e.r(41949),i=e.r(57067),o=e.r(88947),a=e.r(76872),c=e.r(24361);function l(e,t){return s.from(e,t).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function u(e){var t,r,s,n=e.header,o=e.payload,u=e.secret||e.privateKey,h=e.encoding,d=i(n.alg),f=(t=(t=h)||"utf8",r=l(a(n),"binary"),s=l(a(o),t),c.format("%s.%s",r,s)),p=d.sign(f,u);return c.format("%s.%s",f,p)}function h(e){var t=e.secret;if(t=null==(t=null==t?e.privateKey:t)?e.key:t,!0===/^hs/i.test(e.header.alg)&&null==t)throw TypeError("secret must be a string or buffer or a KeyObject");var r=new n(t);this.readable=!0,this.header=e.header,this.encoding=e.encoding,this.secret=this.privateKey=this.key=r,this.payload=new n(e.payload),this.secret.once("close",(function(){!this.payload.writable&&this.readable&&this.sign()}).bind(this)),this.payload.once("close",(function(){!this.secret.writable&&this.readable&&this.sign()}).bind(this))}c.inherits(h,o),h.prototype.sign=function(){try{var e=u({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(e){this.readable=!1,this.emit("error",e),this.emit("close")}},h.sign=u,t.exports=h},48233,(e,t,r)=>{var s=e.r(23469).Buffer,n=e.r(41949),i=e.r(57067),o=e.r(88947),a=e.r(76872),c=e.r(24361),l=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function u(e){var t=e.split(".",1)[0],r=s.from(t,"base64").toString("binary");if("[object Object]"===Object.prototype.toString.call(r))return r;try{return JSON.parse(r)}catch(e){return}}function h(e){return e.split(".")[2]}function d(e){return l.test(e)&&!!u(e)}function f(e,t,r){if(!t){var s=Error("Missing algorithm parameter for jws.verify");throw s.code="MISSING_ALGORITHM",s}var n=h(e=a(e)),o=e.split(".",2).join(".");return i(t).verify(o,n,r)}function p(e,t){if(t=t||{},!d(e=a(e)))return null;var r,n,i=u(e);if(!i)return null;var o=(r=r||"utf8",n=e.split(".")[1],s.from(n,"base64").toString(r));return("JWT"===i.typ||t.json)&&(o=JSON.parse(o,t.encoding)),{header:i,payload:o,signature:h(e)}}function g(e){var t=(e=e||{}).secret;if(t=null==(t=null==t?e.publicKey:t)?e.key:t,!0===/^hs/i.test(e.algorithm)&&null==t)throw TypeError("secret must be a string or buffer or a KeyObject");var r=new n(t);this.readable=!0,this.algorithm=e.algorithm,this.encoding=e.encoding,this.secret=this.publicKey=this.key=r,this.signature=new n(e.signature),this.secret.once("close",(function(){!this.signature.writable&&this.readable&&this.verify()}).bind(this)),this.signature.once("close",(function(){!this.secret.writable&&this.readable&&this.verify()}).bind(this))}c.inherits(g,o),g.prototype.verify=function(){try{var e=f(this.signature.buffer,this.algorithm,this.key.buffer),t=p(this.signature.buffer,this.encoding);return this.emit("done",e,t),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(e){this.readable=!1,this.emit("error",e),this.emit("close")}},g.decode=p,g.isValid=d,g.verify=f,t.exports=g},58184,(e,t,r)=>{var s=e.r(14743),n=e.r(48233);r.ALGORITHMS=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"],r.sign=s.sign,r.verify=n.verify,r.decode=n.decode,r.isValid=n.isValid,r.createSign=function(e){return new s(e)},r.createVerify=function(e){return new n(e)}},66667,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.GoogleToken=void 0;var s,n=l(e.r(22734)),i=e.r(57612),o=l(e.r(58184)),a=l(e.r(14747)),c=e.r(24361);function l(e,t){if("function"==typeof WeakMap)var r=new WeakMap,s=new WeakMap;return(l=function(e,t){if(!t&&e&&e.__esModule)return e;var n,i,o={__proto__:null,default:e};if(null===e||"object"!=u(e)&&"function"!=typeof e)return o;if(n=t?s:r){if(n.has(e))return n.get(e);n.set(e,o)}for(var a in e)"default"!==a&&({}).hasOwnProperty.call(e,a)&&((i=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,a))&&(i.get||i.set)?n(o,a,i):o[a]=e[a]);return o})(e,t)}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}function d(e,t,r){return e.set(f(e,t),r),r}function f(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw TypeError("Private element is not present on this object")}function p(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,E(s.key),s)}}function g(e,t,r){return t&&p(e.prototype,t),r&&p(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function m(e){var t="function"==typeof Map?new Map:void 0;return(m=function(e){if(null===e||!function(e){try{return -1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return function(e,t,r){if(w())return Reflect.construct.apply(null,arguments);var s=[null];s.push.apply(s,t);var n=new(e.bind.apply(e,s));return r&&_(n,r.prototype),n}(e,arguments,b(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),_(r,e)})(e)}function w(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(w=function(){return!!e})()}function _(e,t){return(_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t,r){return(t=E(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=u(s))return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}function v(){var e,t,r="function"==typeof Symbol?Symbol:{},s=r.iterator||"@@iterator",n=r.toStringTag||"@@toStringTag";function i(r,s,n,i){var c=Object.create((s&&s.prototype instanceof a?s:a).prototype);return T(c,"_invoke",function(r,s,n){var i,a,c,l=0,u=n||[],h=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,r){return i=t,a=0,c=e,d.n=r,o}};function f(r,s){for(a=r,c=s,t=0;!h&&l&&!n&&t<u.length;t++){var n,i=u[t],f=d.p,p=i[2];r>3?(n=p===s)&&(c=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=e):i[0]<=f&&((n=r<2&&f<i[1])?(a=0,d.v=s,d.n=i[1]):f<p&&(n=r<3||i[0]>s||s>p)&&(i[4]=r,i[5]=s,d.n=p,a=0))}if(n||r>1)return o;throw h=!0,s}return function(n,u,p){if(l>1)throw TypeError("Generator is already running");for(h&&1===u&&f(u,p),a=u,c=p;(t=a<2?e:c)||!h;){i||(a?a<3?(a>1&&(d.n=-1),f(a,c)):d.n=c:d.v=c);try{if(l=2,i){if(a||(n="next"),t=i[n]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,a<2&&(a=0)}else 1===a&&(t=i.return)&&t.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+n+"' method"),a=1);i=e}else if((t=(h=d.n<0)?c:r.call(s,d))!==o)break}catch(t){i=e,a=1,c=t}finally{l=1}}return{value:t,done:h}}}(r,n,i),!0),c}var o={};function a(){}function c(){}function l(){}t=Object.getPrototypeOf;var u=l.prototype=a.prototype=Object.create([][s]?t(t([][s]())):(T(t={},s,function(){return this}),t));function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,T(e,n,"GeneratorFunction")),e.prototype=Object.create(u),e}return c.prototype=l,T(u,"constructor",l),T(l,"constructor",c),c.displayName="GeneratorFunction",T(l,n,"GeneratorFunction"),T(u),T(u,n,"Generator"),T(u,s,function(){return this}),T(u,"toString",function(){return"[object Generator]"}),(v=function(){return{w:i,m:h}})()}function T(e,t,r,s){var n=Object.defineProperty;try{n({},"",{})}catch(e){n=0}(T=function(e,t,r,s){if(t)n?n(e,t,{value:r,enumerable:!s,configurable:!s,writable:!s}):e[t]=r;else{var i=function(t,r){T(e,t,function(e){return this._invoke(t,r,e)})};i("next",0),i("throw",1),i("return",2)}})(e,t,r,s)}function S(e,t,r,s,n,i,o){try{var a=e[i](o),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(s,n)}function C(e){return function(){var t=this,r=arguments;return new Promise(function(s,n){var i=e.apply(t,r);function o(e){S(i,s,n,o,a,"next",e)}function a(e){S(i,s,n,o,a,"throw",e)}o(void 0)})}}var k=n.readFile?(0,c.promisify)(n.readFile):C(v().m(function e(){return v().w(function(e){for(;;)switch(e.n){case 0:throw new R("use key rather than keyFile.","MISSING_CREDENTIALS");case 1:return e.a(2)}},e)})),O="https://oauth2.googleapis.com/token",R=function(e){function t(e,r){var s,n,i;return y(this,t),n=t,i=[e],n=b(n),A(s=function(e,t){if(t&&("object"==u(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");var r=e;if(void 0===r)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(this,w()?Reflect.construct(n,i||[],b(this).constructor):n.apply(this,i)),"code",void 0),s.code=r,s}if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_(t,e),g(t)}(m(Error)),P=new WeakMap,j=new WeakSet;function I(e){return x.apply(this,arguments)}function x(){return(x=C(v().m(function e(t){return v().w(function(e){for(;;)switch(e.n){case 0:if(!P.get(f(P,this))||t.forceRefresh){e.n=1;break}return e.a(2,P.get(f(P,this)));case 1:return e.p=1,e.n=2,d(P,this,f(j,this,N).call(this,t));case 2:return e.a(2,e.v);case 3:return e.p=3,d(P,this,void 0),e.f(3);case 4:return e.a(2)}},e,this,[[1,,3,4]])}))).apply(this,arguments)}function N(e){return D.apply(this,arguments)}function D(){return(D=C(v().m(function e(t){var r;return v().w(function(e){for(;;)switch(e.n){case 0:if(!1!==this.isTokenExpiring()||!1!==t.forceRefresh){e.n=1;break}return e.a(2,Promise.resolve(this.rawToken));case 1:if(!(!this.key&&!this.keyFile)){e.n=2;break}throw Error("No key or keyFile set.");case 2:if(!(!this.key&&this.keyFile)){e.n=4;break}return e.n=3,this.getCredentials(this.keyFile);case 3:r=e.v,this.key=r.privateKey,this.iss=r.clientEmail||this.iss,r.clientEmail||f(j,this,U).call(this);case 4:return e.a(2,f(j,this,G).call(this))}},e,this)}))).apply(this,arguments)}function U(){if(!this.iss)throw new R("email is required.","MISSING_CREDENTIALS")}function F(){return M.apply(this,arguments)}function M(){return(M=C(v().m(function e(){var t;return v().w(function(e){for(;;)switch(e.n){case 0:if(this.accessToken){e.n=1;break}throw Error("No token to revoke.");case 1:return t="https://oauth2.googleapis.com/revoke?token="+this.accessToken,e.n=2,this.transporter.request({url:t,retry:!0});case 2:f(j,this,L).call(this,{email:this.iss,sub:this.sub,key:this.key,keyFile:this.keyFile,scope:this.scope,additionalClaims:this.additionalClaims});case 3:return e.a(2)}},e,this)}))).apply(this,arguments)}function L(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.keyFile=e.keyFile,this.key=e.key,this.rawToken=void 0,this.iss=e.email||e.iss,this.sub=e.sub,this.additionalClaims=e.additionalClaims,"object"===u(e.scope)?this.scope=e.scope.join(" "):this.scope=e.scope,this.eagerRefreshThresholdMillis=e.eagerRefreshThresholdMillis,e.transporter&&(this.transporter=e.transporter)}function G(){return $.apply(this,arguments)}function $(){return($=C(v().m(function e(){var t,r,s,n,i,a,c,l,u,h;return v().w(function(e){for(;;)switch(e.n){case 0:return t=Math.floor(new Date().getTime()/1e3),r=this.additionalClaims||{},s=Object.assign({iss:this.iss,scope:this.scope,aud:O,exp:t+3600,iat:t,sub:this.sub},r),n=o.sign({header:{alg:"RS256"},payload:s,secret:this.key}),e.p=1,e.n=2,this.transporter.request({method:"POST",url:O,data:new URLSearchParams({grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:n}),responseType:"json",retryConfig:{httpMethodsToRetry:["POST"]}});case 2:return i=e.v,this.rawToken=i.data,this.expiresAt=null===i.data.expires_in||void 0===i.data.expires_in?void 0:(t+i.data.expires_in)*1e3,e.a(2,this.rawToken);case 3:throw e.p=3,h=e.v,this.rawToken=void 0,this.tokenExpires=void 0,(l=h.response&&null!=(a=h.response)&&a.data?null==(c=h.response)?void 0:c.data:{}).error&&(u=l.error_description?": ".concat(l.error_description):"",h.message="".concat(l.error).concat(u)),h;case 4:return e.a(2)}},e,this,[[1,3]])}))).apply(this,arguments)}r.GoogleToken=g(function e(t){y(this,e),h(this,j),j.add(this),A(this,"expiresAt",void 0),A(this,"key",void 0),A(this,"keyFile",void 0),A(this,"iss",void 0),A(this,"sub",void 0),A(this,"scope",void 0),A(this,"rawToken",void 0),A(this,"tokenExpires",void 0),A(this,"email",void 0),A(this,"additionalClaims",void 0),A(this,"eagerRefreshThresholdMillis",void 0),A(this,"transporter",{request:function(e){return(0,i.request)(e)}}),h(this,P),P.set(this,void 0),f(j,this,L).call(this,t)},[{key:"accessToken",get:function(){return this.rawToken?this.rawToken.access_token:void 0}},{key:"idToken",get:function(){return this.rawToken?this.rawToken.id_token:void 0}},{key:"tokenType",get:function(){return this.rawToken?this.rawToken.token_type:void 0}},{key:"refreshToken",get:function(){return this.rawToken?this.rawToken.refresh_token:void 0}},{key:"hasExpired",value:function(){var e=new Date().getTime();return!this.rawToken||!this.expiresAt||e>=this.expiresAt}},{key:"isTokenExpiring",value:function(){var e,t=new Date().getTime(),r=null!=(e=this.eagerRefreshThresholdMillis)?e:0;return!this.rawToken||!this.expiresAt||this.expiresAt<=t+r}},{key:"getToken",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===u(e)&&(t=e,e=void 0),t=Object.assign({forceRefresh:!1},t),e){var r=e;f(j,this,I).call(this,t).then(function(e){return r(null,e)},e);return}return f(j,this,I).call(this,t)}},{key:"getCredentials",value:(s=C(v().m(function e(t){var r,s,n,i,o;return v().w(function(e){for(;;)switch(e.n){case 0:e.n=".json"===(o=a.extname(t))?1:".der"===o||".crt"===o||".pem"===o?4:".p12"===o||".pfx"===o?6:7;break;case 1:return e.n=2,k(t,"utf8");case 2:if(s=(r=JSON.parse(e.v)).private_key,n=r.client_email,!(!s||!n)){e.n=3;break}throw new R("private_key and client_email are required.","MISSING_CREDENTIALS");case 3:return e.a(2,{privateKey:s,clientEmail:n});case 4:return e.n=5,k(t,"utf8");case 5:return i=e.v,e.a(2,{privateKey:i});case 6:throw new R("*.p12 certificates are not supported after v6.1.2. Consider utilizing *.json format or converting *.p12 to *.pem using the OpenSSL CLI.","UNKNOWN_CERTIFICATE_TYPE");case 7:throw new R("Unknown certificate type. Type is determined based on file extension. Current supported extensions are *.json, and *.pem.","UNKNOWN_CERTIFICATE_TYPE");case 8:return e.a(2)}},e)})),function(e){return s.apply(this,arguments)})},{key:"revokeToken",value:function(e){return e?void f(j,this,F).call(this).then(function(){return e()},e):f(j,this,F).call(this)}}])},10247,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.JWTAccess=void 0;let s=e.r(58184),n=e.r(15733),i={alg:"RS256",typ:"JWT"};class o{email;key;keyId;projectId;eagerRefreshThresholdMillis;cache=new n.LRUCache({capacity:500,maxAge:36e5});constructor(e,t,r,s){this.email=e,this.key=t,this.keyId=r,this.eagerRefreshThresholdMillis=s??3e5}getCachedKey(e,t){let r=e;if(t&&Array.isArray(t)&&t.length?r=e?`${e}_${t.join("_")}`:`${t.join("_")}`:"string"==typeof t&&(r=e?`${e}_${t}`:t),!r)throw Error("Scopes or url must be provided");return r}getRequestHeaders(e,t,r){let n,a=this.getCachedKey(e,r),c=this.cache.get(a),l=Date.now();if(c&&c.expiration-l>this.eagerRefreshThresholdMillis)return new Headers(c.headers);let u=Math.floor(Date.now()/1e3),h=o.getExpirationTime(u);if(Array.isArray(r)&&(r=r.join(" ")),n=r?{iss:this.email,sub:this.email,scope:r,exp:h,iat:u}:{iss:this.email,sub:this.email,aud:e,exp:h,iat:u},t){for(let e in n)if(t[e])throw Error(`The '${e}' property is not allowed when passing additionalClaims. This claim is included in the JWT by default.`)}let d=this.keyId?{...i,kid:this.keyId}:i,f=Object.assign(n,t),p=s.sign({header:d,payload:f,secret:this.key}),g=new Headers({authorization:`Bearer ${p}`});return this.cache.set(a,{expiration:1e3*h,headers:g}),g}static getExpirationTime(e){return e+3600}fromJSON(e){if(!e)throw Error("Must pass in a JSON object containing the service account auth settings.");if(!e.client_email)throw Error("The incoming JSON object does not contain a client_email field");if(!e.private_key)throw Error("The incoming JSON object does not contain a private_key field");this.email=e.client_email,this.key=e.private_key,this.keyId=e.private_key_id,this.projectId=e.project_id}fromStream(e,t){if(!t)return this.fromStreamAsync(e);this.fromStreamAsync(e).then(()=>t(),t)}fromStreamAsync(e){return new Promise((t,r)=>{e||r(Error("Must pass in a stream containing the service account auth settings."));let s="";e.setEncoding("utf8").on("data",e=>s+=e).on("error",r).on("end",()=>{try{let e=JSON.parse(s);this.fromJSON(e),t()}catch(e){r(e)}})})}}r.JWTAccess=o},24553,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.JWT=void 0;let s=e.r(66667),n=e.r(10247),i=e.r(701),o=e.r(11656);class a extends i.OAuth2Client{email;keyFile;key;keyId;defaultScopes;scopes;scope;subject;gtoken;additionalClaims;useJWTAccessWithScope;defaultServicePath;access;constructor(e={}){super(e),this.email=e.email,this.keyFile=e.keyFile,this.key=e.key,this.keyId=e.keyId,this.scopes=e.scopes,this.subject=e.subject,this.additionalClaims=e.additionalClaims,this.credentials={refresh_token:"jwt-placeholder",expiry_date:1}}createScoped(e){let t=new a(this);return t.scopes=e,t}async getRequestMetadataAsync(e){e=this.defaultServicePath?`https://${this.defaultServicePath}/`:e;let t=!this.hasUserScopes()&&e||this.useJWTAccessWithScope&&this.hasAnyScopes()||this.universeDomain!==o.DEFAULT_UNIVERSE;if(this.subject&&this.universeDomain!==o.DEFAULT_UNIVERSE)throw RangeError(`Service Account user is configured for the credential. Domain-wide delegation is not supported in universes other than ${o.DEFAULT_UNIVERSE}`);if(!this.apiKey&&t)if(this.additionalClaims&&this.additionalClaims.target_audience){let{tokens:e}=await this.refreshToken();return{headers:this.addSharedMetadataHeaders(new Headers({authorization:`Bearer ${e.id_token}`}))}}else{let t;this.access||(this.access=new n.JWTAccess(this.email,this.key,this.keyId,this.eagerRefreshThresholdMillis)),this.hasUserScopes()?t=this.scopes:e||(t=this.defaultScopes);let r=this.useJWTAccessWithScope||this.universeDomain!==o.DEFAULT_UNIVERSE,s=await this.access.getRequestHeaders(e??void 0,this.additionalClaims,r?t:void 0);return{headers:this.addSharedMetadataHeaders(s)}}return this.hasAnyScopes()||this.apiKey?super.getRequestMetadataAsync(e):{headers:new Headers}}async fetchIdToken(e){let t=new s.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:{target_audience:e},transporter:this.transporter});if(await t.getToken({forceRefresh:!0}),!t.idToken)throw Error("Unknown error: Failed to fetch ID token");return t.idToken}hasUserScopes(){return!!this.scopes&&this.scopes.length>0}hasAnyScopes(){return!!this.scopes&&!!(this.scopes.length>0)||!!this.defaultScopes&&!!(this.defaultScopes.length>0)}authorize(e){if(!e)return this.authorizeAsync();this.authorizeAsync().then(t=>e(null,t),e)}async authorizeAsync(){let e=await this.refreshToken();if(!e)throw Error("No result returned");return this.credentials=e.tokens,this.credentials.refresh_token="jwt-placeholder",this.key=this.gtoken.key,this.email=this.gtoken.iss,e.tokens}async refreshTokenNoCache(){let e=this.createGToken(),t={access_token:(await e.getToken({forceRefresh:this.isTokenExpiring()})).access_token,token_type:"Bearer",expiry_date:e.expiresAt,id_token:e.idToken};return this.emit("tokens",t),{res:null,tokens:t}}createGToken(){return this.gtoken||(this.gtoken=new s.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:this.additionalClaims,transporter:this.transporter})),this.gtoken}fromJSON(e){if(!e)throw Error("Must pass in a JSON object containing the service account auth settings.");if(!e.client_email)throw Error("The incoming JSON object does not contain a client_email field");if(!e.private_key)throw Error("The incoming JSON object does not contain a private_key field");this.email=e.client_email,this.key=e.private_key,this.keyId=e.private_key_id,this.projectId=e.project_id,this.quotaProjectId=e.quota_project_id,this.universeDomain=e.universe_domain||this.universeDomain}fromStream(e,t){if(!t)return this.fromStreamAsync(e);this.fromStreamAsync(e).then(()=>t(),t)}fromStreamAsync(e){return new Promise((t,r)=>{if(!e)throw Error("Must pass in a stream containing the service account auth settings.");let s="";e.setEncoding("utf8").on("error",r).on("data",e=>s+=e).on("end",()=>{try{let e=JSON.parse(s);this.fromJSON(e),t()}catch(e){r(e)}})})}fromAPIKey(e){if("string"!=typeof e)throw Error("Must provide an API Key string.");this.apiKey=e}async getCredentials(){if(this.key)return{private_key:this.key,client_email:this.email};if(this.keyFile){let e=this.createGToken(),t=await e.getCredentials(this.keyFile);return{private_key:t.privateKey,client_email:t.clientEmail}}throw Error("A key or a keyFile must be provided to getCredentials.")}}r.JWT=a},16260,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.UserRefreshClient=r.USER_REFRESH_ACCOUNT_TYPE=void 0;let s=e.r(701),n=e.r(11656);r.USER_REFRESH_ACCOUNT_TYPE="authorized_user";class i extends s.OAuth2Client{_refreshToken;constructor(e,t,r,s,n){const i=e&&"object"==typeof e?e:{clientId:e,clientSecret:t,refreshToken:r,eagerRefreshThresholdMillis:s,forceRefreshOnFailure:n};super(i),this._refreshToken=i.refreshToken,this.credentials.refresh_token=i.refreshToken}async refreshTokenNoCache(){return super.refreshTokenNoCache(this._refreshToken)}async fetchIdToken(e){let t={...i.RETRY_CONFIG,url:this.endpoints.oauth2TokenUrl,method:"POST",data:new URLSearchParams({client_id:this._clientId,client_secret:this._clientSecret,grant_type:"refresh_token",refresh_token:this._refreshToken,target_audience:e})};return n.AuthClient.setMethodName(t,"fetchIdToken"),(await this.transporter.request(t)).data.id_token}fromJSON(e){if(!e)throw Error("Must pass in a JSON object containing the user refresh token");if("authorized_user"!==e.type)throw Error('The incoming JSON object does not have the "authorized_user" type');if(!e.client_id)throw Error("The incoming JSON object does not contain a client_id field");if(!e.client_secret)throw Error("The incoming JSON object does not contain a client_secret field");if(!e.refresh_token)throw Error("The incoming JSON object does not contain a refresh_token field");this._clientId=e.client_id,this._clientSecret=e.client_secret,this._refreshToken=e.refresh_token,this.credentials.refresh_token=e.refresh_token,this.quotaProjectId=e.quota_project_id,this.universeDomain=e.universe_domain||this.universeDomain}fromStream(e,t){if(!t)return this.fromStreamAsync(e);this.fromStreamAsync(e).then(()=>t(),t)}async fromStreamAsync(e){return new Promise((t,r)=>{if(!e)return r(Error("Must pass in a stream containing the user refresh token."));let s="";e.setEncoding("utf8").on("error",r).on("data",e=>s+=e).on("end",()=>{try{let e=JSON.parse(s);return this.fromJSON(e),t()}catch(e){return r(e)}})})}static fromJSON(e){let t=new i;return t.fromJSON(e),t}}r.UserRefreshClient=i},36126,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Impersonated=r.IMPERSONATED_ACCOUNT_TYPE=void 0;let s=e.r(701),n=e.r(57612),i=e.r(15733);r.IMPERSONATED_ACCOUNT_TYPE="impersonated_service_account";class o extends s.OAuth2Client{sourceClient;targetPrincipal;targetScopes;delegates;lifetime;endpoint;constructor(e={}){if(super(e),this.credentials={expiry_date:1,refresh_token:"impersonated-placeholder"},this.sourceClient=e.sourceClient??new s.OAuth2Client,this.targetPrincipal=e.targetPrincipal??"",this.delegates=e.delegates??[],this.targetScopes=e.targetScopes??[],this.lifetime=e.lifetime??3600,(0,i.originalOrCamelOptions)(e).get("universe_domain")){if(this.sourceClient.universeDomain!==this.universeDomain)throw RangeError(`Universe domain ${this.sourceClient.universeDomain} in source credentials does not match ${this.universeDomain} universe domain set for impersonated credentials.`)}else this.universeDomain=this.sourceClient.universeDomain;this.endpoint=e.endpoint??`https://iamcredentials.${this.universeDomain}`}async sign(e){await this.sourceClient.getAccessToken();let t=`projects/-/serviceAccounts/${this.targetPrincipal}`,r=`${this.endpoint}/v1/${t}:signBlob`,s={delegates:this.delegates,payload:Buffer.from(e).toString("base64")};return(await this.sourceClient.request({...o.RETRY_CONFIG,url:r,data:s,method:"POST"})).data}getTargetPrincipal(){return this.targetPrincipal}async refreshToken(){try{await this.sourceClient.getAccessToken();let e="projects/-/serviceAccounts/"+this.targetPrincipal,t=`${this.endpoint}/v1/${e}:generateAccessToken`,r={delegates:this.delegates,scope:this.targetScopes,lifetime:this.lifetime+"s"},s=await this.sourceClient.request({...o.RETRY_CONFIG,url:t,data:r,method:"POST"}),n=s.data;return this.credentials.access_token=n.accessToken,this.credentials.expiry_date=Date.parse(n.expireTime),{tokens:this.credentials,res:s}}catch(r){if(!(r instanceof Error))throw r;let e=0,t="";if(r instanceof n.GaxiosError&&(e=r?.response?.data?.error?.status,t=r?.response?.data?.error?.message),e&&t)throw r.message=`${e}: unable to impersonate: ${t}`,r;throw r.message=`unable to impersonate: ${r}`,r}}async fetchIdToken(e,t){await this.sourceClient.getAccessToken();let r=`projects/-/serviceAccounts/${this.targetPrincipal}`,s=`${this.endpoint}/v1/${r}:generateIdToken`,n={delegates:this.delegates,audience:e,includeEmail:t?.includeEmail??!0,useEmailAzp:t?.includeEmail??!0};return(await this.sourceClient.request({...o.RETRY_CONFIG,url:s,data:n,method:"POST"})).data.token}}r.Impersonated=o},46944,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.OAuthClientAuthHandler=void 0,r.getErrorFromOAuthErrorResponse=function(e,t){let r=e.error,s=e.error_description,n=e.error_uri,i=`Error code ${r}`;void 0!==s&&(i+=`: ${s}`),void 0!==n&&(i+=` - ${n}`);let o=Error(i);if(t){let e=Object.keys(t);t.stack&&e.push("stack"),e.forEach(e=>{"message"!==e&&Object.defineProperty(o,e,{value:t[e],writable:!1,enumerable:!0})})}return o};let s=e.r(57612),n=e.r(1426),i=["PUT","POST","PATCH"];class o{#d=(0,n.createCrypto)();#f;transporter;constructor(e){e&&"clientId"in e?(this.#f=e,this.transporter=new s.Gaxios):(this.#f=e?.clientAuthentication,this.transporter=e?.transporter||new s.Gaxios)}applyClientAuthenticationOptions(e,t){e.headers=s.Gaxios.mergeHeaders(e.headers),this.injectAuthenticatedHeaders(e,t),t||this.injectAuthenticatedRequestBody(e)}injectAuthenticatedHeaders(e,t){if(t)e.headers=s.Gaxios.mergeHeaders(e.headers,{authorization:`Bearer ${t}`});else if(this.#f?.confidentialClientType==="basic"){e.headers=s.Gaxios.mergeHeaders(e.headers);let t=this.#f.clientId,r=this.#f.clientSecret||"",n=this.#d.encodeBase64StringUtf8(`${t}:${r}`);s.Gaxios.mergeHeaders(e.headers,{authorization:`Basic ${n}`})}}injectAuthenticatedRequestBody(e){if(this.#f?.confidentialClientType==="request-body"){let t=(e.method||"GET").toUpperCase();if(!i.includes(t))throw Error(`${t} HTTP method does not support ${this.#f.confidentialClientType} client authentication`);let r=new Headers(e.headers).get("content-type");if(r?.startsWith("application/x-www-form-urlencoded")||e.data instanceof URLSearchParams){let t=new URLSearchParams(e.data??"");t.append("client_id",this.#f.clientId),t.append("client_secret",this.#f.clientSecret||""),e.data=t}else if(r?.startsWith("application/json"))e.data=e.data||{},Object.assign(e.data,{client_id:this.#f.clientId,client_secret:this.#f.clientSecret||""});else throw Error(`${r} content-types are not supported with ${this.#f.confidentialClientType} client authentication`)}}static get RETRY_CONFIG(){return{retry:!0,retryConfig:{httpMethodsToRetry:["GET","PUT","POST","HEAD","OPTIONS","DELETE"]}}}}r.OAuthClientAuthHandler=o},5332,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StsCredentials=void 0;let s=e.r(57612),n=e.r(11656),i=e.r(46944),o=e.r(15733);class a extends i.OAuthClientAuthHandler{#p;constructor(e={tokenExchangeEndpoint:""},t){("object"!=typeof e||e instanceof URL)&&(e={tokenExchangeEndpoint:e,clientAuthentication:t}),super(e),this.#p=e.tokenExchangeEndpoint}async exchangeToken(e,t,r){let c={grant_type:e.grantType,resource:e.resource,audience:e.audience,scope:e.scope?.join(" "),requested_token_type:e.requestedTokenType,subject_token:e.subjectToken,subject_token_type:e.subjectTokenType,actor_token:e.actingParty?.actorToken,actor_token_type:e.actingParty?.actorTokenType,options:r&&JSON.stringify(r)},l={...a.RETRY_CONFIG,url:this.#p.toString(),method:"POST",headers:t,data:new URLSearchParams((0,o.removeUndefinedValuesInObject)(c))};n.AuthClient.setMethodName(l,"exchangeToken"),this.applyClientAuthenticationOptions(l);try{let e=await this.transporter.request(l),t=e.data;return t.res=e,t}catch(e){if(e instanceof s.GaxiosError&&e.response)throw(0,i.getErrorFromOAuthErrorResponse)(e.response.data,e);throw e}}}r.StsCredentials=a},6560,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BaseExternalAccountClient=r.CLOUD_RESOURCE_MANAGER=r.EXTERNAL_ACCOUNT_TYPE=r.EXPIRATION_TIME_OFFSET=void 0;let s=e.r(57612),n=e.r(88947),i=e.r(11656),o=e.r(5332),a=e.r(15733),c=e.r(93714),l="https://www.googleapis.com/auth/cloud-platform";r.EXPIRATION_TIME_OFFSET=3e5,r.EXTERNAL_ACCOUNT_TYPE="external_account",r.CLOUD_RESOURCE_MANAGER="https://cloudresourcemanager.googleapis.com/v1/projects/";class u extends i.AuthClient{scopes;projectNumber;audience;subjectTokenType;stsCredential;clientAuth;credentialSourceType;cachedAccessToken;serviceAccountImpersonationUrl;serviceAccountImpersonationLifetime;workforcePoolUserProject;configLifetimeRequested;tokenUrl;cloudResourceManagerURL;supplierContext;#g=null;constructor(e){super(e);const t=(0,a.originalOrCamelOptions)(e),s=t.get("type");if(s&&s!==r.EXTERNAL_ACCOUNT_TYPE)throw Error(`Expected "${r.EXTERNAL_ACCOUNT_TYPE}" type but received "${e.type}"`);const n=t.get("client_id"),i=t.get("client_secret");this.tokenUrl=t.get("token_url")??"https://sts.{universeDomain}/v1/token".replace("{universeDomain}",this.universeDomain);const c=t.get("subject_token_type"),u=t.get("workforce_pool_user_project"),h=t.get("service_account_impersonation_url"),d=t.get("service_account_impersonation"),f=(0,a.originalOrCamelOptions)(d).get("token_lifetime_seconds");this.cloudResourceManagerURL=new URL(t.get("cloud_resource_manager_url")||`https://cloudresourcemanager.${this.universeDomain}/v1/projects/`),n&&(this.clientAuth={confidentialClientType:"basic",clientId:n,clientSecret:i}),this.stsCredential=new o.StsCredentials({tokenExchangeEndpoint:this.tokenUrl,clientAuthentication:this.clientAuth}),this.scopes=t.get("scopes")||[l],this.cachedAccessToken=null,this.audience=t.get("audience"),this.subjectTokenType=c,this.workforcePoolUserProject=u;const p=RegExp("//iam\\.googleapis\\.com/locations/[^/]+/workforcePools/[^/]+/providers/.+");if(this.workforcePoolUserProject&&!this.audience.match(p))throw Error("workforcePoolUserProject should not be set for non-workforce pool credentials.");this.serviceAccountImpersonationUrl=h,this.serviceAccountImpersonationLifetime=f,this.serviceAccountImpersonationLifetime?this.configLifetimeRequested=!0:(this.configLifetimeRequested=!1,this.serviceAccountImpersonationLifetime=3600),this.projectNumber=this.getProjectNumber(this.audience),this.supplierContext={audience:this.audience,subjectTokenType:this.subjectTokenType,transporter:this.transporter}}getServiceAccountEmail(){if(this.serviceAccountImpersonationUrl){if(this.serviceAccountImpersonationUrl.length>256)throw RangeError(`URL is too long: ${this.serviceAccountImpersonationUrl}`);let e=/serviceAccounts\/(?<email>[^:]+):generateAccessToken$/.exec(this.serviceAccountImpersonationUrl);return e?.groups?.email||null}return null}setCredentials(e){super.setCredentials(e),this.cachedAccessToken=e}async getAccessToken(){return(!this.cachedAccessToken||this.isExpired(this.cachedAccessToken))&&await this.refreshAccessTokenAsync(),{token:this.cachedAccessToken.access_token,res:this.cachedAccessToken.res}}async getRequestHeaders(){let e=await this.getAccessToken(),t=new Headers({authorization:`Bearer ${e.token}`});return this.addSharedMetadataHeaders(t)}request(e,t){if(!t)return this.requestAsync(e);this.requestAsync(e).then(e=>t(null,e),e=>t(e,e.response))}async getProjectId(){let e=this.projectNumber||this.workforcePoolUserProject;if(this.projectId)return this.projectId;if(e){let t=await this.getRequestHeaders(),r={...u.RETRY_CONFIG,headers:t,url:`${this.cloudResourceManagerURL.toString()}${e}`};i.AuthClient.setMethodName(r,"getProjectId");let s=await this.transporter.request(r);return this.projectId=s.data.projectId,this.projectId}return null}async requestAsync(e,t=!1){let r;try{let t=await this.getRequestHeaders();e.headers=s.Gaxios.mergeHeaders(e.headers),this.addUserProjectAndAuthHeaders(e.headers,t),r=await this.transporter.request(e)}catch(s){let r=s.response;if(r){let s=r.status,i=r.config.data instanceof n.Readable;if(!t&&(401===s||403===s)&&!i&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync(e,!0)}throw s}return r}async refreshAccessTokenAsync(){this.#g=this.#g||this.#y();try{return await this.#g}finally{this.#g=null}}async #y(){let e=await this.retrieveSubjectToken(),t={grantType:"urn:ietf:params:oauth:grant-type:token-exchange",audience:this.audience,requestedTokenType:"urn:ietf:params:oauth:token-type:access_token",subjectToken:e,subjectTokenType:this.subjectTokenType,scope:this.serviceAccountImpersonationUrl?[l]:this.getScopesArray()},r=!this.clientAuth&&this.workforcePoolUserProject?{userProject:this.workforcePoolUserProject}:void 0,s=new Headers({"x-goog-api-client":this.getMetricsHeaderValue()}),n=await this.stsCredential.exchangeToken(t,s,r);return this.serviceAccountImpersonationUrl?this.cachedAccessToken=await this.getImpersonatedAccessToken(n.access_token):n.expires_in?this.cachedAccessToken={access_token:n.access_token,expiry_date:new Date().getTime()+1e3*n.expires_in,res:n.res}:this.cachedAccessToken={access_token:n.access_token,res:n.res},this.credentials={},Object.assign(this.credentials,this.cachedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedAccessToken.expiry_date,access_token:this.cachedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedAccessToken}getProjectNumber(e){let t=e.match(/\/projects\/([^/]+)/);return t?t[1]:null}async getImpersonatedAccessToken(e){let t={...u.RETRY_CONFIG,url:this.serviceAccountImpersonationUrl,method:"POST",headers:{"content-type":"application/json",authorization:`Bearer ${e}`},data:{scope:this.getScopesArray(),lifetime:this.serviceAccountImpersonationLifetime+"s"}};i.AuthClient.setMethodName(t,"getImpersonatedAccessToken");let r=await this.transporter.request(t),s=r.data;return{access_token:s.accessToken,expiry_date:new Date(s.expireTime).getTime(),res:r}}isExpired(e){let t=new Date().getTime();return!!e.expiry_date&&t>=e.expiry_date-this.eagerRefreshThresholdMillis}getScopesArray(){return"string"==typeof this.scopes?[this.scopes]:this.scopes||[l]}getMetricsHeaderValue(){let e=process.version.replace(/^v/,""),t=void 0!==this.serviceAccountImpersonationUrl,r=this.credentialSourceType?this.credentialSourceType:"unknown";return`gl-node/${e} auth/${c.pkg.version} google-byoid-sdk source/${r} sa-impersonation/${t} config-lifetime/${this.configLifetimeRequested}`}getTokenUrl(){return this.tokenUrl}}r.BaseExternalAccountClient=u},37289,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.FileSubjectTokenSupplier=void 0;let s=e.r(24361),n=e.r(22734),i=(0,s.promisify)(n.readFile??(()=>{})),o=(0,s.promisify)(n.realpath??(()=>{})),a=(0,s.promisify)(n.lstat??(()=>{}));r.FileSubjectTokenSupplier=class{filePath;formatType;subjectTokenFieldName;constructor(e){this.filePath=e.filePath,this.formatType=e.formatType,this.subjectTokenFieldName=e.subjectTokenFieldName}async getSubjectToken(){let e,t=this.filePath;try{if(t=await o(t),!(await a(t)).isFile())throw Error()}catch(e){throw e instanceof Error&&(e.message=`The file at ${t} does not exist, or it is not a file. ${e.message}`),e}let r=await i(t,{encoding:"utf8"});if("text"===this.formatType?e=r:"json"===this.formatType&&this.subjectTokenFieldName&&(e=JSON.parse(r)[this.subjectTokenFieldName]),!e)throw Error("Unable to parse the subject_token from the credential_source file");return e}}},63057,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.UrlSubjectTokenSupplier=void 0;let s=e.r(11656);r.UrlSubjectTokenSupplier=class{url;headers;formatType;subjectTokenFieldName;additionalGaxiosOptions;constructor(e){this.url=e.url,this.formatType=e.formatType,this.subjectTokenFieldName=e.subjectTokenFieldName,this.headers=e.headers,this.additionalGaxiosOptions=e.additionalGaxiosOptions}async getSubjectToken(e){let t,r={...this.additionalGaxiosOptions,url:this.url,method:"GET",headers:this.headers};if(s.AuthClient.setMethodName(r,"getSubjectToken"),"text"===this.formatType?t=(await e.transporter.request(r)).data:"json"===this.formatType&&this.subjectTokenFieldName&&(t=(await e.transporter.request(r)).data[this.subjectTokenFieldName]),!t)throw Error("Unable to parse the subject_token from the credential_source URL");return t}}},58218,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CertificateSubjectTokenSupplier=r.InvalidConfigurationError=r.CertificateSourceUnavailableError=r.CERTIFICATE_CONFIGURATION_ENV_VARIABLE=void 0;let s=e.r(15733),n=e.r(22734),i=e.r(54799),o=e.r(24836);r.CERTIFICATE_CONFIGURATION_ENV_VARIABLE="GOOGLE_API_CERTIFICATE_CONFIG";class a extends Error{constructor(e){super(e),this.name="CertificateSourceUnavailableError"}}r.CertificateSourceUnavailableError=a;class c extends Error{constructor(e){super(e),this.name="InvalidConfigurationError"}}r.InvalidConfigurationError=c,r.CertificateSubjectTokenSupplier=class{certificateConfigPath;trustChainPath;cert;key;constructor(e){if(!e.useDefaultCertificateConfig&&!e.certificateConfigLocation)throw new c("Either `useDefaultCertificateConfig` must be true or a `certificateConfigLocation` must be provided.");if(e.useDefaultCertificateConfig&&e.certificateConfigLocation)throw new c("Both `useDefaultCertificateConfig` and `certificateConfigLocation` cannot be provided.");this.trustChainPath=e.trustChainPath,this.certificateConfigPath=e.certificateConfigLocation??""}async createMtlsHttpsAgent(){if(!this.key||!this.cert)throw new c("Cannot create mTLS Agent with missing certificate or key");return new o.Agent({key:this.key,cert:this.cert})}async getSubjectToken(){this.certificateConfigPath=await this.#m();let{certPath:e,keyPath:t}=await this.#w();return{cert:this.cert,key:this.key}=await this.#_(e,t),await this.#b(this.cert)}async #m(){let e=this.certificateConfigPath;if(e){if(await (0,s.isValidFile)(e))return e;throw new a(`Provided certificate config path is invalid: ${e}`)}let t=process.env[r.CERTIFICATE_CONFIGURATION_ENV_VARIABLE];if(t){if(await (0,s.isValidFile)(t))return t;throw new a(`Path from environment variable "${r.CERTIFICATE_CONFIGURATION_ENV_VARIABLE}" is invalid: ${t}`)}let n=(0,s.getWellKnownCertificateConfigFileLocation)();if(await (0,s.isValidFile)(n))return n;throw new a(`Could not find certificate configuration file. Searched override path, the "${r.CERTIFICATE_CONFIGURATION_ENV_VARIABLE}" env var, and the gcloud path (${n}).`)}async #w(){let e,t=this.certificateConfigPath;try{e=await n.promises.readFile(t,"utf8")}catch(e){throw new a(`Failed to read certificate config file at: ${t}`)}try{let r=JSON.parse(e),s=r?.cert_configs?.workload?.cert_path,n=r?.cert_configs?.workload?.key_path;if(!s||!n)throw new c(`Certificate config file (${t}) is missing required "cert_path" or "key_path" in the workload config.`);return{certPath:s,keyPath:n}}catch(e){if(e instanceof c)throw e;throw new c(`Failed to parse certificate config from ${t}: ${e.message}`)}}async #_(e,t){let r,s;try{r=await n.promises.readFile(e),new i.X509Certificate(r)}catch(r){let t=r instanceof Error?r.message:String(r);throw new a(`Failed to read certificate file at ${e}: ${t}`)}try{s=await n.promises.readFile(t),(0,i.createPrivateKey)(s)}catch(r){let e=r instanceof Error?r.message:String(r);throw new a(`Failed to read private key file at ${t}: ${e}`)}return{cert:r,key:s}}async #b(e){let t=new i.X509Certificate(e);if(!this.trustChainPath)return JSON.stringify([t.raw.toString("base64")]);try{let e,r=((await n.promises.readFile(this.trustChainPath,"utf8")).match(/-----BEGIN CERTIFICATE-----[^-]+-----END CERTIFICATE-----/g)??[]).map((e,t)=>{try{return new i.X509Certificate(e)}catch(r){let e=r instanceof Error?r.message:String(r);throw new c(`Failed to parse certificate at index ${t} in trust chain file ${this.trustChainPath}: ${e}`)}}),s=r.findIndex(e=>t.raw.equals(e.raw));if(-1===s)e=[t,...r];else if(0===s)e=r;else throw new c(`Leaf certificate exists in the trust chain but is not the first entry (found at index ${s}).`);return JSON.stringify(e.map(e=>e.raw.toString("base64")))}catch(t){if(t instanceof c)throw t;let e=t instanceof Error?t.message:String(t);throw new a(`Failed to process certificate chain from ${this.trustChainPath}: ${e}`)}}}},76868,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.IdentityPoolClient=void 0;let s=e.r(6560),n=e.r(15733),i=e.r(37289),o=e.r(63057),a=e.r(58218),c=e.r(5332),l=e.r(57612);class u extends s.BaseExternalAccountClient{subjectTokenSupplier;constructor(e){super(e);const t=(0,n.originalOrCamelOptions)(e),r=t.get("credential_source"),s=t.get("subject_token_supplier");if(!r&&!s)throw Error("A credential source or subject token supplier must be specified.");if(r&&s)throw Error("Only one of credential source or subject token supplier can be specified.");if(s)this.subjectTokenSupplier=s,this.credentialSourceType="programmatic";else{const e=(0,n.originalOrCamelOptions)(r),t=(0,n.originalOrCamelOptions)(e.get("format")),s=t.get("type")||"text",c=t.get("subject_token_field_name");if("json"!==s&&"text"!==s)throw Error(`Invalid credential_source format "${s}"`);if("json"===s&&!c)throw Error("Missing subject_token_field_name for JSON credential_source format");const l=e.get("file"),h=e.get("url"),d=e.get("certificate"),f=e.get("headers");if(l&&h||h&&d||l&&d)throw Error('No valid Identity Pool "credential_source" provided, must be either file, url, or certificate.');if(l)this.credentialSourceType="file",this.subjectTokenSupplier=new i.FileSubjectTokenSupplier({filePath:l,formatType:s,subjectTokenFieldName:c});else if(h)this.credentialSourceType="url",this.subjectTokenSupplier=new o.UrlSubjectTokenSupplier({url:h,formatType:s,subjectTokenFieldName:c,headers:f,additionalGaxiosOptions:u.RETRY_CONFIG});else if(d){this.credentialSourceType="certificate";const e=new a.CertificateSubjectTokenSupplier({useDefaultCertificateConfig:d.use_default_certificate_config,certificateConfigLocation:d.certificate_config_location,trustChainPath:d.trust_chain_path});this.subjectTokenSupplier=e}else throw Error('No valid Identity Pool "credential_source" provided, must be either file, url, or certificate.')}}async retrieveSubjectToken(){let e=await this.subjectTokenSupplier.getSubjectToken(this.supplierContext);if(this.subjectTokenSupplier instanceof a.CertificateSubjectTokenSupplier){let e=await this.subjectTokenSupplier.createMtlsHttpsAgent();this.stsCredential=new c.StsCredentials({tokenExchangeEndpoint:this.getTokenUrl(),clientAuthentication:this.clientAuth,transporter:new l.Gaxios({agent:e})}),this.transporter=new l.Gaxios({...this.transporter.defaults||{},agent:e})}return e}}r.IdentityPoolClient=u},87573,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AwsRequestSigner=void 0;let s=e.r(57612),n=e.r(1426),i="AWS4-HMAC-SHA256";async function o(e,t,r){return await e.signWithHmacSha256(t,r)}async function a(e,t,r,s,n){let i=await o(e,`AWS4${t}`,r),a=await o(e,i,s),c=await o(e,a,n);return await o(e,c,"aws4_request")}async function c(e){let t=s.Gaxios.mergeHeaders(e.additionalAmzHeaders),r=e.requestPayload||"",c=e.host.split(".")[0],l=new Date,u=l.toISOString().replace(/[-:]/g,"").replace(/\.[0-9]+/,""),h=l.toISOString().replace(/[-]/g,"").replace(/T.*/,"");e.securityCredentials.token&&t.set("x-amz-security-token",e.securityCredentials.token);let d=s.Gaxios.mergeHeaders({host:e.host},t.has("date")?{}:{"x-amz-date":u},t),f="",p=[...d.keys()].sort();p.forEach(e=>{f+=`${e}:${d.get(e)}
`});let g=p.join(";"),y=await e.crypto.sha256DigestHex(r),m=`${e.method.toUpperCase()}
${e.canonicalUri}
${e.canonicalQuerystring}
${f}
${g}
${y}`,w=`${h}/${e.region}/${c}/aws4_request`,_=`${i}
${u}
${w}
`+await e.crypto.sha256DigestHex(m),b=await a(e.crypto,e.securityCredentials.secretAccessKey,h,e.region,c),A=await o(e.crypto,b,_),E=`${i} Credential=${e.securityCredentials.accessKeyId}/${w}, SignedHeaders=${g}, Signature=${(0,n.fromArrayBufferToHex)(A)}`;return{amzDate:t.has("date")?void 0:u,authorizationHeader:E,canonicalQuerystring:e.canonicalQuerystring}}r.AwsRequestSigner=class{getCredentials;region;crypto;constructor(e,t){this.getCredentials=e,this.region=t,this.crypto=(0,n.createCrypto)()}async getRequestOptions(e){if(!e.url)throw RangeError('"url" is required in "amzOptions"');let t="object"==typeof e.data?JSON.stringify(e.data):e.data,r=e.url,n=e.method||"GET",i=e.body||t,o=e.headers,a=await this.getCredentials(),l=new URL(r);if("string"!=typeof i&&void 0!==i)throw TypeError(`'requestPayload' is expected to be a string if provided. Got: ${i}`);let u=await c({crypto:this.crypto,host:l.host,canonicalUri:l.pathname,canonicalQuerystring:l.search.slice(1),method:n,region:this.region,securityCredentials:a,requestPayload:i,additionalAmzHeaders:o}),h=s.Gaxios.mergeHeaders(u.amzDate?{"x-amz-date":u.amzDate}:{},{authorization:u.authorizationHeader,host:l.host},o||{});a.token&&s.Gaxios.mergeHeaders(h,{"x-amz-security-token":a.token});let d={url:r,method:n,headers:h};return void 0!==i&&(d.body=i),d}}},41033,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DefaultAwsSecurityCredentialsSupplier=void 0;let s=e.r(11656);r.DefaultAwsSecurityCredentialsSupplier=class{regionUrl;securityCredentialsUrl;imdsV2SessionTokenUrl;additionalGaxiosOptions;constructor(e){this.regionUrl=e.regionUrl,this.securityCredentialsUrl=e.securityCredentialsUrl,this.imdsV2SessionTokenUrl=e.imdsV2SessionTokenUrl,this.additionalGaxiosOptions=e.additionalGaxiosOptions}async getAwsRegion(e){if(this.#A)return this.#A;let t=new Headers;if(!this.#A&&this.imdsV2SessionTokenUrl&&t.set("x-aws-ec2-metadata-token",await this.#E(e.transporter)),!this.regionUrl)throw RangeError('Unable to determine AWS region due to missing "options.credential_source.region_url"');let r={...this.additionalGaxiosOptions,url:this.regionUrl,method:"GET",headers:t};s.AuthClient.setMethodName(r,"getAwsRegion");let n=await e.transporter.request(r);return n.data.substr(0,n.data.length-1)}async getAwsSecurityCredentials(e){if(this.#v)return this.#v;let t=new Headers;this.imdsV2SessionTokenUrl&&t.set("x-aws-ec2-metadata-token",await this.#E(e.transporter));let r=await this.#T(t,e.transporter),s=await this.#S(r,t,e.transporter);return{accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,token:s.Token}}async #E(e){let t={...this.additionalGaxiosOptions,url:this.imdsV2SessionTokenUrl,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"300"}};return s.AuthClient.setMethodName(t,"#getImdsV2SessionToken"),(await e.request(t)).data}async #T(e,t){if(!this.securityCredentialsUrl)throw Error('Unable to determine AWS role name due to missing "options.credential_source.url"');let r={...this.additionalGaxiosOptions,url:this.securityCredentialsUrl,method:"GET",headers:e};return s.AuthClient.setMethodName(r,"#getAwsRoleName"),(await t.request(r)).data}async #S(e,t,r){let n={...this.additionalGaxiosOptions,url:`${this.securityCredentialsUrl}/${e}`,headers:t};return s.AuthClient.setMethodName(n,"#retrieveAwsSecurityCredentials"),(await r.request(n)).data}get #A(){return process.env.AWS_REGION||process.env.AWS_DEFAULT_REGION||null}get #v(){return process.env.AWS_ACCESS_KEY_ID&&process.env.AWS_SECRET_ACCESS_KEY?{accessKeyId:process.env.AWS_ACCESS_KEY_ID,secretAccessKey:process.env.AWS_SECRET_ACCESS_KEY,token:process.env.AWS_SESSION_TOKEN}:null}}},90220,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AwsClient=void 0;let s=e.r(87573),n=e.r(6560),i=e.r(41033),o=e.r(15733),a=e.r(57612);class c extends n.BaseExternalAccountClient{environmentId;awsSecurityCredentialsSupplier;regionalCredVerificationUrl;awsRequestSigner;region;static #C="https://sts.{region}.amazonaws.com?Action=GetCallerIdentity&Version=2011-06-15";static AWS_EC2_METADATA_IPV4_ADDRESS="169.254.169.254";static AWS_EC2_METADATA_IPV6_ADDRESS="fd00:ec2::254";constructor(e){super(e);const t=(0,o.originalOrCamelOptions)(e),r=t.get("credential_source"),s=t.get("aws_security_credentials_supplier");if(!r&&!s)throw Error("A credential source or AWS security credentials supplier must be specified.");if(r&&s)throw Error("Only one of credential source or AWS security credentials supplier can be specified.");if(s)this.awsSecurityCredentialsSupplier=s,this.regionalCredVerificationUrl=c.#C,this.credentialSourceType="programmatic";else{const e=(0,o.originalOrCamelOptions)(r);this.environmentId=e.get("environment_id");const t=e.get("region_url"),s=e.get("url"),n=e.get("imdsv2_session_token_url");this.awsSecurityCredentialsSupplier=new i.DefaultAwsSecurityCredentialsSupplier({regionUrl:t,securityCredentialsUrl:s,imdsV2SessionTokenUrl:n}),this.regionalCredVerificationUrl=e.get("regional_cred_verification_url"),this.credentialSourceType="aws",this.validateEnvironmentId()}this.awsRequestSigner=null,this.region=""}validateEnvironmentId(){let e=this.environmentId?.match(/^(aws)(\d+)$/);if(e&&this.regionalCredVerificationUrl){if(1!==parseInt(e[2],10))throw Error(`aws version "${e[2]}" is not supported in the current build.`)}else throw Error('No valid AWS "credential_source" provided')}async retrieveSubjectToken(){this.awsRequestSigner||(this.region=await this.awsSecurityCredentialsSupplier.getAwsRegion(this.supplierContext),this.awsRequestSigner=new s.AwsRequestSigner(async()=>this.awsSecurityCredentialsSupplier.getAwsSecurityCredentials(this.supplierContext),this.region));let e=await this.awsRequestSigner.getRequestOptions({...c.RETRY_CONFIG,url:this.regionalCredVerificationUrl.replace("{region}",this.region),method:"POST"}),t=[];return a.Gaxios.mergeHeaders({"x-goog-cloud-target-resource":this.audience},e.headers).forEach((e,r)=>t.push({key:r,value:e})),encodeURIComponent(JSON.stringify({url:e.url,method:e.method,headers:t}))}}r.AwsClient=c},48797,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.InvalidSubjectTokenError=r.InvalidMessageFieldError=r.InvalidCodeFieldError=r.InvalidTokenTypeFieldError=r.InvalidExpirationTimeFieldError=r.InvalidSuccessFieldError=r.InvalidVersionFieldError=r.ExecutableResponseError=r.ExecutableResponse=void 0;let s="urn:ietf:params:oauth:token-type:saml2",n="urn:ietf:params:oauth:token-type:id_token",i="urn:ietf:params:oauth:token-type:jwt";r.ExecutableResponse=class{version;success;expirationTime;tokenType;errorCode;errorMessage;subjectToken;constructor(e){if(!e.version)throw new a("Executable response must contain a 'version' field.");if(void 0===e.success)throw new c("Executable response must contain a 'success' field.");if(this.version=e.version,this.success=e.success,this.success){if(this.expirationTime=e.expiration_time,this.tokenType=e.token_type,this.tokenType!==s&&this.tokenType!==n&&this.tokenType!==i)throw new l(`Executable response must contain a 'token_type' field when successful and it must be one of ${n}, ${i}, or ${s}.`);if(this.tokenType===s){if(!e.saml_response)throw new d(`Executable response must contain a 'saml_response' field when token_type=${s}.`);this.subjectToken=e.saml_response}else{if(!e.id_token)throw new d(`Executable response must contain a 'id_token' field when token_type=${n} or ${i}.`);this.subjectToken=e.id_token}}else{if(!e.code)throw new u("Executable response must contain a 'code' field when unsuccessful.");if(!e.message)throw new h("Executable response must contain a 'message' field when unsuccessful.");this.errorCode=e.code,this.errorMessage=e.message}}isValid(){return!this.isExpired()&&this.success}isExpired(){return void 0!==this.expirationTime&&this.expirationTime<Math.round(Date.now()/1e3)}};class o extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}r.ExecutableResponseError=o;class a extends o{}r.InvalidVersionFieldError=a;class c extends o{}r.InvalidSuccessFieldError=c,r.InvalidExpirationTimeFieldError=class extends o{};class l extends o{}r.InvalidTokenTypeFieldError=l;class u extends o{}r.InvalidCodeFieldError=u;class h extends o{}r.InvalidMessageFieldError=h;class d extends o{}r.InvalidSubjectTokenError=d},20336,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PluggableAuthHandler=r.ExecutableError=void 0;let s=e.r(48797),n=e.r(33405),i=e.r(22734);class o extends Error{code;constructor(e,t){super(`The executable failed with exit code: ${t} and error message: ${e}.`),this.code=t,Object.setPrototypeOf(this,new.target.prototype)}}r.ExecutableError=o;class a{commandComponents;timeoutMillis;outputFile;constructor(e){if(!e.command)throw Error("No command provided.");if(this.commandComponents=a.parseCommand(e.command),this.timeoutMillis=e.timeoutMillis,!this.timeoutMillis)throw Error("No timeoutMillis provided.");this.outputFile=e.outputFile}retrieveResponseFromExecutable(e){return new Promise((t,r)=>{let i=n.spawn(this.commandComponents[0],this.commandComponents.slice(1),{env:{...process.env,...Object.fromEntries(e)}}),a="";i.stdout.on("data",e=>{a+=e}),i.stderr.on("data",e=>{a+=e});let c=setTimeout(()=>(i.removeAllListeners(),i.kill(),r(Error("The executable failed to finish within the timeout specified."))),this.timeoutMillis);i.on("close",e=>{if(clearTimeout(c),0!==e)return r(new o(a,e.toString()));try{let e=JSON.parse(a),r=new s.ExecutableResponse(e);return t(r)}catch(e){if(e instanceof s.ExecutableResponseError)return r(e);return r(new s.ExecutableResponseError(`The executable returned an invalid response: ${a}`))}})})}async retrieveCachedResponse(){let e;if(!this.outputFile||0===this.outputFile.length)return;try{e=await i.promises.realpath(this.outputFile)}catch{return}if(!(await i.promises.lstat(e)).isFile())return;let t=await i.promises.readFile(e,{encoding:"utf8"});if(""!==t)try{let e=JSON.parse(t);if(new s.ExecutableResponse(e).isValid())return new s.ExecutableResponse(e);return}catch(e){if(e instanceof s.ExecutableResponseError)throw e;throw new s.ExecutableResponseError(`The output file contained an invalid response: ${t}`)}}static parseCommand(e){let t=e.match(/(?:[^\s"]+|"[^"]*")+/g);if(!t)throw Error(`Provided command: "${e}" could not be parsed.`);for(let e=0;e<t.length;e++)'"'===t[e][0]&&'"'===t[e].slice(-1)&&(t[e]=t[e].slice(1,-1));return t}}r.PluggableAuthHandler=a},23238,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PluggableAuthClient=r.ExecutableError=void 0;let s=e.r(6560),n=e.r(48797),i=e.r(20336);var o=e.r(20336);Object.defineProperty(r,"ExecutableError",{enumerable:!0,get:function(){return o.ExecutableError}});class a extends s.BaseExternalAccountClient{command;timeoutMillis;outputFile;handler;constructor(e){if(super(e),!e.credential_source.executable||(this.command=e.credential_source.executable.command,!this.command))throw Error('No valid Pluggable Auth "credential_source" provided.');if(void 0===e.credential_source.executable.timeout_millis)this.timeoutMillis=3e4;else if(this.timeoutMillis=e.credential_source.executable.timeout_millis,this.timeoutMillis<5e3||this.timeoutMillis>12e4)throw Error("Timeout must be between 5000120000 milliseconds.");this.outputFile=e.credential_source.executable.output_file,this.handler=new i.PluggableAuthHandler({command:this.command,timeoutMillis:this.timeoutMillis,outputFile:this.outputFile}),this.credentialSourceType="executable"}async retrieveSubjectToken(){let e;if("1"!==process.env.GOOGLE_EXTERNAL_ACCOUNT_ALLOW_EXECUTABLES)throw Error("Pluggable Auth executables need to be explicitly allowed to run by setting the GOOGLE_EXTERNAL_ACCOUNT_ALLOW_EXECUTABLES environment Variable to 1.");if(this.outputFile&&(e=await this.handler.retrieveCachedResponse()),!e){let t=new Map;t.set("GOOGLE_EXTERNAL_ACCOUNT_AUDIENCE",this.audience),t.set("GOOGLE_EXTERNAL_ACCOUNT_TOKEN_TYPE",this.subjectTokenType),t.set("GOOGLE_EXTERNAL_ACCOUNT_INTERACTIVE","0"),this.outputFile&&t.set("GOOGLE_EXTERNAL_ACCOUNT_OUTPUT_FILE",this.outputFile);let r=this.getServiceAccountEmail();r&&t.set("GOOGLE_EXTERNAL_ACCOUNT_IMPERSONATED_EMAIL",r),e=await this.handler.retrieveResponseFromExecutable(t)}if(e.version>1)throw Error("Version of executable is not currently supported, maximum supported version is 1.");if(!e.success)throw new i.ExecutableError(e.errorMessage,e.errorCode);if(this.outputFile&&!e.expirationTime)throw new n.InvalidExpirationTimeFieldError("The executable response must contain the `expiration_time` field for successful responses when an output_file has been specified in the configuration.");if(e.isExpired())throw Error("Executable response is expired.");return e.subjectToken}}r.PluggableAuthClient=a},45037,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ExternalAccountClient=void 0;let s=e.r(6560),n=e.r(76868),i=e.r(90220),o=e.r(23238);r.ExternalAccountClient=class{constructor(){throw Error("ExternalAccountClients should be initialized via: ExternalAccountClient.fromJSON(), directly via explicit constructors, eg. new AwsClient(options), new IdentityPoolClient(options), newPluggableAuthClientOptions, or via new GoogleAuth(options).getClient()")}static fromJSON(e){return e&&e.type===s.EXTERNAL_ACCOUNT_TYPE?e.credential_source?.environment_id?new i.AwsClient(e):e.credential_source?.executable?new o.PluggableAuthClient(e):new n.IdentityPoolClient(e):null}}},74158,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ExternalAccountAuthorizedUserClient=r.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE=void 0;let s=e.r(11656),n=e.r(46944),i=e.r(57612),o=e.r(88947),a=e.r(6560);r.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE="external_account_authorized_user";class c extends n.OAuthClientAuthHandler{#k;constructor(e){super(e),this.#k=e.tokenRefreshEndpoint}async refreshToken(e,t){let r={...c.RETRY_CONFIG,url:this.#k,method:"POST",headers:t,data:new URLSearchParams({grant_type:"refresh_token",refresh_token:e})};s.AuthClient.setMethodName(r,"refreshToken"),this.applyClientAuthenticationOptions(r);try{let e=await this.transporter.request(r),t=e.data;return t.res=e,t}catch(e){if(e instanceof i.GaxiosError&&e.response)throw(0,n.getErrorFromOAuthErrorResponse)(e.response.data,e);throw e}}}class l extends s.AuthClient{cachedAccessToken;externalAccountAuthorizedUserHandler;refreshToken;constructor(e){super(e),e.universe_domain&&(this.universeDomain=e.universe_domain),this.refreshToken=e.refresh_token;const t={confidentialClientType:"basic",clientId:e.client_id,clientSecret:e.client_secret};this.externalAccountAuthorizedUserHandler=new c({tokenRefreshEndpoint:e.token_url??"https://sts.{universeDomain}/v1/oauthtoken".replace("{universeDomain}",this.universeDomain),transporter:this.transporter,clientAuthentication:t}),this.cachedAccessToken=null,this.quotaProjectId=e.quota_project_id,"number"!=typeof e?.eagerRefreshThresholdMillis?this.eagerRefreshThresholdMillis=a.EXPIRATION_TIME_OFFSET:this.eagerRefreshThresholdMillis=e.eagerRefreshThresholdMillis,this.forceRefreshOnFailure=!!e?.forceRefreshOnFailure}async getAccessToken(){return(!this.cachedAccessToken||this.isExpired(this.cachedAccessToken))&&await this.refreshAccessTokenAsync(),{token:this.cachedAccessToken.access_token,res:this.cachedAccessToken.res}}async getRequestHeaders(){let e=await this.getAccessToken(),t=new Headers({authorization:`Bearer ${e.token}`});return this.addSharedMetadataHeaders(t)}request(e,t){if(!t)return this.requestAsync(e);this.requestAsync(e).then(e=>t(null,e),e=>t(e,e.response))}async requestAsync(e,t=!1){let r;try{let t=await this.getRequestHeaders();e.headers=i.Gaxios.mergeHeaders(e.headers),this.addUserProjectAndAuthHeaders(e.headers,t),r=await this.transporter.request(e)}catch(s){let r=s.response;if(r){let s=r.status,n=r.config.data instanceof o.Readable;if(!t&&(401===s||403===s)&&!n&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync(e,!0)}throw s}return r}async refreshAccessTokenAsync(){let e=await this.externalAccountAuthorizedUserHandler.refreshToken(this.refreshToken);return this.cachedAccessToken={access_token:e.access_token,expiry_date:new Date().getTime()+1e3*e.expires_in,res:e.res},void 0!==e.refresh_token&&(this.refreshToken=e.refresh_token),this.cachedAccessToken}isExpired(e){let t=new Date().getTime();return!!e.expiry_date&&t>=e.expiry_date-this.eagerRefreshThresholdMillis}}r.ExternalAccountAuthorizedUserClient=l},64794,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.GoogleAuth=r.GoogleAuthExceptionMessages=void 0;let s=e.r(33405),n=e.r(22734),i=e.r(57612),o=e.r(82e3),a=e.r(46786),c=e.r(14747),l=e.r(1426),u=e.r(70814),h=e.r(80732),d=e.r(80243),f=e.r(24553),p=e.r(16260),g=e.r(36126),y=e.r(45037),m=e.r(6560),w=e.r(11656),_=e.r(74158),b=e.r(15733);r.GoogleAuthExceptionMessages={API_KEY_WITH_CREDENTIALS:"API Keys and Credentials are mutually exclusive authentication methods and cannot be used together.",NO_PROJECT_ID_FOUND:"Unable to detect a Project Id in the current environment. \nTo learn more about authentication and Google APIs, visit: \nhttps://cloud.google.com/docs/authentication/getting-started",NO_CREDENTIALS_FOUND:"Unable to find credentials in current environment. \nTo learn more about authentication and Google APIs, visit: \nhttps://cloud.google.com/docs/authentication/getting-started",NO_ADC_FOUND:"Could not load the default credentials. Browse to https://cloud.google.com/docs/authentication/getting-started for more information.",NO_UNIVERSE_DOMAIN_FOUND:"Unable to detect a Universe Domain in the current environment.\nTo learn more about Universe Domain retrieval, visit: \nhttps://cloud.google.com/compute/docs/metadata/predefined-metadata-keys"},r.GoogleAuth=class{checkIsGCE=void 0;useJWTAccessWithScope;defaultServicePath;get isGCE(){return this.checkIsGCE}_findProjectIdPromise;_cachedProjectId;jsonContent=null;apiKey;cachedCredential=null;#O=null;defaultScopes;keyFilename;scopes;clientOptions={};constructor(e={}){if(this._cachedProjectId=e.projectId||null,this.cachedCredential=e.authClient||null,this.keyFilename=e.keyFilename||e.keyFile,this.scopes=e.scopes,this.clientOptions=e.clientOptions||{},this.jsonContent=e.credentials||null,this.apiKey=e.apiKey||this.clientOptions.apiKey||null,this.apiKey&&(this.jsonContent||this.clientOptions.credentials))throw RangeError(r.GoogleAuthExceptionMessages.API_KEY_WITH_CREDENTIALS);e.universeDomain&&(this.clientOptions.universeDomain=e.universeDomain)}setGapicJWTValues(e){e.defaultServicePath=this.defaultServicePath,e.useJWTAccessWithScope=this.useJWTAccessWithScope,e.defaultScopes=this.defaultScopes}getProjectId(e){if(!e)return this.getProjectIdAsync();this.getProjectIdAsync().then(t=>e(null,t),e)}async getProjectIdOptional(){try{return await this.getProjectId()}catch(e){if(e instanceof Error&&e.message===r.GoogleAuthExceptionMessages.NO_PROJECT_ID_FOUND)return null;throw e}}async findAndCacheProjectId(){let e=null;if(e||=await this.getProductionProjectId(),e||=await this.getFileProjectId(),e||=await this.getDefaultServiceProjectId(),e||=await this.getGCEProjectId(),e||=await this.getExternalAccountClientProjectId())return this._cachedProjectId=e,e;throw Error(r.GoogleAuthExceptionMessages.NO_PROJECT_ID_FOUND)}async getProjectIdAsync(){return this._cachedProjectId?this._cachedProjectId:(this._findProjectIdPromise||(this._findProjectIdPromise=this.findAndCacheProjectId()),this._findProjectIdPromise)}async getUniverseDomainFromMetadataServer(){let e;try{e=await o.universe("universe-domain"),e||=w.DEFAULT_UNIVERSE}catch(t){if(t&&t?.response?.status===404)e=w.DEFAULT_UNIVERSE;else throw t}return e}async getUniverseDomain(){let e=(0,b.originalOrCamelOptions)(this.clientOptions).get("universe_domain");try{e??=(await this.getClient()).universeDomain}catch{e??=w.DEFAULT_UNIVERSE}return e}getAnyScopes(){return this.scopes||this.defaultScopes}getApplicationDefault(e={},t){let r;if("function"==typeof e?t=e:r=e,!t)return this.getApplicationDefaultAsync(r);this.getApplicationDefaultAsync(r).then(e=>t(null,e.credential,e.projectId),t)}async getApplicationDefaultAsync(e={}){let t;if(this.cachedCredential)return await this.#R(this.cachedCredential,null);if((t=await this._tryGetApplicationCredentialsFromEnvironmentVariable(e))||(t=await this._tryGetApplicationCredentialsFromWellKnownFile(e)))return t instanceof f.JWT?t.scopes=this.scopes:t instanceof m.BaseExternalAccountClient&&(t.scopes=this.getAnyScopes()),await this.#R(t);if(await this._checkIsGCE())return e.scopes=this.getAnyScopes(),await this.#R(new u.Compute(e));throw Error(r.GoogleAuthExceptionMessages.NO_ADC_FOUND)}async #R(e,t=process.env.GOOGLE_CLOUD_QUOTA_PROJECT||null){let r=await this.getProjectIdOptional();return t&&(e.quotaProjectId=t),this.cachedCredential=e,{credential:e,projectId:r}}async _checkIsGCE(){return void 0===this.checkIsGCE&&(this.checkIsGCE=o.getGCPResidency()||await o.isAvailable()),this.checkIsGCE}async _tryGetApplicationCredentialsFromEnvironmentVariable(e){let t=process.env.GOOGLE_APPLICATION_CREDENTIALS||process.env.google_application_credentials;if(!t||0===t.length)return null;try{return this._getApplicationCredentialsFromFilePath(t,e)}catch(e){throw e instanceof Error&&(e.message=`Unable to read the credential file specified by the GOOGLE_APPLICATION_CREDENTIALS environment variable: ${e.message}`),e}}async _tryGetApplicationCredentialsFromWellKnownFile(e){let t=null;if(this._isWindows())t=process.env.APPDATA;else{let e=process.env.HOME;e&&(t=c.join(e,".config"))}return(t&&(t=c.join(t,"gcloud","application_default_credentials.json"),n.existsSync(t)||(t=null)),t)?await this._getApplicationCredentialsFromFilePath(t,e):null}async _getApplicationCredentialsFromFilePath(e,t={}){if(!e||0===e.length)throw Error("The file path is invalid.");try{if(e=n.realpathSync(e),!n.lstatSync(e).isFile())throw Error()}catch(t){throw t instanceof Error&&(t.message=`The file at ${e} does not exist, or it is not a file. ${t.message}`),t}let r=n.createReadStream(e);return this.fromStream(r,t)}fromImpersonatedJSON(e){if(!e)throw Error("Must pass in a JSON object containing an  impersonated refresh token");if(e.type!==g.IMPERSONATED_ACCOUNT_TYPE)throw Error(`The incoming JSON object does not have the "${g.IMPERSONATED_ACCOUNT_TYPE}" type`);if(!e.source_credentials)throw Error("The incoming JSON object does not contain a source_credentials field");if(!e.service_account_impersonation_url)throw Error("The incoming JSON object does not contain a service_account_impersonation_url field");let t=this.fromJSON(e.source_credentials);if(e.service_account_impersonation_url?.length>256)throw RangeError(`Target principal is too long: ${e.service_account_impersonation_url}`);let r=/(?<target>[^/]+):(generateAccessToken|generateIdToken)$/.exec(e.service_account_impersonation_url)?.groups?.target;if(!r)throw RangeError(`Cannot extract target principal from ${e.service_account_impersonation_url}`);let s=(this.scopes||e.scopes||this.defaultScopes)??[];return new g.Impersonated({...e,sourceClient:t,targetPrincipal:r,targetScopes:Array.isArray(s)?s:[s]})}fromJSON(e,t={}){let r,s=(0,b.originalOrCamelOptions)(t).get("universe_domain");return e.type===p.USER_REFRESH_ACCOUNT_TYPE?(r=new p.UserRefreshClient(t)).fromJSON(e):e.type===g.IMPERSONATED_ACCOUNT_TYPE?r=this.fromImpersonatedJSON(e):e.type===m.EXTERNAL_ACCOUNT_TYPE?(r=y.ExternalAccountClient.fromJSON({...e,...t})).scopes=this.getAnyScopes():e.type===_.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE?r=new _.ExternalAccountAuthorizedUserClient({...e,...t}):(t.scopes=this.scopes,r=new f.JWT(t),this.setGapicJWTValues(r),r.fromJSON(e)),s&&(r.universeDomain=s),r}_cacheClientFromJSON(e,t){let r=this.fromJSON(e,t);return this.jsonContent=e,this.cachedCredential=r,r}fromStream(e,t={},r){let s={};if("function"==typeof t?r=t:s=t,!r)return this.fromStreamAsync(e,s);this.fromStreamAsync(e,s).then(e=>r(null,e),r)}fromStreamAsync(e,t){return new Promise((r,s)=>{if(!e)throw Error("Must pass in a stream containing the Google auth settings.");let n=[];e.setEncoding("utf8").on("error",s).on("data",e=>n.push(e)).on("end",()=>{try{try{let e=JSON.parse(n.join("")),s=this._cacheClientFromJSON(e,t);return r(s)}catch(t){if(!this.keyFilename)throw t;let e=new f.JWT({...this.clientOptions,keyFile:this.keyFilename});return this.cachedCredential=e,this.setGapicJWTValues(e),r(e)}}catch(e){return s(e)}})})}fromAPIKey(e,t={}){return new f.JWT({...t,apiKey:e})}_isWindows(){let e=a.platform();return!!e&&!!(e.length>=3)&&"win"===e.substring(0,3).toLowerCase()}async getDefaultServiceProjectId(){return new Promise(e=>{(0,s.exec)("gcloud config config-helper --format json",(t,r)=>{if(!t&&r)try{let t=JSON.parse(r).configuration.properties.core.project;e(t);return}catch(e){}e(null)})})}getProductionProjectId(){return process.env.GCLOUD_PROJECT||process.env.GOOGLE_CLOUD_PROJECT||process.env.gcloud_project||process.env.google_cloud_project}async getFileProjectId(){if(this.cachedCredential)return this.cachedCredential.projectId;if(this.keyFilename){let e=await this.getClient();if(e&&e.projectId)return e.projectId}let e=await this._tryGetApplicationCredentialsFromEnvironmentVariable();return e?e.projectId:null}async getExternalAccountClientProjectId(){if(!this.jsonContent||this.jsonContent.type!==m.EXTERNAL_ACCOUNT_TYPE)return null;let e=await this.getClient();return await e.getProjectId()}async getGCEProjectId(){try{return await o.project("project-id")}catch(e){return null}}getCredentials(e){if(!e)return this.getCredentialsAsync();this.getCredentialsAsync().then(t=>e(null,t),e)}async getCredentialsAsync(){let e=await this.getClient();if(e instanceof g.Impersonated)return{client_email:e.getTargetPrincipal()};if(e instanceof m.BaseExternalAccountClient){let t=e.getServiceAccountEmail();if(t)return{client_email:t,universe_domain:e.universeDomain}}if(this.jsonContent)return{client_email:this.jsonContent.client_email,private_key:this.jsonContent.private_key,universe_domain:this.jsonContent.universe_domain};if(await this._checkIsGCE()){let[e,t]=await Promise.all([o.instance("service-accounts/default/email"),this.getUniverseDomain()]);return{client_email:e,universe_domain:t}}throw Error(r.GoogleAuthExceptionMessages.NO_CREDENTIALS_FOUND)}async getClient(){if(this.cachedCredential)return this.cachedCredential;this.#O=this.#O||this.#P();try{return await this.#O}finally{this.#O=null}}async #P(){if(this.jsonContent)return this._cacheClientFromJSON(this.jsonContent,this.clientOptions);if(this.keyFilename){let e=c.resolve(this.keyFilename),t=n.createReadStream(e);return await this.fromStreamAsync(t,this.clientOptions)}if(this.apiKey){let e=await this.fromAPIKey(this.apiKey,this.clientOptions);e.scopes=this.scopes;let{credential:t}=await this.#R(e);return t}{let{credential:e}=await this.getApplicationDefaultAsync(this.clientOptions);return e}}async getIdTokenClient(e){let t=await this.getClient();if(!("fetchIdToken"in t))throw Error("Cannot fetch ID token in this environment, use GCE or set the GOOGLE_APPLICATION_CREDENTIALS environment variable to a service account credentials JSON file.");return new h.IdTokenClient({targetAudience:e,idTokenProvider:t})}async getAccessToken(){let e=await this.getClient();return(await e.getAccessToken()).token}async getRequestHeaders(e){return(await this.getClient()).getRequestHeaders(e)}async authorizeRequest(e={}){let t=e.url,r=await this.getClient(),s=await r.getRequestHeaders(t);return e.headers=i.Gaxios.mergeHeaders(e.headers,s),e}async fetch(...e){return(await this.getClient()).fetch(...e)}async request(e){return(await this.getClient()).request(e)}getEnv(){return(0,d.getEnv)()}async sign(e,t){let r=await this.getClient(),s=await this.getUniverseDomain();if(t=t||`https://iamcredentials.${s}/v1/projects/-/serviceAccounts/`,r instanceof g.Impersonated)return(await r.sign(e)).signedBlob;let n=(0,l.createCrypto)();if(r instanceof f.JWT&&r.key)return await n.sign(r.key,e);let i=await this.getCredentials();if(!i.client_email)throw Error("Cannot sign data without `client_email`.");return this.signBlob(n,i.client_email,e,t)}async signBlob(e,t,r,s){let n=new URL(s+`${t}:signBlob`);return(await this.request({method:"POST",url:n.href,data:{payload:e.encodeBase64StringUtf8(r)},retry:!0,retryConfig:{httpMethodsToRetry:["POST"]}})).data.signedBlob}}},3994,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.IAMAuth=void 0,r.IAMAuth=class{selector;token;constructor(e,t){this.selector=e,this.token=t,this.selector=e,this.token=t}getRequestHeaders(){return{"x-goog-iam-authority-selector":this.selector,"x-goog-iam-authorization-token":this.token}}}},56777,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DownscopedClient=r.EXPIRATION_TIME_OFFSET=r.MAX_ACCESS_BOUNDARY_RULES_COUNT=void 0;let s=e.r(57612),n=e.r(88947),i=e.r(11656),o=e.r(5332);r.MAX_ACCESS_BOUNDARY_RULES_COUNT=10,r.EXPIRATION_TIME_OFFSET=3e5;class a extends i.AuthClient{authClient;credentialAccessBoundary;cachedDownscopedAccessToken;stsCredential;constructor(e,t={accessBoundary:{accessBoundaryRules:[]}}){if(super(e instanceof i.AuthClient?{}:e),e instanceof i.AuthClient?(this.authClient=e,this.credentialAccessBoundary=t):(this.authClient=e.authClient,this.credentialAccessBoundary=e.credentialAccessBoundary),0===this.credentialAccessBoundary.accessBoundary.accessBoundaryRules.length)throw Error("At least one access boundary rule needs to be defined.");if(this.credentialAccessBoundary.accessBoundary.accessBoundaryRules.length>r.MAX_ACCESS_BOUNDARY_RULES_COUNT)throw Error(`The provided access boundary has more than ${r.MAX_ACCESS_BOUNDARY_RULES_COUNT} access boundary rules.`);for(const e of this.credentialAccessBoundary.accessBoundary.accessBoundaryRules)if(0===e.availablePermissions.length)throw Error("At least one permission should be defined in access boundary rules.");this.stsCredential=new o.StsCredentials({tokenExchangeEndpoint:`https://sts.${this.universeDomain}/v1/token`}),this.cachedDownscopedAccessToken=null}setCredentials(e){if(!e.expiry_date)throw Error("The access token expiry_date field is missing in the provided credentials.");super.setCredentials(e),this.cachedDownscopedAccessToken=e}async getAccessToken(){return(!this.cachedDownscopedAccessToken||this.isExpired(this.cachedDownscopedAccessToken))&&await this.refreshAccessTokenAsync(),{token:this.cachedDownscopedAccessToken.access_token,expirationTime:this.cachedDownscopedAccessToken.expiry_date,res:this.cachedDownscopedAccessToken.res}}async getRequestHeaders(){let e=await this.getAccessToken(),t=new Headers({authorization:`Bearer ${e.token}`});return this.addSharedMetadataHeaders(t)}request(e,t){if(!t)return this.requestAsync(e);this.requestAsync(e).then(e=>t(null,e),e=>t(e,e.response))}async requestAsync(e,t=!1){let r;try{let t=await this.getRequestHeaders();e.headers=s.Gaxios.mergeHeaders(e.headers),this.addUserProjectAndAuthHeaders(e.headers,t),r=await this.transporter.request(e)}catch(s){let r=s.response;if(r){let s=r.status,i=r.config.data instanceof n.Readable;if(!t&&(401===s||403===s)&&!i&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync(e,!0)}throw s}return r}async refreshAccessTokenAsync(){let e=(await this.authClient.getAccessToken()).token,t=await this.stsCredential.exchangeToken({grantType:"urn:ietf:params:oauth:grant-type:token-exchange",requestedTokenType:"urn:ietf:params:oauth:token-type:access_token",subjectToken:e,subjectTokenType:"urn:ietf:params:oauth:token-type:access_token"},void 0,this.credentialAccessBoundary),r=this.authClient.credentials?.expiry_date||null,s=t.expires_in?new Date().getTime()+1e3*t.expires_in:r;return this.cachedDownscopedAccessToken={access_token:t.access_token,expiry_date:s,res:t.res},this.credentials={},Object.assign(this.credentials,this.cachedDownscopedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedDownscopedAccessToken.expiry_date,access_token:this.cachedDownscopedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedDownscopedAccessToken}isExpired(e){let t=new Date().getTime();return!!e.expiry_date&&t>=e.expiry_date-this.eagerRefreshThresholdMillis}}r.DownscopedClient=a},53534,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PassThroughClient=void 0;let s=e.r(11656);class n extends s.AuthClient{async request(e){return this.transporter.request(e)}async getAccessToken(){return{}}async getRequestHeaders(){return new Headers}}r.PassThroughClient=n},47334,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.GoogleAuth=r.auth=r.PassThroughClient=r.ExternalAccountAuthorizedUserClient=r.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE=r.ExecutableError=r.PluggableAuthClient=r.DownscopedClient=r.BaseExternalAccountClient=r.ExternalAccountClient=r.IdentityPoolClient=r.AwsRequestSigner=r.AwsClient=r.UserRefreshClient=r.LoginTicket=r.ClientAuthentication=r.OAuth2Client=r.CodeChallengeMethod=r.Impersonated=r.JWT=r.JWTAccess=r.IdTokenClient=r.IAMAuth=r.GCPEnv=r.Compute=r.DEFAULT_UNIVERSE=r.AuthClient=r.gaxios=r.gcpMetadata=void 0;let s=e.r(64794);Object.defineProperty(r,"GoogleAuth",{enumerable:!0,get:function(){return s.GoogleAuth}}),r.gcpMetadata=e.r(82e3),r.gaxios=e.r(57612);var n=e.r(11656);Object.defineProperty(r,"AuthClient",{enumerable:!0,get:function(){return n.AuthClient}}),Object.defineProperty(r,"DEFAULT_UNIVERSE",{enumerable:!0,get:function(){return n.DEFAULT_UNIVERSE}});var i=e.r(70814);Object.defineProperty(r,"Compute",{enumerable:!0,get:function(){return i.Compute}});var o=e.r(80243);Object.defineProperty(r,"GCPEnv",{enumerable:!0,get:function(){return o.GCPEnv}});var a=e.r(3994);Object.defineProperty(r,"IAMAuth",{enumerable:!0,get:function(){return a.IAMAuth}});var c=e.r(80732);Object.defineProperty(r,"IdTokenClient",{enumerable:!0,get:function(){return c.IdTokenClient}});var l=e.r(10247);Object.defineProperty(r,"JWTAccess",{enumerable:!0,get:function(){return l.JWTAccess}});var u=e.r(24553);Object.defineProperty(r,"JWT",{enumerable:!0,get:function(){return u.JWT}});var h=e.r(36126);Object.defineProperty(r,"Impersonated",{enumerable:!0,get:function(){return h.Impersonated}});var d=e.r(701);Object.defineProperty(r,"CodeChallengeMethod",{enumerable:!0,get:function(){return d.CodeChallengeMethod}}),Object.defineProperty(r,"OAuth2Client",{enumerable:!0,get:function(){return d.OAuth2Client}}),Object.defineProperty(r,"ClientAuthentication",{enumerable:!0,get:function(){return d.ClientAuthentication}});var f=e.r(42602);Object.defineProperty(r,"LoginTicket",{enumerable:!0,get:function(){return f.LoginTicket}});var p=e.r(16260);Object.defineProperty(r,"UserRefreshClient",{enumerable:!0,get:function(){return p.UserRefreshClient}});var g=e.r(90220);Object.defineProperty(r,"AwsClient",{enumerable:!0,get:function(){return g.AwsClient}});var y=e.r(87573);Object.defineProperty(r,"AwsRequestSigner",{enumerable:!0,get:function(){return y.AwsRequestSigner}});var m=e.r(76868);Object.defineProperty(r,"IdentityPoolClient",{enumerable:!0,get:function(){return m.IdentityPoolClient}});var w=e.r(45037);Object.defineProperty(r,"ExternalAccountClient",{enumerable:!0,get:function(){return w.ExternalAccountClient}});var _=e.r(6560);Object.defineProperty(r,"BaseExternalAccountClient",{enumerable:!0,get:function(){return _.BaseExternalAccountClient}});var b=e.r(56777);Object.defineProperty(r,"DownscopedClient",{enumerable:!0,get:function(){return b.DownscopedClient}});var A=e.r(23238);Object.defineProperty(r,"PluggableAuthClient",{enumerable:!0,get:function(){return A.PluggableAuthClient}}),Object.defineProperty(r,"ExecutableError",{enumerable:!0,get:function(){return A.ExecutableError}});var E=e.r(74158);Object.defineProperty(r,"EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE",{enumerable:!0,get:function(){return E.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE}}),Object.defineProperty(r,"ExternalAccountAuthorizedUserClient",{enumerable:!0,get:function(){return E.ExternalAccountAuthorizedUserClient}});var v=e.r(53534);Object.defineProperty(r,"PassThroughClient",{enumerable:!0,get:function(){return v.PassThroughClient}}),r.auth=new s.GoogleAuth},77526,e=>{"use strict";class t extends Error{response;request;options;constructor(e,t,r){const s=e.status||0===e.status?e.status:"",n=e.statusText??"",i=`${s} ${n}`.trim(),o=i?`status code ${i}`:"an unknown error";super(`Request failed with ${o}: ${t.method} ${t.url}`),this.name="HTTPError",this.response=e,this.request=t,this.options=r}}class r extends Error{name="NonError";value;constructor(e){let t="Non-error value was thrown";try{"string"==typeof e?t=e:e&&"object"==typeof e&&"message"in e&&"string"==typeof e.message&&(t=e.message)}catch{}super(t),this.value=e}}class s extends Error{name="ForceRetryError";customDelay;code;customRequest;constructor(e){const t=e?.cause?e.cause instanceof Error?e.cause:new r(e.cause):void 0;super(e?.code?`Forced retry: ${e.code}`:"Forced retry",t?{cause:t}:void 0),this.customDelay=e?.delay,this.code=e?.code,this.customRequest=e?.request}}let n=(()=>{let e=!1,t=!1,r="function"==typeof globalThis.Request;if("function"==typeof globalThis.ReadableStream&&r)try{t=new globalThis.Request("https://empty.invalid",{body:new globalThis.ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type")}catch(e){if(e instanceof Error&&"unsupported BodyInit type"===e.message)return!1;throw e}return e&&!t})(),i="function"==typeof globalThis.AbortController,o="function"==typeof globalThis.AbortSignal&&"function"==typeof globalThis.AbortSignal.any,a="function"==typeof globalThis.ReadableStream,c="function"==typeof globalThis.FormData,l=["get","post","put","patch","head","delete"],u={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*",bytes:"*/*"},h=new TextEncoder().encode("------WebKitFormBoundaryaxpyiPgbbPti10Rw").length,d=Symbol("stop");class f{options;constructor(e){this.options=e}}let p=e=>new f(e),g={json:!0,parseJson:!0,stringifyJson:!0,searchParams:!0,prefixUrl:!0,retry:!0,timeout:!0,hooks:!0,throwHttpErrors:!0,onDownloadProgress:!0,onUploadProgress:!0,fetch:!0,context:!0},y={next:!0},m={method:!0,headers:!0,body:!0,mode:!0,credentials:!0,cache:!0,redirect:!0,referrer:!0,referrerPolicy:!0,integrity:!0,keepalive:!0,signal:!0,window:!0,duplex:!0},w=(e,t,r)=>{let s,n=0;return e.pipeThrough(new TransformStream({transform(e,i){if(i.enqueue(e),s){n+=s.byteLength;let e=0===t?0:n/t;e>=1&&(e=1-Number.EPSILON),r?.({percent:e,totalBytes:Math.max(t,n),transferredBytes:n},s)}s=e},flush(){s&&(n+=s.byteLength,r?.({percent:1,totalBytes:Math.max(t,n),transferredBytes:n},s))}}))},_=e=>null!==e&&"object"==typeof e,b=(...e)=>{for(let t of e)if((!_(t)||Array.isArray(t))&&void 0!==t)throw TypeError("The `options` argument must be an object");return S({},...e)},A=(e={},t={})=>{let r=new globalThis.Headers(e),s=t instanceof globalThis.Headers;for(let[e,n]of new globalThis.Headers(t).entries())s&&"undefined"===n||void 0===n?r.delete(e):r.set(e,n);return r};function E(e,t,r){return Object.hasOwn(t,r)&&void 0===t[r]?[]:S(e[r]??[],t[r]??[])}let v=(e={},t={})=>({beforeRequest:E(e,t,"beforeRequest"),beforeRetry:E(e,t,"beforeRetry"),afterResponse:E(e,t,"afterResponse"),beforeError:E(e,t,"beforeError")}),T=(e,t)=>{let r=new URLSearchParams;for(let s of[e,t])if(void 0!==s)if(s instanceof URLSearchParams)for(let[e,t]of s.entries())r.append(e,t);else if(Array.isArray(s))for(let e of s){if(!Array.isArray(e)||2!==e.length)throw TypeError("Array search parameters must be provided in [[key, value], ...] format");r.append(String(e[0]),String(e[1]))}else if(_(s))for(let[e,t]of Object.entries(s))void 0!==t&&r.append(e,String(t));else for(let[e,t]of new URLSearchParams(s).entries())r.append(e,t);return r},S=(...e)=>{let t,r={},s={},n={},i=[];for(let o of e)if(Array.isArray(o))Array.isArray(r)||(r=[]),r=[...r,...o];else if(_(o)){for(let[e,s]of Object.entries(o)){if("signal"===e&&s instanceof globalThis.AbortSignal){i.push(s);continue}if("context"===e){if(null!=s&&(!_(s)||Array.isArray(s)))throw TypeError("The `context` option must be an object");r={...r,context:null==s?{}:{...r.context,...s}};continue}if("searchParams"===e){t=null==s?void 0:void 0===t?s:T(t,s);continue}_(s)&&e in r&&(s=S(r[e],s)),r={...r,[e]:s}}_(o.hooks)&&(n=v(n,o.hooks),r.hooks=n),_(o.headers)&&(s=A(s,o.headers),r.headers=s)}return void 0!==t&&(r.searchParams=t),i.length>0&&(1===i.length?r.signal=i[0]:o?r.signal=AbortSignal.any(i):r.signal=i.at(-1)),r},C={limit:2,methods:["get","put","head","delete","options","trace"],statusCodes:[408,413,429,500,502,503,504],afterStatusCodes:[413,429,503],maxRetryAfter:1/0,backoffLimit:1/0,delay:e=>.3*2**(e-1)*1e3,jitter:void 0,retryOnTimeout:!1};class k extends Error{request;constructor(e){super(`Request timed out: ${e.method} ${e.url}`),this.name="TimeoutError",this.request=e}}async function O(e,t,r,s){return new Promise((n,i)=>{let o=setTimeout(()=>{r&&r.abort(),i(new k(e))},s.timeout);s.fetch(e,t).then(n).catch(i).then(()=>{clearTimeout(o)})})}async function R(e,{signal:t}){return new Promise((r,s)=>{function n(){clearTimeout(i),s(t.reason)}t&&(t.throwIfAborted(),t.addEventListener("abort",n,{once:!0}));let i=setTimeout(()=>{t?.removeEventListener("abort",n),r()},e)})}class P{static create(e,r){let n=new P(e,r),i=async()=>{if("number"==typeof n.#j.timeout&&n.#j.timeout>0x7fffffff)throw RangeError("The `timeout` option cannot be greater than 2147483647");await Promise.resolve();let e=await n.#c();for(let t of n.#j.hooks.afterResponse){let r,i=n.#I(e.clone());try{r=await t(n.request,n.#x(),i,{retryCount:n.#N})}catch(t){throw n.#D(i),n.#D(e),t}if(r instanceof f)throw n.#D(i),n.#D(e),new s(r.options);let o=r instanceof globalThis.Response?r:e;i!==o&&n.#D(i),e!==o&&n.#D(e),e=o}if(n.#I(e),!e.ok&&("function"==typeof n.#j.throwHttpErrors?n.#j.throwHttpErrors(e.status):n.#j.throwHttpErrors)){let r=new t(e,n.request,n.#x());for(let e of n.#j.hooks.beforeError)r=await e(r,{retryCount:n.#N});throw r}if(n.#j.onDownloadProgress){if("function"!=typeof n.#j.onDownloadProgress)throw TypeError("The `onDownloadProgress` option must be a function");if(!a)throw Error("Streams are not supported in your environment. `ReadableStream` is missing.");let t=e.clone();n.#D(e);var r=n.#j.onDownloadProgress;if(!t.body)return t;if(204===t.status)return new Response(null,{status:t.status,statusText:t.statusText,headers:t.headers});let s=Math.max(0,Number(t.headers.get("content-length"))||0);return new Response(w(t.body,s,r),{status:t.status,statusText:t.statusText,headers:t.headers})}return e},o=n.#U(i).finally(()=>{let e=n.#F;n.#M(e?.body??void 0),n.#M(n.request.body??void 0)});for(let[e,t]of Object.entries(u))("bytes"!==e||"function"==typeof globalThis.Response?.prototype?.bytes)&&(o[e]=async()=>{n.request.headers.set("accept",n.request.headers.get("accept")||t);let s=await o;if("json"===e){if(204===s.status)return"";let e=await s.text();return""===e?"":r.parseJson?r.parseJson(e):JSON.parse(e)}return s[e]()});return o}static #L(e){return!e||"object"!=typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.fromEntries(Object.entries(e).filter(([,e])=>void 0!==e))}request;#G;#N=0;#$;#j;#F;#B;#q;constructor(e,t={}){if(this.#$=e,this.#j={...t,headers:A(this.#$.headers,t.headers),hooks:v({beforeRequest:[],beforeRetry:[],beforeError:[],afterResponse:[]},t.hooks),method:(e=>l.includes(e)?e.toUpperCase():e)(t.method??this.#$.method??"GET"),prefixUrl:String(t.prefixUrl||""),retry:((e={})=>{if("number"==typeof e)return{...C,limit:e};if(e.methods&&!Array.isArray(e.methods))throw Error("retry.methods must be an array");if(e.methods&&=e.methods.map(e=>e.toLowerCase()),e.statusCodes&&!Array.isArray(e.statusCodes))throw Error("retry.statusCodes must be an array");let t=Object.fromEntries(Object.entries(e).filter(([,e])=>void 0!==e));return{...C,...t}})(t.retry),throwHttpErrors:t.throwHttpErrors??!0,timeout:t.timeout??1e4,fetch:t.fetch??globalThis.fetch.bind(globalThis),context:t.context??{}},"string"!=typeof this.#$&&!(this.#$ instanceof URL||this.#$ instanceof globalThis.Request))throw TypeError("`input` must be a string, URL, or Request");if(this.#j.prefixUrl&&"string"==typeof this.#$){if(this.#$.startsWith("/"))throw Error("`input` must not begin with a slash when using `prefixUrl`");this.#j.prefixUrl.endsWith("/")||(this.#j.prefixUrl+="/"),this.#$=this.#j.prefixUrl+this.#$}i&&o&&(this.#B=this.#j.signal??this.#$.signal,this.#G=new globalThis.AbortController,this.#j.signal=this.#B?AbortSignal.any([this.#B,this.#G.signal]):this.#G.signal),n&&(this.#j.duplex="half"),void 0!==this.#j.json&&(this.#j.body=this.#j.stringifyJson?.(this.#j.json)??JSON.stringify(this.#j.json),this.#j.headers.set("content-type",this.#j.headers.get("content-type")??"application/json"));const r=t.headers&&new globalThis.Headers(t.headers).has("content-type");if(this.#$ instanceof globalThis.Request&&(c&&this.#j.body instanceof globalThis.FormData||this.#j.body instanceof URLSearchParams)&&!r&&this.#j.headers.delete("content-type"),this.request=new globalThis.Request(this.#$,this.#j),(e=>void 0!==e&&(Array.isArray(e)?e.length>0:e instanceof URLSearchParams?e.size>0:"object"==typeof e?Object.keys(e).length>0:"string"==typeof e?e.trim().length>0:!!e))(this.#j.searchParams)){const e="string"==typeof this.#j.searchParams?this.#j.searchParams.replace(/^\?/,""):new URLSearchParams(P.#L(this.#j.searchParams)).toString(),t=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,"?"+e);this.request=new globalThis.Request(t,this.#j)}if(this.#j.onUploadProgress){if("function"!=typeof this.#j.onUploadProgress)throw TypeError("The `onUploadProgress` option must be a function");if(!n)throw Error("Request streams are not supported in your environment. The `duplex` option for `Request` is not available.");this.request=this.#H(this.request,this.#j.body??void 0)}}#V(){let e=this.#j.retry.delay(this.#N),t=e;return!0===this.#j.retry.jitter?t=Math.random()*e:"function"==typeof this.#j.retry.jitter&&(!Number.isFinite(t=this.#j.retry.jitter(e))||t<0)&&(t=e),Math.min(this.#j.retry.backoffLimit??1/0,t)}async #J(e){if(this.#N++,this.#N>this.#j.retry.limit)throw e;let n=e instanceof Error?e:new r(e);if(n instanceof s)return n.customDelay??this.#V();if(!this.#j.retry.methods.includes(this.request.method.toLowerCase()))throw e;if(void 0!==this.#j.retry.shouldRetry){let t=await this.#j.retry.shouldRetry({error:n,retryCount:this.#N});if(!1===t)throw e;if(!0===t)return this.#V()}if((e instanceof k||e?.name===k.name)&&!this.#j.retry.retryOnTimeout)throw e;if(e instanceof t||e?.name===t.name){if(!this.#j.retry.statusCodes.includes(e.response.status))throw e;let t=e.response.headers.get("Retry-After")??e.response.headers.get("RateLimit-Reset")??e.response.headers.get("X-RateLimit-Retry-After")??e.response.headers.get("X-RateLimit-Reset")??e.response.headers.get("X-Rate-Limit-Reset");if(t&&this.#j.retry.afterStatusCodes.includes(e.response.status)){let e=1e3*Number(t);Number.isNaN(e)?e=Date.parse(t)-Date.now():e>=Date.parse("2024-01-01")&&(e-=Date.now());let r=this.#j.retry.maxRetryAfter??e;return e<r?e:r}if(413===e.response.status)throw e}return this.#V()}#I(e){return this.#j.parseJson&&(e.json=async()=>this.#j.parseJson(await e.text())),e}#M(e){e&&e.cancel().catch(()=>void 0)}#D(e){this.#M(e.body??void 0)}async #U(e){try{return await e()}catch(r){let t=Math.min(await this.#J(r),0x7fffffff);if(this.#N<1)throw r;if(await R(t,this.#B?{signal:this.#B}:{}),r instanceof s&&r.customRequest){let e=this.#j.signal?new globalThis.Request(r.customRequest,{signal:this.#j.signal}):new globalThis.Request(r.customRequest);this.#W(e)}for(let e of this.#j.hooks.beforeRetry){let t=await e({request:this.request,options:this.#x(),error:r,retryCount:this.#N});if(t instanceof globalThis.Request){this.#W(t);break}if(t instanceof globalThis.Response)return t;if(t===d)return}return this.#U(e)}}async #c(){for(let e of(this.#G?.signal.aborted&&(this.#G=new globalThis.AbortController,this.#j.signal=this.#B?AbortSignal.any([this.#B,this.#G.signal]):this.#G.signal,this.request=new globalThis.Request(this.request,{signal:this.#j.signal})),this.#j.hooks.beforeRequest)){let t=await e(this.request,this.#x(),{retryCount:this.#N});if(t instanceof Response)return t;if(t instanceof globalThis.Request){this.#W(t);break}}let e=((e,t)=>{let r={};for(let s in t)Object.hasOwn(t,s)&&(s in m||s in g||s in e&&!(s in y)||(r[s]=t[s]));return r})(this.request,this.#j);return(this.#F=this.request,this.request=this.#F.clone(),!1===this.#j.timeout)?this.#j.fetch(this.#F,e):O(this.#F,e,this.#G,this.#j)}#x(){if(!this.#q){let{hooks:e,...t}=this.#j;this.#q=Object.freeze(t)}return this.#q}#W(e){this.#q=void 0,this.request=this.#H(e)}#H(e,t){return this.#j.onUploadProgress&&e.body?((e,t,r)=>{if(!e.body)return e;let s=(e=>{if(!e)return 0;if(e instanceof FormData){let t=0;for(let[r,s]of e)t+=h,t+=new TextEncoder().encode(`Content-Disposition: form-data; name="${r}"`).length,t+="string"==typeof s?new TextEncoder().encode(s).length:s.size;return t}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength;if("string"==typeof e)return new TextEncoder().encode(e).length;if(e instanceof URLSearchParams)return new TextEncoder().encode(e.toString()).length;if("byteLength"in e)return e.byteLength;if("object"==typeof e&&null!==e)try{let t=JSON.stringify(e);return new TextEncoder().encode(t).length}catch{}return 0})(r??e.body);return new Request(e,{duplex:"half",body:w(e.body,s,t)})})(e,this.#j.onUploadProgress,t??this.#j.body??void 0):e}}let j=e=>{let t=(t,r)=>P.create(t,b(e,r));for(let r of l)t[r]=(t,s)=>P.create(t,b(e,s,{method:r}));return t.create=e=>j(b(e)),t.extend=t=>("function"==typeof t&&(t=t(e??{})),j(b(e,t))),t.stop=d,t.retry=p,t},I=j();function x(e){return null==e?[]:Object.values(e)}function N(e){return"string"==typeof e||e instanceof String}function D(e){return"u">typeof Buffer&&Buffer.isBuffer(e)}function U(e){let t=e?.constructor;return e===("function"==typeof t?t.prototype:Object.prototype)}function F(e){var t;return null!=e&&"function"!=typeof e&&Number.isSafeInteger(t=e.length)&&t>=0}function M(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function L(e){return"symbol"==typeof e||e instanceof Symbol}function G(e,t){var r,s;let n,i;if((e=(i=(n=(r=e)?(r=L(s=r)?NaN:Number(s))===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r==r?r:0:0===r?r:0)%1)?n-i:n)<1||!Number.isSafeInteger(e))return[];let o=Array(e);for(let r=0;r<e;r++)o[r]="function"==typeof t?t(r):r;return o}function $(e){if(F(e)){var t;let r,s,n;return s=new Set(r=G((t=e).length,e=>`${e}`)),D(t)&&(s.add("offset"),s.add("parent")),M(t)&&(s.add("buffer"),s.add("byteLength"),s.add("byteOffset")),n=Object.keys(t).filter(e=>!s.has(e)),Array.isArray(t)?[...r,...n]:[...r.filter(e=>Object.hasOwn(t,e)),...n]}let r=Object.keys(Object(e));return U(e)?r.filter(e=>"constructor"!==e):r}function B(e){return"__proto__"===e}function q(e){switch(typeof e){case"number":case"symbol":return!1;case"string":return e.includes(".")||e.includes("[")||e.includes("]")}}function H(e){return"string"==typeof e||"symbol"==typeof e?e:Object.is(e?.valueOf?.(),-0)?"-0":String(e)}function V(e){if(Array.isArray(e))return e.map(H);if("symbol"==typeof e)return[e];e=function e(t){if(null==t)return"";if("string"==typeof t)return t;if(Array.isArray(t))return t.map(e).join(",");let r=String(t);return"0"===r&&Object.is(Number(t),-0)?"-0":r}(e);let t=[],r=e.length;if(0===r)return t;let s=0,n="",i="",o=!1;for(46===e.charCodeAt(0)&&(t.push(""),s++);s<r;){let a=e[s];i?"\\"===a&&s+1<r?n+=e[++s]:a===i?i="":n+=a:o?'"'===a||"'"===a?i=a:"]"===a?(o=!1,t.push(n),n=""):n+=a:"["===a?(o=!0,n&&(t.push(n),n="")):"."===a?n&&(t.push(n),n=""):n+=a,s++}return n&&t.push(n),t}function J(e,t,r){if(null==e)return r;switch(typeof t){case"string":{if(B(t))return r;let s=e[t];if(void 0===s)if(q(t))return J(e,V(t),r);else return r;return s}case"number":case"symbol":{"number"==typeof t&&(t=H(t));let s=e[t];if(void 0===s)return r;return s}default:{if(Array.isArray(t)){var s=e,n=t,i=r;if(0===n.length)return i;let o=s;for(let e=0;e<n.length;e++){if(null==o||B(n[e]))return i;o=o[n[e]]}return void 0===o?i:o}if(B(t=Object.is(t?.valueOf(),-0)?"-0":String(t)))return r;let o=e[t];if(void 0===o)return r;return o}}}function W(e){if(!e||"object"!=typeof e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&"[object Object]"===Object.prototype.toString.call(e)}function K(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}function z(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}let Y="[object RegExp]",X="[object String]",Z="[object Number]",Q="[object Boolean]",ee="[object Arguments]",et="[object Symbol]",er="[object Date]",es="[object Map]",en="[object Set]",ei="[object Array]",eo="[object ArrayBuffer]",ea="[object Object]",ec="[object DataView]",el="[object Uint8Array]",eu="[object Uint8ClampedArray]",eh="[object Uint16Array]",ed="[object Uint32Array]",ef="[object Int8Array]",ep="[object Int16Array]",eg="[object Int32Array]",ey="[object Float32Array]",em="[object Float64Array]";function ew(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}function e_(){}function eb(e,t){if(null==e)return!0;switch(typeof t){case"symbol":case"number":case"object":if(Array.isArray(t))return eA(e,t);if("number"==typeof t?t=H(t):"object"==typeof t&&(t=Object.is(t?.valueOf(),-0)?"-0":String(t)),B(t))return!1;if(e?.[t]===void 0)return!0;try{return delete e[t],!0}catch{return!1}case"string":if(e?.[t]===void 0&&q(t))return eA(e,V(t));if(B(t))return!1;try{return delete e[t],!0}catch{return!1}}}function eA(e,t){let r=1===t.length?e:J(e,t.slice(0,-1)),s=t[t.length-1];if(r?.[s]===void 0)return!0;if(B(s))return!1;try{return delete r[s],!0}catch{return!1}}let eE=(e,t,r)=>{let s=e[t];Object.hasOwn(e,t)&&ew(s,r)&&(void 0!==r||t in e)||(e[t]=r)},ev=/^(?:0|[1-9]\d*)$/;function eT(e,t=Number.MAX_SAFE_INTEGER){switch(typeof e){case"number":return Number.isInteger(e)&&e>=0&&e<t;case"symbol":return!1;case"string":return ev.test(e)}}let eS=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,eC=/^\w*$/;function ek(e,t){return!Array.isArray(e)&&(!!("number"==typeof e||"boolean"==typeof e||null==e||L(e))||"string"==typeof e&&(eC.test(e)||!eS.test(e))||null!=t&&Object.hasOwn(t,e))}function eO(e){return null!==e&&("object"==typeof e||"function"==typeof e)}function eR(e){return e}function eP(e){return function(t){return J(t,e)}}function ej(e){return null==e||"object"!=typeof e&&"function"!=typeof e}function eI(e,t,r,s){if(t===e)return!0;switch(typeof t){case"object":return function(e,t,r,s){if(null==t)return!0;if(Array.isArray(t))return ex(e,t,r,s);if(t instanceof Map){var n,i,o,a,c=e,l=t,u=r,h=s;if(0===l.size)return!0;if(!(c instanceof Map))return!1;for(let[e,t]of l.entries())if(!1===u(c.get(e),t,e,c,l,h))return!1;return!0}if(t instanceof Set){return n=e,i=t,o=r,a=s,0===i.size||n instanceof Set&&ex([...n],[...i],o,a)}let d=Object.keys(t);if(null==e||ej(e))return 0===d.length;if(0===d.length)return!0;if(s?.has(t))return s.get(t)===e;s?.set(t,e);try{for(let n=0;n<d.length;n++){let i=d[n];if(!ej(e)&&!(i in e)||void 0===t[i]&&void 0!==e[i]||null===t[i]&&null!==e[i]||!r(e[i],t[i],i,e,t,s))return!1}return!0}finally{s?.delete(t)}}(e,t,r,s);case"function":if(Object.keys(t).length>0)return eI(e,{...t},r,s);return ew(e,t);default:if(!eO(e))return ew(e,t);if("string"==typeof t)return""===t;return!0}}function ex(e,t,r,s){if(0===t.length)return!0;if(!Array.isArray(e))return!1;let n=new Set;for(let i=0;i<t.length;i++){let o=t[i],a=!1;for(let c=0;c<e.length;c++){if(n.has(c))continue;let l=e[c],u=!1;if(r(l,o,i,e,t,s)&&(u=!0),u){n.add(c),a=!0;break}}if(!a)return!1}return!0}function eN(e,t){return function e(t,r,s){return"function"!=typeof s?e(t,r,()=>void 0):eI(t,r,function e(t,r,n,i,o,a){let c=s(t,r,n,i,o,a);return void 0!==c?!!c:eI(t,r,e,a)},new Map)}(e,t,()=>void 0)}function eD(e,t,r,s=new Map,n){let i=n?.(e,t,r,s);if(void 0!==i)return i;if(ej(e))return e;if(s.has(e))return s.get(e);if(Array.isArray(e)){let t=Array(e.length);s.set(e,t);for(let i=0;i<e.length;i++)t[i]=eD(e[i],i,r,s,n);return Object.hasOwn(e,"index")&&(t.index=e.index),Object.hasOwn(e,"input")&&(t.input=e.input),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){let t=new RegExp(e.source,e.flags);return t.lastIndex=e.lastIndex,t}if(e instanceof Map){let t=new Map;for(let[i,o]of(s.set(e,t),e))t.set(i,eD(o,i,r,s,n));return t}if(e instanceof Set){let t=new Set;for(let i of(s.set(e,t),e))t.add(eD(i,void 0,r,s,n));return t}if("u">typeof Buffer&&Buffer.isBuffer(e))return e.subarray();if(M(e)){let t=new(Object.getPrototypeOf(e)).constructor(e.length);s.set(e,t);for(let i=0;i<e.length;i++)t[i]=eD(e[i],i,r,s,n);return t}if(e instanceof ArrayBuffer||"u">typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){let t=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return s.set(e,t),eU(t,e,r,s,n),t}if("u">typeof File&&e instanceof File){let t=new File([e],e.name,{type:e.type});return s.set(e,t),eU(t,e,r,s,n),t}if("u">typeof Blob&&e instanceof Blob){let t=new Blob([e],{type:e.type});return s.set(e,t),eU(t,e,r,s,n),t}if(e instanceof Error){let t=new e.constructor;return s.set(e,t),t.message=e.message,t.name=e.name,t.stack=e.stack,t.cause=e.cause,eU(t,e,r,s,n),t}if(e instanceof Boolean){let t=new Boolean(e.valueOf());return s.set(e,t),eU(t,e,r,s,n),t}if(e instanceof Number){let t=new Number(e.valueOf());return s.set(e,t),eU(t,e,r,s,n),t}if(e instanceof String){let t=new String(e.valueOf());return s.set(e,t),eU(t,e,r,s,n),t}if("object"==typeof e&&function(e){switch(z(e)){case ee:case ei:case eo:case ec:case Q:case er:case ey:case em:case ef:case ep:case eg:case es:case Z:case ea:case Y:case en:case X:case et:case el:case eu:case eh:case ed:return!0;default:return!1}}(e)){let t=Object.create(Object.getPrototypeOf(e));return s.set(e,t),eU(t,e,r,s,n),t}return e}function eU(e,t,r=e,s,n){let i=[...Object.keys(t),...K(t)];for(let o=0;o<i.length;o++){let a=i[o],c=Object.getOwnPropertyDescriptor(e,a);(null==c||c.writable)&&(e[a]=eD(t[a],a,r,s,n))}}function eF(e){var t;return e=eD(t=e,void 0,t,new Map,void 0),t=>eN(t,e)}function eM(e,t){var r;return r=(r,s,n,i)=>{let o=t?.(r,s,n,i);if(void 0!==o)return o;if("object"==typeof e){if(z(e)===ea&&"function"!=typeof e.constructor){let t={};return i.set(e,t),eU(t,e,n,i),t}switch(Object.prototype.toString.call(e)){case Z:case X:case Q:{let t=new e.constructor(e?.valueOf());return eU(t,e),t}case ee:{let t={};return eU(t,e),t.length=e.length,t[Symbol.iterator]=e[Symbol.iterator],t}default:return}}},eD(e,void 0,e,new Map,r)}function eL(e,t){switch(typeof e){case"object":Object.is(e?.valueOf(),-0)&&(e="-0");break;case"number":e=H(e)}return t=eM(t),function(r){let s=J(r,e);return void 0===s?function(e,t){let r;if(0===(r=Array.isArray(t)?t:"string"==typeof t&&q(t)&&e?.[t]==null?V(t):[t]).length)return!1;let s=e;for(let e=0;e<r.length;e++){let t=r[e];if(null==s||!Object.hasOwn(s,t)){var n;if(!((Array.isArray(s)||null!==(n=s)&&"object"==typeof n&&"[object Arguments]"===z(n))&&eT(t)&&t<s.length))return!1}s=s[t]}return!0}(r,e):void 0===t?void 0===s:eN(s,t)}}function eG(e){if(null==e)return[];switch(typeof e){case"object":case"function":if(F(e)){var t;let r,s,n;return s=new Set(r=G((t=e).length,e=>`${e}`)),D(t)&&(s.add("offset"),s.add("parent")),M(t)&&(s.add("buffer"),s.add("byteLength"),s.add("byteOffset")),n=e$(t).filter(e=>!s.has(e)),Array.isArray(t)?[...r,...n]:[...r.filter(e=>Object.hasOwn(t,e)),...n]}if(U(e))return e$(e).filter(e=>"constructor"!==e);return e$(e);default:return e$(Object(e))}}function e$(e){let t=[];for(let r in e)t.push(r);return t}function eB(e,t,r=1){if(null==t&&(t=e,e=0),!Number.isInteger(r)||0===r)throw Error("The step value must be a non-zero integer.");let s=Math.max(Math.ceil((t-e)/r),0),n=Array(s);for(let t=0;t<s;t++)n[t]=e+t*r;return n}function eq(e){let t=[];for(;e;)t.push(...K(e)),e=Object.getPrototypeOf(e);return t}function eH(e){return e}function eV(e){if(null==e)return eR;switch(typeof e){case"function":return e;case"object":if(Array.isArray(e)&&2===e.length)return eL(e[0],e[1]);return eF(e);case"string":case"symbol":case"number":return eP(e)}}function eJ(e,t=eR){if(!e)return e;let r=F(e)||Array.isArray(e)?eB(0,e.length):Object.keys(e);for(let s=0;s<r.length;s++){let n=r[s];if(!1===t(e[n],n,e))break}return e}function eW(e,t=1){let r=[],s=Math.floor(t);if(!F(e))return r;let n=(e,t)=>{for(let i=0;i<e.length;i++){let o=e[i];t<s&&(Array.isArray(o)||o?.[Symbol.isConcatSpreadable]||null!==o&&"object"==typeof o&&"[object Arguments]"===Object.prototype.toString.call(o))?Array.isArray(o)?n(o,t+1):n(Array.from(o),t+1):r.push(o)}};return n(Array.from(e),0),r}function eK(e){return F(e)?function(e){let t=[];for(let r=0;r<e.length;r++){let s=e[r];s&&t.push(s)}return t}(Array.from(e)):[]}function ez(e,t=eR){if(!e)return[];if(t=eV(t),!Array.isArray(e)){let r=[],s=Object.keys(e),n=F(e)?e.length:s.length;for(let i=0;i<n;i++){let n=s[i],o=e[n];t(o,n,e)&&r.push(o)}return r}let r=[],s=e.length;for(let n=0;n<s;n++){let s=e[n];t(s,n,e)&&r.push(s)}return r}function eY(e){return Array.isArray(e)}function eX(e,t){if(!e)return[];let r=F(e)||Array.isArray(e)?eB(0,e.length):Object.keys(e),s=eV(t??eR),n=Array(r.length);for(let t=0;t<r.length;t++){let i=r[t],o=e[i];n[t]=s(o,i,e)}return n}function eZ(e){return Number.isInteger(e)}function eQ(e){return"symbol"==typeof e?1:null===e?2:void 0===e?3:4*(e!=e)}let e0=(e,t,r)=>{if(e!==t){let s=eQ(e),n=eQ(t);if(s===n&&0===s){if(e<t)return"desc"===r?1:-1;if(e>t)return"desc"===r?-1:1}return"desc"===r?n-s:s-n}return 0};function e1(e,t,r){return!!eO(r)&&(!!("number"==typeof t&&F(r)&&eT(t))&&t<r.length||"string"==typeof t&&t in r)&&ew(r[t],e)}var e2=Object.defineProperty,e4=(e,t)=>e2(e,"name",{value:t,configurable:!0});function e6(e){let t="",r=Object.keys(e).filter(e=>"gridProperties"!==e).join(",");return e.gridProperties&&(t=Object.keys(e.gridProperties).map(e=>`gridProperties.${e}`).join(",")).length&&r.length&&(t=`${t},`),t+r}function e3(e){let t,r="",s=e;for(;s>0;)r=String.fromCharCode((t=(s-1)%26)+65)+r,s=(s-t-1)/26;return r}function e5(e){let t=0,{length:r}=e;for(let s=0;s<r;s++)t+=(e.charCodeAt(s)-64)*26**(r-s-1);return t}function e7(e){eJ(function(e,t){if(null==e)return{};let r=F(e)?Array.from(e):Object.values(e),s=eV((void 0)??eR),n={};for(let e=0;e<r.length;e++){let t=r[e],i=s(t,e,r);Object.hasOwn(n,i)||(n[i]=[]),n[i].push(t)}return n}(e),(e,t)=>{if(t&&e.length>1)throw Error(`Duplicate header detected: "${t}". Please make sure all non-empty headers are unique`)})}e4(e6,"getFieldMask"),e4(e3,"columnToLetter"),e4(e5,"letterToColumn"),e4(e7,"checkForDuplicateHeaders");var e8=class{constructor(e,t,r){this._worksheet=e,this._rowNumber=t,this._rawData=r}static{e4(this,"GoogleSpreadsheetRow")}_deleted=!1;get deleted(){return this._deleted}get rowNumber(){return this._rowNumber}_updateRowNumber(e){this._rowNumber=e}get a1Range(){return this._worksheet.a1SheetName+"!"+`A${this._rowNumber}`+":"+`${e3(this._worksheet.headerValues.length)}${this._rowNumber}`}get(e){let t=this._worksheet.headerValues.indexOf(e);return this._rawData[t]}set(e,t){let r=this._worksheet.headerValues.indexOf(e);this._rawData[r]=t}assign(e){for(let t in e)this.set(t,e[t])}toObject(){let e={};for(let t=0;t<this._worksheet.headerValues.length;t++){let r=this._worksheet.headerValues[t];r&&(e[r]=this._rawData[t])}return e}async save(e){if(this._deleted)throw Error("This row has been deleted - call getRows again before making updates.");let t=await this._worksheet._spreadsheet.sheetsApi.put(`values/${encodeURIComponent(this.a1Range)}`,{searchParams:{valueInputOption:e?.raw?"RAW":"USER_ENTERED",includeValuesInResponse:!0},json:{range:this.a1Range,majorDimension:"ROWS",values:[this._rawData]}}),r=await t.json();this._rawData=r.updatedData.values[0]}async delete(){if(this._deleted)throw Error("This row has been deleted - call getRows again before making updates.");let e=await this._worksheet._makeSingleUpdateRequest("deleteRange",{range:{sheetId:this._worksheet.sheetId,startRowIndex:this._rowNumber-1,endRowIndex:this._rowNumber},shiftDimension:"ROWS"});return this._deleted=!0,this._worksheet._shiftRowCache(this.rowNumber),e}_clearRowData(){for(let e=0;e<this._rawData.length;e++)this._rawData[e]=""}},e9=class{static{e4(this,"GoogleSpreadsheetCellErrorValue")}type;message;constructor(e){this.type=e.type,this.message=e.message}},te=class{constructor(e,t,r,s){this._sheet=e,this._rowIndex=t,this._columnIndex=r,this._updateRawData(s),this._rawData=s}static{e4(this,"GoogleSpreadsheetCell")}_rawData;_draftData={};_error;_updateRawData(e){this._rawData=e,this._draftData={},this._rawData?.effectiveValue&&"errorValue"in this._rawData.effectiveValue?this._error=new e9(this._rawData.effectiveValue.errorValue):this._error=void 0}get rowIndex(){return this._rowIndex}get columnIndex(){return this._columnIndex}get a1Column(){return e3(this._columnIndex+1)}get a1Row(){return this._rowIndex+1}get a1Address(){return`${this.a1Column}${this.a1Row}`}get value(){if(void 0!==this._draftData.value)throw Error("Value has been changed");return this._error?this._error:this._rawData?.effectiveValue?x(this._rawData.effectiveValue)[0]:null}set value(e){var t;if(e instanceof e9)throw Error("You can't manually set a value to an error");if("boolean"==typeof(t=e)||t instanceof Boolean)this._draftData.valueType="boolValue";else if(N(e))"="===e.substring(0,1)?this._draftData.valueType="formulaValue":this._draftData.valueType="stringValue";else if(Number.isFinite(e))this._draftData.valueType="numberValue";else if(null==e)this._draftData.valueType="stringValue",e="";else throw Error("Set value to boolean, string, or number");this._draftData.value=e}get valueType(){return this._error?"errorValue":this._rawData?.effectiveValue?$(this._rawData.effectiveValue)[0]:null}get formattedValue(){return this._rawData?.formattedValue||null}get formula(){return J(this._rawData,"userEnteredValue.formulaValue",null)}set formula(e){if(!e)throw Error("To clear a formula, set `cell.value = null`");if("="!==e.substring(0,1))throw Error('formula must begin with "="');this.value=e}get formulaError(){return this._error}get errorValue(){return this._error}get numberValue(){if("numberValue"===this.valueType)return this.value}set numberValue(e){this.value=e}get boolValue(){if("boolValue"===this.valueType)return this.value}set boolValue(e){this.value=e}get stringValue(){if("stringValue"===this.valueType)return this.value}set stringValue(e){if(e?.startsWith("="))throw Error("Use cell.formula to set formula values");this.value=e}get hyperlink(){if(this._draftData.value)throw Error("Save cell to be able to read hyperlink");return this._rawData?.hyperlink}get note(){return void 0!==this._draftData.note?this._draftData.note:this._rawData?.note||""}set note(e){if((null==e||!1===e)&&(e=""),!N(e))throw Error("Note must be a string");e===this._rawData?.note?delete this._draftData.note:this._draftData.note=e}get userEnteredFormat(){return Object.freeze(this._rawData?.userEnteredFormat)}get effectiveFormat(){return Object.freeze(this._rawData?.effectiveFormat)}_getFormatParam(e){if(J(this._draftData,`userEnteredFormat.${e}`))throw Error("User format is unsaved - save the cell to be able to read it again");return Object.freeze(this._rawData.userEnteredFormat[e])}_setFormatParam(e,t){if(function e(t,r,s,n,i,o,a){let c=a(t,r,s,n,i,o);if(void 0!==c)return c;if(typeof t==typeof r)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":case"function":return t===r;case"number":return t===r||Object.is(t,r)}return function t(r,s,n,i){if(Object.is(r,s))return!0;let o=z(r),a=z(s);if(o===ee&&(o=ea),a===ee&&(a=ea),o!==a)return!1;switch(o){case X:return r.toString()===s.toString();case Z:return ew(r.valueOf(),s.valueOf());case Q:case er:case et:return Object.is(r.valueOf(),s.valueOf());case Y:return r.source===s.source&&r.flags===s.flags;case"[object Function]":return r===s}let c=(n=n??new Map).get(r),l=n.get(s);if(null!=c&&null!=l)return c===s;n.set(r,s),n.set(s,r);try{switch(o){case es:if(r.size!==s.size)return!1;for(let[t,o]of r.entries())if(!s.has(t)||!e(o,s.get(t),t,r,s,n,i))return!1;return!0;case en:{if(r.size!==s.size)return!1;let t=Array.from(r.values()),o=Array.from(s.values());for(let a=0;a<t.length;a++){let c=t[a],l=o.findIndex(t=>e(c,t,void 0,r,s,n,i));if(-1===l)return!1;o.splice(l,1)}return!0}case ei:case el:case eu:case eh:case ed:case"[object BigUint64Array]":case ef:case ep:case eg:case"[object BigInt64Array]":case ey:case em:if("u">typeof Buffer&&Buffer.isBuffer(r)!==Buffer.isBuffer(s)||r.length!==s.length)return!1;for(let t=0;t<r.length;t++)if(!e(r[t],s[t],t,r,s,n,i))return!1;return!0;case eo:if(r.byteLength!==s.byteLength)return!1;return t(new Uint8Array(r),new Uint8Array(s),n,i);case ec:if(r.byteLength!==s.byteLength||r.byteOffset!==s.byteOffset)return!1;return t(new Uint8Array(r),new Uint8Array(s),n,i);case"[object Error]":return r.name===s.name&&r.message===s.message;case ea:{if(!(t(r.constructor,s.constructor,n,i)||W(r)&&W(s)))return!1;let o=[...Object.keys(r),...K(r)],a=[...Object.keys(s),...K(s)];if(o.length!==a.length)return!1;for(let t=0;t<o.length;t++){let a=o[t],c=r[a];if(!Object.hasOwn(s,a))return!1;let l=s[a];if(!e(c,l,a,r,s,n,i))return!1}return!0}default:return!1}}finally{n.delete(r),n.delete(s)}}(t,r,o,a)}(t,J(this._rawData,`userEnteredFormat.${e}`),void 0,void 0,void 0,void 0,e_))eb(this._draftData,`userEnteredFormat.${e}`);else{var r;r=this._draftData,function(e,t,r,s){let n;if(null==e&&!eO(e))return;n=ek(t,e)?[t]:Array.isArray(t)?t:V(t);let i=r(J(e,n)),o=e;for(let t=0;t<n.length&&null!=o;t++){let r,a=H(n[t]);if(!B(a)){if(t===n.length-1)r=i;else{let i=o[a],c=s?.(i,a,e);r=void 0!==c?c:eO(i)?i:eT(n[t+1])?[]:{}}eE(o,a,r),o=o[a]}}}(r,`userEnteredFormat.${e}`,()=>t,()=>void 0),this._draftData.clearFormat=!1}}get numberFormat(){return this._getFormatParam("numberFormat")}get backgroundColor(){return this._getFormatParam("backgroundColor")}get backgroundColorStyle(){return this._getFormatParam("backgroundColorStyle")}get borders(){return this._getFormatParam("borders")}get padding(){return this._getFormatParam("padding")}get horizontalAlignment(){return this._getFormatParam("horizontalAlignment")}get verticalAlignment(){return this._getFormatParam("verticalAlignment")}get wrapStrategy(){return this._getFormatParam("wrapStrategy")}get textDirection(){return this._getFormatParam("textDirection")}get textFormat(){return this._getFormatParam("textFormat")}get hyperlinkDisplayType(){return this._getFormatParam("hyperlinkDisplayType")}get textRotation(){return this._getFormatParam("textRotation")}set numberFormat(e){this._setFormatParam("numberFormat",e)}set backgroundColor(e){this._setFormatParam("backgroundColor",e)}set backgroundColorStyle(e){this._setFormatParam("backgroundColorStyle",e)}set borders(e){this._setFormatParam("borders",e)}set padding(e){this._setFormatParam("padding",e)}set horizontalAlignment(e){this._setFormatParam("horizontalAlignment",e)}set verticalAlignment(e){this._setFormatParam("verticalAlignment",e)}set wrapStrategy(e){this._setFormatParam("wrapStrategy",e)}set textDirection(e){this._setFormatParam("textDirection",e)}set textFormat(e){this._setFormatParam("textFormat",e)}set hyperlinkDisplayType(e){this._setFormatParam("hyperlinkDisplayType",e)}set textRotation(e){this._setFormatParam("textRotation",e)}clearAllFormatting(){this._draftData.clearFormat=!0,delete this._draftData.userEnteredFormat}get _isDirty(){return void 0!==this._draftData.note||!!$(this._draftData.userEnteredFormat).length||!!this._draftData.clearFormat||void 0!==this._draftData.value}discardUnsavedChanges(){this._draftData={}}async save(){await this._sheet.saveCells([this])}_getUpdateRequest(){let e=void 0!==this._draftData.value,t=void 0!==this._draftData.note,r=!!$(this._draftData.userEnteredFormat||{}).length,s=this._draftData.clearFormat;if(!function(e,t,r){if(!e)return!1;null==t&&(t=eR);let s=Array.isArray(e)?e:Object.values(e);switch(typeof t){case"function":if(!Array.isArray(e)){let r=Object.keys(e);for(let s=0;s<r.length;s++){let n=r[s];if(t(e[n],n,e))return!0}return!1}for(let r=0;r<e.length;r++)if(t(e[r],r,e))return!0;return!1;case"object":if(Array.isArray(t)&&2===t.length){let r=eL(t[0],t[1]);if(Array.isArray(e)){for(let t=0;t<e.length;t++)if(r(e[t]))return!0;return!1}return s.some(r)}{let r=eF(t);if(Array.isArray(e)){for(let t=0;t<e.length;t++)if(r(e[t]))return!0;return!1}return s.some(r)}case"number":case"symbol":case"string":{let r=eP(t);if(Array.isArray(e)){for(let t=0;t<e.length;t++)if(r(e[t]))return!0;return!1}return s.some(r)}}}([e,t,r,s]))return null;let n={...this._rawData?.userEnteredFormat,...this._draftData.userEnteredFormat};return J(this._draftData,"userEnteredFormat.backgroundColor")&&delete n.backgroundColorStyle,{updateCells:{rows:[{values:[{...e&&{userEnteredValue:{[this._draftData.valueType]:this._draftData.value}},...t&&{note:this._draftData.note},...r&&{userEnteredFormat:n},...s&&{userEnteredFormat:{}}}]}],fields:$(function(e,t){if(null==e)return{};let r=eV((void 0)??eH),s={},n=F(e)?eB(0,e.length):[...eG(e),...eq(e)];for(let t=0;t<n.length;t++){let i=L(n[t])?n[t]:n[t].toString(),o=e[i];r(o,i,e)&&(s[i]=o)}return s}({userEnteredValue:e,note:t,userEnteredFormat:r||s})).join(","),start:{sheetId:this._sheet.sheetId,rowIndex:this.rowIndex,columnIndex:this.columnIndex}}}}},tt=class{constructor(e,t,r){this._spreadsheet=e,this._headerRowIndex=1,this._rawProperties=t,this._cells=[],this._rowMetadata=[],this._columnMetadata=[],r&&this._fillCellData(r)}static{e4(this,"GoogleSpreadsheetWorksheet")}_headerRowIndex=1;_rawProperties=null;_cells=[];_rowMetadata=[];_columnMetadata=[];_headerValues;get headerValues(){if(!this._headerValues)throw Error("Header values are not yet loaded");return this._headerValues}updateRawData(e,t){this._rawProperties=e,this._fillCellData(t)}async _makeSingleUpdateRequest(e,t){return this._spreadsheet._makeSingleUpdateRequest(e,{...t})}_ensureInfoLoaded(){if(!this._rawProperties)throw Error("You must call `doc.loadInfo()` again before accessing this property")}resetLocalCache(e){e||(this._rawProperties=null),this._headerValues=void 0,this._headerRowIndex=1,this._cells=[]}_fillCellData(e){eJ(e,e=>{let t=e.startRow||0,r=e.startColumn||0,s=e.rowMetadata.length,n=e.columnMetadata.length;for(let i=0;i<s;i++){let s=t+i;for(let t=0;t<n;t++){let n=r+t;this._cells[s]||(this._cells[s]=[]);let o=J(e,`rowData[${i}].values[${t}]`);this._cells[s][n]?this._cells[s][n]._updateRawData(o):this._cells[s][n]=new te(this,s,n,o)}}for(let r=0;r<e.rowMetadata.length;r++)this._rowMetadata[t+r]=e.rowMetadata[r];for(let t=0;t<e.columnMetadata.length;t++)this._columnMetadata[r+t]=e.columnMetadata[t]})}_addSheetIdToRange(e){if(e.sheetId&&e.sheetId!==this.sheetId)throw Error("Leave sheet ID blank or set to matching ID of this sheet");return{...e,sheetId:this.sheetId}}_getProp(e){return this._ensureInfoLoaded(),this._rawProperties[e]}_setProp(e,t){throw Error("Do not update directly - use `updateProperties()`")}get sheetId(){return this._getProp("sheetId")}get title(){return this._getProp("title")}get index(){return this._getProp("index")}get sheetType(){return this._getProp("sheetType")}get gridProperties(){return this._getProp("gridProperties")}get hidden(){return this._getProp("hidden")}get tabColor(){return this._getProp("tabColor")}get rightToLeft(){return this._getProp("rightToLeft")}get _headerRange(){return`A${this._headerRowIndex}:${this.lastColumnLetter}${this._headerRowIndex}`}set sheetId(e){this._setProp("sheetId",e)}set title(e){this._setProp("title",e)}set index(e){this._setProp("index",e)}set sheetType(e){this._setProp("sheetType",e)}set gridProperties(e){this._setProp("gridProperties",e)}set hidden(e){this._setProp("hidden",e)}set tabColor(e){this._setProp("tabColor",e)}set rightToLeft(e){this._setProp("rightToLeft",e)}get rowCount(){return this._ensureInfoLoaded(),this.gridProperties.rowCount}get columnCount(){return this._ensureInfoLoaded(),this.gridProperties.columnCount}get a1SheetName(){return`'${this.title.replace(/'/g,"''")}'`}get encodedA1SheetName(){return encodeURIComponent(this.a1SheetName)}get lastColumnLetter(){return this.columnCount?e3(this.columnCount):""}get cellStats(){let e=eW(this._cells);return{nonEmpty:ez(e=eK(e),e=>e.value).length,loaded:e.length,total:this.rowCount*this.columnCount}}getCellByA1(e){let t=e.match(/([A-Z]+)([0-9]+)/);if(!t)throw Error(`Cell address "${e}" not valid`);let r=e5(t[1]),s=parseInt(t[2]);return this.getCell(s-1,r-1)}getCell(e,t){if(e<0||t<0)throw Error("Min coordinate is 0, 0");if(e>=this.rowCount||t>=this.columnCount)throw Error(`Out of bounds, sheet is ${this.rowCount} by ${this.columnCount}`);if(!J(this._cells,`[${e}][${t}]`))throw Error("This cell has not been loaded yet");return this._cells[e][t]}async loadCells(e){if(!e)return this._spreadsheet.loadCells(this.a1SheetName);let t=eX(eY(e)?e:[e],e=>{if(N(e))return e.startsWith(this.a1SheetName)?e:`${this.a1SheetName}!${e}`;if(eO(e)){if(e.sheetId&&e.sheetId!==this.sheetId)throw Error("Leave sheet ID blank or set to matching ID of this sheet");return{sheetId:this.sheetId,...e}}throw Error("Each filter must be a A1 range string or gridrange object")});return this._spreadsheet.loadCells(t)}async saveUpdatedCells(){let e=ez(eW(this._cells),{_isDirty:!0});e.length&&await this.saveCells(e)}async saveCells(e){let t=eX(e,e=>e._getUpdateRequest()),r=eX(e,e=>`${this.a1SheetName}!${e.a1Address}`);if(!eK(t).length)throw Error("At least one cell must have something to update");await this._spreadsheet._makeBatchUpdateRequest(t,r)}async _ensureHeaderRowLoaded(){this._headerValues||await this.loadHeaderRow()}async loadHeaderRow(e){void 0!==e&&(this._headerRowIndex=e);let t=await this.getCellsInRange(this._headerRange);this._processHeaderRow(t)}_processHeaderRow(e){if(!e)throw Error("No values in the header row - fill the first row with header values before trying to interact with rows");if(this._headerValues=eX(e[0],e=>e?.trim()),!eK(this.headerValues).length)throw Error("All your header cells are blank - fill the first row with header values before trying to interact with rows");e7(this.headerValues)}async setHeaderRow(e,t){if(!e)return;if(e.length>this.columnCount)throw Error(`Sheet is not large enough to fit ${e.length} columns. Resize the sheet first.`);let r=eX(e,e=>e?.trim());if(e7(r),!eK(r).length)throw Error("All your header cells are blank -");t&&(this._headerRowIndex=t);let s=await this._spreadsheet.sheetsApi.put(`values/${this.encodedA1SheetName}!${this._headerRowIndex}:${this._headerRowIndex}`,{searchParams:{valueInputOption:"USER_ENTERED",includeValuesInResponse:!0},json:{range:`${this.a1SheetName}!${this._headerRowIndex}:${this._headerRowIndex}`,majorDimension:"ROWS",values:[[...r,...G(this.columnCount-r.length,()=>"")]]}}),n=await s.json();this._headerValues=n.updatedData.values[0]}async addRows(e,t={}){if(this.title.includes(":"))throw Error('Please remove the ":" from your sheet title. There is a bug with the google API which breaks appending rows if any colons are in the sheet title.');if(!eY(e))throw Error("You must pass in an array of row values to append");await this._ensureHeaderRowLoaded();let r=[];eJ(e,e=>{let t;if(eY(e))t=e;else if(eO(e)){t=[];for(let r=0;r<this.headerValues.length;r++){let s=this.headerValues[r];t[r]=e[s]}}else throw Error("Each row must be an object or an array");r.push(t)});let s=await this._spreadsheet.sheetsApi.post(`values/${this.encodedA1SheetName}!A${this._headerRowIndex}:append`,{searchParams:{valueInputOption:t.raw?"RAW":"USER_ENTERED",insertDataOption:t.insert?"INSERT_ROWS":"OVERWRITE",includeValuesInResponse:!0},json:{values:r}}),n=await s.json(),{updatedRange:i}=n.updates,o=i.match(/![A-Z]+([0-9]+):?/)[1];return o=parseInt(o),this._ensureInfoLoaded(),t.insert?this._rawProperties.gridProperties.rowCount+=e.length:o+e.length>this.rowCount&&(this._rawProperties.gridProperties.rowCount=o+e.length-1),eX(n.updates.updatedData.values,e=>new e8(this,o++,e))}async addRow(e,t){return(await this.addRows([e],t))[0]}_rowCache=[];async getRows(e){let t,r=e?.offset||0,s=e?.limit||this.rowCount-1,n=1+this._headerRowIndex+r,i=n+s-1;if(this._headerValues){let e=e3(this.headerValues.length);t=await this.getCellsInRange(`A${n}:${e}${i}`)}else{let e=await this.batchGetCellsInRange([this._headerRange,`A${n}:${this.lastColumnLetter}${i}`]);this._processHeaderRow(e[0]),t=e[1]}if(!t)return[];let o=[],a=n;for(let e=0;e<t.length;e++){let r=new e8(this,a++,t[e]);this._rowCache[r.rowNumber]=r,o.push(r)}return o}_shiftRowCache(e){delete this._rowCache[e],this._rowCache.forEach(t=>{t.rowNumber>e&&t._updateRowNumber(t.rowNumber-1)})}async clearRows(e){let t=e?.start||this._headerRowIndex+1,r=e?.end||this.rowCount;await this._spreadsheet.sheetsApi.post(`values/${this.encodedA1SheetName}!${t}:${r}:clear`),this._rowCache.forEach(e=>{e.rowNumber>=t&&e.rowNumber<=r&&e._clearRowData()})}async updateProperties(e){return this._makeSingleUpdateRequest("updateSheetProperties",{properties:{sheetId:this.sheetId,...e},fields:e6(e)})}async updateGridProperties(e){return this.updateProperties({gridProperties:e})}async resize(e){return this.updateGridProperties(e)}async updateDimensionProperties(e,t,r){return this._makeSingleUpdateRequest("updateDimensionProperties",{range:{sheetId:this.sheetId,dimension:e,...r},properties:t,fields:e6(t)})}async getCellsInRange(e,t){let r=await this._spreadsheet.sheetsApi.get(`values/${this.encodedA1SheetName}!${e}`,{searchParams:t});return(await r.json()).values}async batchGetCellsInRange(e,t){let r=e.map(e=>`ranges=${this.encodedA1SheetName}!${e}`).join("&"),s=await this._spreadsheet.sheetsApi.get(`values:batchGet?${r}`,{searchParams:t});return(await s.json()).valueRanges.map(e=>e.values)}async updateNamedRange(){}async addNamedRange(){}async deleteNamedRange(){}async repeatCell(){}async autoFill(){}async cutPaste(){}async copyPaste(){}async mergeCells(e,t="MERGE_ALL"){await this._makeSingleUpdateRequest("mergeCells",{mergeType:t,range:this._addSheetIdToRange(e)})}async unmergeCells(e){await this._makeSingleUpdateRequest("unmergeCells",{range:this._addSheetIdToRange(e)})}async updateBorders(){}async addFilterView(){}async appendCells(){}async clearBasicFilter(){}async deleteDimension(){}async deleteEmbeddedObject(){}async deleteFilterView(){}async duplicateFilterView(){}async duplicate(e){let t=(await this._makeSingleUpdateRequest("duplicateSheet",{sourceSheetId:this.sheetId,...e?.index!==void 0&&{insertSheetIndex:e.index},...e?.id&&{newSheetId:e.id},...e?.title&&{newSheetName:e.title}})).properties.sheetId;return this._spreadsheet.sheetsById[t]}async findReplace(){}async insertDimension(e,t,r){if(!e)throw Error("You need to specify a dimension. i.e. COLUMNS|ROWS");if(!eO(t))throw Error("`range` must be an object containing `startIndex` and `endIndex`");if(!eZ(t.startIndex)||t.startIndex<0)throw Error("range.startIndex must be an integer >=0");if(!eZ(t.endIndex)||t.endIndex<0)throw Error("range.endIndex must be an integer >=0");if(t.endIndex<=t.startIndex)throw Error("range.endIndex must be greater than range.startIndex");if(void 0===r&&(r=t.startIndex>0),r&&0===t.startIndex)throw Error("Cannot set inheritFromBefore to true if inserting in first row/column");return this._makeSingleUpdateRequest("insertDimension",{range:{sheetId:this.sheetId,dimension:e,startIndex:t.startIndex,endIndex:t.endIndex},inheritFromBefore:r})}async insertRange(){}async moveDimension(){}async updateEmbeddedObjectPosition(){}async pasteData(){}async textToColumns(){}async updateFilterView(){}async deleteRange(){}async appendDimension(){}async addConditionalFormatRule(){}async updateConditionalFormatRule(){}async deleteConditionalFormatRule(){}async sortRange(){}async setDataValidation(e,t){return this._makeSingleUpdateRequest("setDataValidation",{range:{sheetId:this.sheetId,...e},...t&&{rule:t}})}async setBasicFilter(){}async addProtectedRange(){}async updateProtectedRange(){}async deleteProtectedRange(){}async autoResizeDimensions(){}async addChart(){}async updateChartSpec(){}async updateBanding(){}async addBanding(){}async deleteBanding(){}async createDeveloperMetadata(){}async updateDeveloperMetadata(){}async deleteDeveloperMetadata(){}async randomizeRange(){}async addDimensionGroup(){}async deleteDimensionGroup(){}async updateDimensionGroup(){}async trimWhitespace(){}async deleteDuplicates(){}async addSlicer(){}async updateSlicerSpec(){}async delete(){return this._spreadsheet.deleteSheet(this.sheetId)}async copyToSpreadsheet(e){let t=this._spreadsheet.sheetsApi.post(`sheets/${this.sheetId}:copyTo`,{json:{destinationSpreadsheetId:e}});return await t.json()}async clear(e){let t=e?`!${e}`:"";await this._spreadsheet.sheetsApi.post(`values/${this.encodedA1SheetName}${t}:clear`),this.resetLocalCache(!0)}async downloadAsCSV(e=!1){return this._spreadsheet._downloadAs("csv",this.sheetId,e)}async downloadAsTSV(e=!1){return this._spreadsheet._downloadAs("tsv",this.sheetId,e)}async downloadAsPDF(e=!1){return this._spreadsheet._downloadAs("pdf",this.sheetId,e)}},tr="https://sheets.googleapis.com/v4/spreadsheets",ts={html:{},zip:{},xlsx:{},ods:{},csv:{singleWorksheet:!0},tsv:{singleWorksheet:!0},pdf:{singleWorksheet:!0}};function tn(e){if("getRequestHeaders"in e)return"google_auth";if("token"in e&&e.token)return"raw_access_token";if("apiKey"in e&&e.apiKey)return"api_key";throw Error("Invalid auth")}async function ti(e){if("getRequestHeaders"in e){let t=await e.getRequestHeaders();if("entries"in t)return{headers:Object.fromEntries(t.entries())};if(eO(t))return{headers:t};throw Error("unexpected headers returned from getRequestHeaders")}if("apiKey"in e&&e.apiKey)return{searchParams:{key:e.apiKey}};if("token"in e&&e.token)return{headers:{Authorization:`Bearer ${e.token}`}};throw Error("Invalid auth")}e4(tn,"getAuthMode"),e4(ti,"getRequestAuthConfig");var to=class e{static{e4(this,"GoogleSpreadsheet")}spreadsheetId;auth;get authMode(){return tn(this.auth)}_rawSheets;_rawProperties=null;_spreadsheetUrl=null;_deleted=!1;sheetsApi;driveApi;constructor(e,t){this.spreadsheetId=e,this.auth=t,this._rawSheets={},this._spreadsheetUrl=null,this.sheetsApi=I.create({prefixUrl:`${tr}/${e}`,hooks:{beforeRequest:[e=>this._setAuthRequestHook(e)],beforeError:[e=>this._errorHook(e)]}}),this.driveApi=I.create({prefixUrl:`https://www.googleapis.com/drive/v3/files/${e}`,hooks:{beforeRequest:[e=>this._setAuthRequestHook(e)],beforeError:[e=>this._errorHook(e)]}})}async _setAuthRequestHook(e){let t=await ti(this.auth);if(t.headers&&Object.entries(t.headers).forEach(([t,r])=>{e.headers.set(t,String(r))}),t.searchParams){let r=new URL(e.url);return Object.entries(t.searchParams).forEach(([e,t])=>{r.searchParams.set(e,String(t))}),new Request(r,e)}return e}async _errorHook(e){let t,{response:r}=e,s=await r?.text();try{t=JSON.parse(s)}catch(e){}if(t){if(!t.error)return e;let{code:r,message:s}=t.error;return e.message=`Google API error - [${r}] ${s}`,e}if(403===J(e,"response.status")&&"apiKey"in this.auth)throw Error("Sheet is private. Use authentication or make public. (see https://github.com/theoephraim/node-google-spreadsheet#a-note-on-authentication for details)");return e}async _makeSingleUpdateRequest(e,t){let r=await this.sheetsApi.post(":batchUpdate",{json:{requests:[{[e]:t}],includeSpreadsheetInResponse:!0}}),s=await r.json();return this._updateRawProperties(s.updatedSpreadsheet.properties),eJ(s.updatedSpreadsheet.sheets,e=>this._updateOrCreateSheet(e)),s.replies[0][e]}async _makeBatchUpdateRequest(e,t){let r=await this.sheetsApi.post(":batchUpdate",{json:{requests:e,includeSpreadsheetInResponse:!0,...t&&{responseIncludeGridData:!0,..."*"!==t&&{responseRanges:t}}}}),s=await r.json();this._updateRawProperties(s.updatedSpreadsheet.properties),eJ(s.updatedSpreadsheet.sheets,e=>this._updateOrCreateSheet(e))}_ensureInfoLoaded(){if(!this._rawProperties)throw Error("You must call `doc.loadInfo()` before accessing this property")}_updateRawProperties(e){this._rawProperties=e}_updateOrCreateSheet(e){let{properties:t,data:r}=e,{sheetId:s}=t;this._rawSheets[s]?this._rawSheets[s].updateRawData(t,r):this._rawSheets[s]=new tt(this,t,r)}_getProp(e){return this._ensureInfoLoaded(),this._rawProperties[e]}get title(){return this._getProp("title")}get locale(){return this._getProp("locale")}get timeZone(){return this._getProp("timeZone")}get autoRecalc(){return this._getProp("autoRecalc")}get defaultFormat(){return this._getProp("defaultFormat")}get spreadsheetTheme(){return this._getProp("spreadsheetTheme")}get iterativeCalculationSettings(){return this._getProp("iterativeCalculationSettings")}async updateProperties(e){await this._makeSingleUpdateRequest("updateSpreadsheetProperties",{properties:e,fields:e6(e)})}async loadInfo(e=!1){let t=await this.sheetsApi.get("",{searchParams:{...e&&{includeGridData:!0}}}),r=await t.json();this._spreadsheetUrl=r.spreadsheetUrl,this._rawProperties=r.properties,r.sheets?.forEach(e=>this._updateOrCreateSheet(e))}resetLocalCache(){this._rawProperties=null,this._rawSheets={}}get sheetCount(){return this._ensureInfoLoaded(),x(this._rawSheets).length}get sheetsById(){return this._ensureInfoLoaded(),this._rawSheets}get sheetsByIndex(){return this._ensureInfoLoaded(),function(e,...t){let r=t.length;return r>1&&e1(e,t[0],t[1])?t=[]:r>2&&e1(t[0],t[1],t[2])&&(t=[t[0]]),function(e,t,r,s){if(null==e)return[];Array.isArray(e)||(e=Object.values(e)),Array.isArray(t)||(t=null==t?[null]:[t]),0===t.length&&(t=[null]),Array.isArray(r)||(r=null==r?[]:[r]),r=r.map(e=>String(e));let n=(e,t)=>{let r=e;for(let e=0;e<t.length&&null!=r;++e)r=r[t[e]];return r},i=t.map(e=>(Array.isArray(e)&&1===e.length&&(e=e[0]),null==e||"function"==typeof e||Array.isArray(e)||ek(e))?e:{key:e,path:V(e)});return e.map(e=>({original:e,criteria:i.map(t=>{var r,s;return r=t,null==(s=e)||null==r?s:"object"==typeof r&&"key"in r?Object.hasOwn(s,r.key)?s[r.key]:n(s,r.path):"function"==typeof r?r(s):Array.isArray(r)?n(s,r):"object"==typeof s?s[r]:s})})).slice().sort((e,t)=>{for(let s=0;s<i.length;s++){let n=e0(e.criteria[s],t.criteria[s],r[s]);if(0!==n)return n}return 0}).map(e=>e.original)}(e,function(e,t=1){let r=[],s=Math.floor(t),n=(e,t)=>{for(let i=0;i<e.length;i++){let o=e[i];Array.isArray(o)&&t<s?n(o,t+1):r.push(o)}};return n(e,0),r}(t),["asc"])}(this._rawSheets,"index")}get sheetsByTitle(){this._ensureInfoLoaded();var e=this._rawSheets;if(!F(e)&&("object"!=typeof e||null===e))return{};let t=eV("title");return function(e,t=eR,r){let s;if(!e)return r;let n=0;F(e)?(s=eB(0,e.length),null==r&&e.length>0&&(r=e[0],n+=1)):(s=Object.keys(e),null==r&&(r=e[s[0]],n+=1));for(let i=n;i<s.length;i++){let n=s[i];r=t(r,e[n],n,e)}return r}(e,(e,r)=>(e[t(r)]=r,e),{})}async addSheet(e={}){let t=(await this._makeSingleUpdateRequest("addSheet",{properties:function(e,...t){var r;if(null==e)return{};let s=(r=e,(t=eW(t)).some(e=>Array.isArray(e)||q(e))?function(e){let t={},r=[...eG(e),...eq(e)];for(let s=0;s<r.length;s++){let n=r[s];t[n]=eM(e[n],e=>{if(!function(e){if("object"!=typeof e||null==e)return!1;if(null===Object.getPrototypeOf(e))return!0;if("[object Object]"!==Object.prototype.toString.call(e)){let t=e[Symbol.toStringTag];return null!=t&&!!Object.getOwnPropertyDescriptor(e,Symbol.toStringTag)?.writable&&e.toString()===`[object ${t}]`}let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))return e})}return t}(r):function(e){let t={},r=[...eG(e),...eq(e)];for(let s=0;s<r.length;s++){let n=r[s];t[n]=e[n]}return t}(r));for(let e=0;e<t.length;e++){let r=t[e];switch(typeof r){case"object":Array.isArray(r)||(r=Array.from(r));for(let e=0;e<r.length;e++)eb(s,r[e]);break;case"string":case"symbol":case"number":eb(s,r)}}return s}(e,"headerValues","headerRowIndex")})).properties.sheetId,r=this.sheetsById[t];return e.headerValues&&await r.setHeaderRow(e.headerValues,e.headerRowIndex),r}async deleteSheet(e){await this._makeSingleUpdateRequest("deleteSheet",{sheetId:e}),delete this._rawSheets[e]}async addNamedRange(e,t,r){return this._makeSingleUpdateRequest("addNamedRange",{name:e,namedRangeId:r,range:t})}async deleteNamedRange(e){return this._makeSingleUpdateRequest("deleteNamedRange",{namedRangeId:e})}async loadCells(e){let t,r="api_key"===this.authMode,s=eX(eY(e)?e:[e],e=>{if(N(e))return r?e:{a1Range:e};if(eO(e)){if(r)throw Error("Only A1 ranges are supported when fetching cells with read-only access (using only an API key)");return{gridRange:e}}throw Error("Each filter must be an A1 range string or a gridrange object")});if("api_key"===this.authMode){let e=new URLSearchParams;e.append("includeGridData","true"),s.forEach(t=>{if(!N(t))throw Error("Only A1 ranges are supported when fetching cells with read-only access (using only an API key)");e.append("ranges",t)}),t=await this.sheetsApi.get("",{searchParams:e})}else t=await this.sheetsApi.post(":getByDataFilter",{json:{includeGridData:!0,dataFilters:s}});eJ((await t?.json()).sheets,e=>{this._updateOrCreateSheet(e)})}async _downloadAs(e,t,r){if(!ts[e])throw Error(`unsupported export fileType - ${e}`);if(ts[e].singleWorksheet){if(void 0===t)throw Error(`Must specify worksheetId when exporting as ${e}`)}else if(t)throw Error(`Cannot specify worksheetId when exporting as ${e}`);if("html"===e&&(e="zip"),!this._spreadsheetUrl)throw Error("Cannot export sheet that is not fully loaded");let s=this._spreadsheetUrl.replace("edit","export"),n=await this.sheetsApi.get(s,{prefixUrl:"",searchParams:{id:this.spreadsheetId,format:e,...void 0!==t&&{gid:t}}});return r?n.body:n.arrayBuffer()}async downloadAsZippedHTML(e){return this._downloadAs("html",void 0,e)}async downloadAsHTML(e){return this._downloadAs("html",void 0,e)}async downloadAsXLSX(e=!1){return this._downloadAs("xlsx",void 0,e)}async downloadAsODS(e=!1){return this._downloadAs("ods",void 0,e)}async delete(){await this.driveApi.delete(""),this._deleted=!0}async listPermissions(){let e=await this.driveApi.get("permissions",{searchParams:{fields:"permissions(id,type,emailAddress,domain,role,displayName,photoLink,deleted)"}});return(await e.json()).permissions}async setPublicAccessLevel(e){let t=function(e,t=eR,r=0){if(!e)return;r<0&&(r=Math.max(e.length+r,0));let s=eV(t);if(!Array.isArray(e)){let t=Object.keys(e);for(let n=r;n<t.length;n++){let r=t[n],i=e[r];if(s(i,r,e))return i}return}return e.slice(r).find(s)}(await this.listPermissions(),e=>"anyone"===e.type);if(!1===e){if(!t)return;await this.driveApi.delete(`permissions/${t.id}`)}else await this.driveApi.post("permissions",{json:{role:e||"viewer",type:"anyone"}})}async share(e,t){let r,s;return e.includes("@")?r=e:s=e,(await this.driveApi.post("permissions",{searchParams:{...t?.emailMessage===!1&&{sendNotificationEmail:!1},...N(t?.emailMessage)&&{emailMessage:t?.emailMessage},...t?.role==="owner"&&{transferOwnership:!0}},json:{role:t?.role||"writer",...r&&{type:t?.isGroup?"group":"user",emailAddress:r},...s&&{type:"domain",domain:s}}})).json()}static async createNewSpreadsheetDocument(t,r){if("api_key"===tn(t))throw Error("Cannot use api key only to create a new spreadsheet - it is only usable for read-only access of public docs");let s=await ti(t),n=await I.post(tr,{...s,json:{properties:r}}),i=await n.json(),o=new e(i.spreadsheetId,t);return o._spreadsheetUrl=i.spreadsheetUrl,o._rawProperties=i.properties,eJ(i.sheets,e=>o._updateOrCreateSheet(e)),o}},ta=e.i(47334);let tc=new class{doc=null;isConnected=!1;initPromise;constructor(){this.initPromise=this.initialize(),this.initPromise.catch(e=>{console.error("Failed to initialize Google Sheets service:",e.message)})}async initialize(){if(!process.env.GOOGLE_SHEETS_ID||!process.env.GOOGLE_SERVICE_ACCOUNT_EMAIL||!process.env.GOOGLE_PRIVATE_KEY)return void console.log("Google Sheets credentials missing. Running in mock mode.");try{let e=new ta.JWT({email:process.env.GOOGLE_SERVICE_ACCOUNT_EMAIL,key:process.env.GOOGLE_PRIVATE_KEY.replace(/\\n/g,"\n"),scopes:["https://www.googleapis.com/auth/spreadsheets"]});this.doc=new to(process.env.GOOGLE_SHEETS_ID,e),await this.doc.loadInfo(),this.isConnected=!0,console.log(`Connected to Google Sheet: ${this.doc.title}`)}catch(e){console.error("Google Sheets connection error DETAILS:",e),e.response&&console.error("API Error Response:",e.response.data)}}formatDate(e){try{let t=new Date(e);return`${String(t.getDate()).padStart(2,"0")}/${String(t.getMonth()+1).padStart(2,"0")}/${t.getFullYear()}`}catch{return e}}async appendRegistration(e){if(await this.initPromise,!this.isConnected||!this.doc){let t=`HRDA-MOCK-${e.id}`;return console.log(`[Mock] Appending registration to sheet: ${e.firstName} ${e.lastName} (${e.tgmcId}) - Generated ID: ${t}`),t}try{let t=this.doc.sheetsByIndex[0],r=await t.getRows(),s=0;if(r.length>0){let e=r[r.length-1],t=parseInt(e.get("S.No")||"0");isNaN(t)||(s=t)}let n=s+1,i=new Date,o=String(i.getMonth()+1).padStart(2,"0"),a=i.getFullYear(),c=String(n).padStart(4,"0"),l=`HRDA${o}${a}-${c}`;return await t.addRow({"S.No":n,Name:`${e.firstName} ${e.lastName}`,DateofRegistration:this.formatDate(e.registrationDate),ContactNumber:e.phone,MailID:e.email,MedicalCounselRegistration:e.tgmcId,HRDAREGISTRATIONNUMBER:l,PaymentStatus:e.paymentStatus,Address:e.address,District:e.district||"",AnotherMobileNumber:e.anotherMobile||""}),console.log(`Successfully appended row for ${e.firstName} with ID ${l}`),l}catch(e){return console.error("Failed to append row to Google Sheet DETAILS:",e),e.response&&console.error("API Error Response:",e.response.data),null}}async findRegistrationByTGMC(e){if(await this.initPromise,!this.isConnected||!this.doc)return console.log(`[Mock] Finding registration by TGMC: ${e}`),null;try{let t=this.doc.sheetsByIndex[0],r=(await t.getRows()).reverse().find(t=>t.get("MedicalCounselRegistration")===e);if(!r)return null;return{id:r.get("S.No"),hrdaId:r.get("HRDAREGISTRATIONNUMBER"),tgmcId:r.get("MedicalCounselRegistration"),firstName:r.get("Name"),lastName:"",phone:r.get("ContactNumber"),email:r.get("MailID"),address:r.get("Address"),district:r.get("District")}}catch(e){return console.error("Error searching Google Sheet:",e),null}}async findRegistrationByPhone(e){if(await this.initPromise,!this.isConnected||!this.doc)return console.log(`[Mock] Finding registration by Phone: ${e}`),null;try{let t=this.doc.sheetsByIndex[0],r=(await t.getRows()).reverse().find(t=>t.get("ContactNumber")===e);if(!r)return null;return{id:r.get("S.No"),hrdaId:r.get("HRDAREGISTRATIONNUMBER"),tgmcId:r.get("MedicalCounselRegistration"),firstName:r.get("Name"),phone:r.get("ContactNumber"),email:r.get("MailID"),address:r.get("Address"),district:r.get("District")}}catch(e){return console.error("Error searching Google Sheet by Phone:",e),null}}async updateRegistration(e,t){if(await this.initPromise,!this.isConnected||!this.doc)return console.log(`[Mock] Updating registration for TGMC: ${e}`),!0;try{let r=this.doc.sheetsByIndex[0],s=(await r.getRows()).find(t=>t.get("MedicalCounselRegistration")===e);if(s)return t.phone&&s.set("ContactNumber",t.phone),t.email&&s.set("MailID",t.email),t.address&&s.set("Address",t.address),t.district&&s.set("District",t.district),t.anotherMobile&&s.set("AnotherMobileNumber",t.anotherMobile),await s.save(),!0;return!1}catch(e){return console.error("Error updating Google Sheet:",e),!1}}};e.s(["googleSheetsService",0,tc],77526)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__22c6325c._.js.map