module.exports=[5522,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(97895);let e=c.forwardRef(({className:a,type:c,...e},f)=>(0,b.jsx)("input",{type:c,className:(0,d.cn)("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:f,...e}));e.displayName="Input",a.s(["Input",()=>e])},81560,a=>{"use strict";let b=(0,a.i(70106).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);a.s(["Trash2",()=>b],81560)},15618,a=>{"use strict";let b=(0,a.i(70106).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],15618)},59501,a=>{"use strict";var b=a.i(95245);let c=(a,c,d)=>{if(a&&"reportValidity"in a){let e=(0,b.get)(d,c);a.setCustomValidity(e&&e.message||""),a.reportValidity()}},d=(a,b)=>{for(let d in b.fields){let e=b.fields[d];e&&e.ref&&"reportValidity"in e.ref?c(e.ref,d,a):e.refs&&e.refs.forEach(b=>c(b,d,a))}},e=(a,b)=>a.some(a=>a.startsWith(b+"."));var f=function(a,c){for(var d={};a.length;){var e=a[0],f=e.code,g=e.message,h=e.path.join(".");if(!d[h])if("unionErrors"in e){var i=e.unionErrors[0].errors[0];d[h]={message:i.message,type:i.code}}else d[h]={message:g,type:f};if("unionErrors"in e&&e.unionErrors.forEach(function(b){return b.errors.forEach(function(b){return a.push(b)})}),c){var j=d[h].types,k=j&&j[e.code];d[h]=(0,b.appendErrors)(h,c,d,f,k?[].concat(k,e.message):e.message)}a.shift()}return d},g=function(a,c,g){return void 0===g&&(g={}),function(h,i,j){try{return Promise.resolve(function(b,e){try{var f=Promise.resolve(a["sync"===g.mode?"parse":"parseAsync"](h,c)).then(function(a){return j.shouldUseNativeValidation&&d({},j),{errors:{},values:g.raw?h:a}})}catch(a){return e(a)}return f&&f.then?f.then(void 0,e):f}(0,function(a){if(Array.isArray(null==a?void 0:a.errors))return{values:{},errors:((a,c)=>{c.shouldUseNativeValidation&&d(a,c);let f={};for(let d in a){let g=(0,b.get)(c.fields,d),h=Object.assign(a[d]||{},{ref:g&&g.ref});if(e(c.names||Object.keys(a),d)){let a=Object.assign({},(0,b.get)(f,d));(0,b.set)(a,"root",h),(0,b.set)(f,d,a)}else(0,b.set)(f,d,h)}return f})(f(a.errors,!j.shouldUseNativeValidation&&"all"===j.criteriaMode),j)};throw a}))}catch(a){return Promise.reject(a)}}};a.s(["zodResolver",()=>g],59501)},12971,a=>{"use strict";let b=new(a.i(54289)).QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:!1,staleTime:3e5,retry:!1}}}),c=async(a,b,c)=>{let d=await fetch(b,{method:a,headers:{"Content-Type":"application/json"},body:c?JSON.stringify(c):void 0});if(!d.ok){let a;try{a=await d.json()}catch{}throw Error(a?.message||d.statusText)}return d};a.s(["apiRequest",0,c,"queryClient",0,b])},3130,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(97895);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("text-sm text-muted-foreground",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent";let j=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c}));j.displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardFooter",()=>j,"CardHeader",()=>f,"CardTitle",()=>g])},96221,a=>{"use strict";let b=(0,a.i(70106).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},17171,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(30553),e=c.forwardRef((a,c)=>(0,b.jsx)(d.Primitive.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));e.displayName="Label";var f=a.i(187),g=a.i(97895);let h=(0,f.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),i=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(e,{ref:d,className:(0,g.cn)(h(),a),...c}));i.displayName=e.displayName,a.s(["Label",()=>i],17171)},58213,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(11011),e=a.i(95245),f=a.i(97895),g=a.i(17171);let h=e.FormProvider,i=c.createContext({}),j=({...a})=>(0,b.jsx)(i.Provider,{value:{name:a.name},children:(0,b.jsx)(e.Controller,{...a})}),k=()=>{let a=c.useContext(i),b=c.useContext(l),{getFieldState:d,formState:f}=(0,e.useFormContext)(),g=d(a.name,f);if(!a)throw Error("useFormField should be used within <FormField>");let{id:h}=b;return{id:h,name:a.name,formItemId:`${h}-form-item`,formDescriptionId:`${h}-form-item-description`,formMessageId:`${h}-form-item-message`,...g}},l=c.createContext({}),m=c.forwardRef(({className:a,...d},e)=>{let g=c.useId();return(0,b.jsx)(l.Provider,{value:{id:g},children:(0,b.jsx)("div",{ref:e,className:(0,f.cn)("space-y-2",a),...d})})});m.displayName="FormItem";let n=c.forwardRef(({className:a,...c},d)=>{let{error:e,formItemId:h}=k();return(0,b.jsx)(g.Label,{ref:d,className:(0,f.cn)(e&&"text-destructive",a),htmlFor:h,...c})});n.displayName="FormLabel";let o=c.forwardRef(({...a},c)=>{let{error:e,formItemId:f,formDescriptionId:g,formMessageId:h}=k();return(0,b.jsx)(d.Slot,{ref:c,id:f,"aria-describedby":e?`${g} ${h}`:`${g}`,"aria-invalid":!!e,...a})});o.displayName="FormControl",c.forwardRef(({className:a,...c},d)=>{let{formDescriptionId:e}=k();return(0,b.jsx)("p",{ref:d,id:e,className:(0,f.cn)("text-sm text-muted-foreground",a),...c})}).displayName="FormDescription";let p=c.forwardRef(({className:a,children:c,...d},e)=>{let{error:g,formMessageId:h}=k(),i=g?String(g?.message??""):c;return i?(0,b.jsx)("p",{ref:e,id:h,className:(0,f.cn)("text-sm font-medium text-destructive",a),...d,children:i}):null});p.displayName="FormMessage",a.s(["Form",()=>h,"FormControl",()=>o,"FormField",()=>j,"FormItem",()=>m,"FormLabel",()=>n,"FormMessage",()=>p])},48614,a=>{"use strict";var b=a.i(87924),c=a.i(33217),d=a.i(70025),e=a.i(12971),f=a.i(95245),g=a.i(72131),h=a.i(59501),i=a.i(63592),j=a.i(58213),k=a.i(5522),l=a.i(40695),m=a.i(3130),n=a.i(81560),o=a.i(96221),p=a.i(15618),q=a.i(77687),r=a.i(14001);function s(){let{toast:a}=(0,q.useToast)(),{data:s,isLoading:t}=(0,c.useQuery)({queryKey:["/api/gallery"]}),u=(0,f.useForm)({resolver:(0,h.zodResolver)(i.insertGalleryPhotoSchema),defaultValues:{url:"",title:"",description:"",active:!0}}),[v,w]=(0,g.useState)(null),[x,y]=(0,g.useState)(!1),z=(0,d.useMutation)({mutationFn:async a=>{let b=await fetch("/api/gallery",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!b.ok)throw Error("Failed to add photo");return b.json()},onSuccess:()=>{e.queryClient.invalidateQueries({queryKey:["/api/gallery"]}),u.reset(),w(null),a({title:"Success",description:"Photo added to gallery"})},onError:b=>{a({title:"Error",description:b.message,variant:"destructive"})}}),A=async a=>{let b=new FormData;b.append("file",a);let c=await fetch("/api/upload",{method:"POST",body:b});if(!c.ok)throw Error("Failed to upload image");return(await c.json()).url};async function B(b){try{if(v&&(y(!0),b.url=await A(v),y(!1)),!b.url)return void a({title:"Error",description:"Please provide an image URL or upload a file",variant:"destructive"});z.mutate(b)}catch(b){y(!1),a({title:"Error",description:b.message,variant:"destructive"})}}let C=(0,d.useMutation)({mutationFn:async a=>{if(!(await fetch(`/api/gallery/${a}`,{method:"DELETE"})).ok)throw Error("Failed to delete photo")},onSuccess:()=>{e.queryClient.invalidateQueries({queryKey:["/api/gallery"]}),a({title:"Success",description:"Photo removed from gallery"})},onError:b=>{a({title:"Error",description:b.message,variant:"destructive"})}});return(0,b.jsx)(r.AdminLayout,{children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Manage Gallery"}),(0,b.jsxs)(m.Card,{children:[(0,b.jsx)(m.CardHeader,{children:(0,b.jsx)(m.CardTitle,{children:"Add New Photo"})}),(0,b.jsx)(m.CardContent,{children:(0,b.jsx)(j.Form,{...u,children:(0,b.jsxs)("form",{onSubmit:u.handleSubmit(B),className:"space-y-4",children:[(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"Upload Image"}),(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(k.Input,{type:"file",accept:"image/*",onChange:a=>{a.target.files&&a.target.files[0]&&(w(a.target.files[0]),u.setValue("url",""))}})})]}),(0,b.jsx)("div",{className:"text-center text-sm text-muted-foreground",children:"- OR -"}),(0,b.jsx)(j.FormField,{control:u.control,name:"url",render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"Image URL (External)"}),(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(k.Input,{placeholder:"https://...",...a,disabled:!!v,value:a.value||""})}),(0,b.jsx)(j.FormMessage,{})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsx)(j.FormField,{control:u.control,name:"title",render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"Title (Optional)"}),(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(k.Input,{placeholder:"Event Title",...a,value:a.value||""})}),(0,b.jsx)(j.FormMessage,{})]})}),(0,b.jsx)(j.FormField,{control:u.control,name:"description",render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"Description (Optional)"}),(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(k.Input,{placeholder:"Short description",...a,value:a.value||""})}),(0,b.jsx)(j.FormMessage,{})]})})]}),(0,b.jsxs)(l.Button,{type:"submit",disabled:z.isPending||x,children:[z.isPending||x?(0,b.jsx)(o.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}):(0,b.jsx)(p.Plus,{className:"mr-2 h-4 w-4"}),x?"Uploading...":"Add Photo"]})]})})})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t?(0,b.jsx)("div",{className:"col-span-full flex justify-center py-12",children:(0,b.jsx)(o.Loader2,{className:"h-8 w-8 animate-spin text-primary"})}):s?.map(a=>(0,b.jsxs)(m.Card,{className:"overflow-hidden group",children:[(0,b.jsxs)("div",{className:"aspect-video relative",children:[(0,b.jsx)("img",{src:a.url,alt:a.title||"Gallery",className:"w-full h-full object-cover"}),(0,b.jsx)("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:(0,b.jsxs)(l.Button,{variant:"destructive",size:"sm",onClick:()=>C.mutate(a.id),disabled:C.isPending,children:[(0,b.jsx)(n.Trash2,{className:"h-4 w-4 mr-2"}),"Delete"]})})]}),(0,b.jsxs)(m.CardContent,{className:"p-4",children:[a.title?(0,b.jsx)("h3",{className:"font-semibold",children:a.title}):(0,b.jsx)("span",{className:"text-slate-400 italic",children:"No Title"}),a.description&&(0,b.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:a.description})]})]},a.id))})]})})}a.s(["default",()=>s])}];

//# sourceMappingURL=_603856f9._.js.map