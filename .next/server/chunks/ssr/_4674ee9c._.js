module.exports=[77994,a=>{"use strict";var b=a.i(72131);function c(a){let c=b.useRef({value:a,previous:a});return b.useMemo(()=>(c.current.value!==a&&(c.current.previous=c.current.value,c.current.value=a),c.current.previous),[a])}a.s(["usePrevious",()=>c])},37738,a=>{"use strict";var b=a.i(72131),c=a.i(50104),d=a.i(70121),e=a.i(11011),f=a.i(87924);function g(a){let g=a+"CollectionProvider",[h,i]=(0,c.createContextScope)(g),[j,k]=h(g,{collectionRef:{current:null},itemMap:new Map}),l=a=>{let{scope:c,children:d}=a,e=b.default.useRef(null),g=b.default.useRef(new Map).current;return(0,f.jsx)(j,{scope:c,itemMap:g,collectionRef:e,children:d})};l.displayName=g;let m=a+"CollectionSlot",n=(0,e.createSlot)(m),o=b.default.forwardRef((a,b)=>{let{scope:c,children:e}=a,g=k(m,c),h=(0,d.useComposedRefs)(b,g.collectionRef);return(0,f.jsx)(n,{ref:h,children:e})});o.displayName=m;let p=a+"CollectionItemSlot",q="data-radix-collection-item",r=(0,e.createSlot)(p),s=b.default.forwardRef((a,c)=>{let{scope:e,children:g,...h}=a,i=b.default.useRef(null),j=(0,d.useComposedRefs)(c,i),l=k(p,e);return b.default.useEffect(()=>(l.itemMap.set(i,{ref:i,...h}),()=>void l.itemMap.delete(i))),(0,f.jsx)(r,{...{[q]:""},ref:j,children:g})});return s.displayName=p,[{Provider:l,Slot:o,ItemSlot:s},function(c){let d=k(a+"CollectionConsumer",c);return b.default.useCallback(()=>{let a=d.collectionRef.current;if(!a)return[];let b=Array.from(a.querySelectorAll(`[${q}]`));return Array.from(d.itemMap.values()).sort((a,c)=>b.indexOf(a.ref.current)-b.indexOf(c.ref.current))},[d.collectionRef,d.itemMap])},i]}a.s(["createCollection",()=>g])},7827,a=>{"use strict";var b=a.i(72131);a.i(87924);var c=b.createContext(void 0);function d(a){let d=b.useContext(c);return a||d||"ltr"}a.s(["useDirection",()=>d])},28094,5784,a=>{"use strict";var b=a.i(72131),c=a.i(30553),d=a.i(87924),e=b.forwardRef((a,b)=>(0,d.jsx)(c.Primitive.span,{...a,ref:b,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...a.style}}));e.displayName="VisuallyHidden",a.s(["Root",()=>e,"VisuallyHidden",()=>e],28094);let f=(0,a.i(70106).default)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);a.s(["ChevronDown",()=>f],5784)},3130,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(97895);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("text-sm text-muted-foreground",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent";let j=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c}));j.displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardFooter",()=>j,"CardHeader",()=>f,"CardTitle",()=>g])},15618,a=>{"use strict";let b=(0,a.i(70106).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],15618)},5522,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(97895);let e=c.forwardRef(({className:a,type:c,...e},f)=>(0,b.jsx)("input",{type:c,className:(0,d.cn)("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:f,...e}));e.displayName="Input",a.s(["Input",()=>e])},3688,a=>{"use strict";var b=a.i(72131),c=a.i(72752);function d(a){let[d,e]=b.useState(void 0);return(0,c.useLayoutEffect)(()=>{if(a){e({width:a.offsetWidth,height:a.offsetHeight});let b=new ResizeObserver(b=>{let c,d;if(!Array.isArray(b)||!b.length)return;let f=b[0];if("borderBoxSize"in f){let a=f.borderBoxSize,b=Array.isArray(a)?a[0]:a;c=b.inlineSize,d=b.blockSize}else c=a.offsetWidth,d=a.offsetHeight;e({width:c,height:d})});return b.observe(a,{box:"border-box"}),()=>b.unobserve(a)}e(void 0)},[a]),d}a.s(["useSize",()=>d])},81560,a=>{"use strict";let b=(0,a.i(70106).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);a.s(["Trash2",()=>b],81560)},12971,a=>{"use strict";let b=new(a.i(54289)).QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:!1,staleTime:3e5,retry:!1}}}),c=async(a,b,c)=>{let d=await fetch(b,{method:a,headers:{"Content-Type":"application/json"},body:c?JSON.stringify(c):void 0});if(!d.ok){let a;try{a=await d.json()}catch{}throw Error(a?.message||d.statusText)}return d};a.s(["apiRequest",0,c,"queryClient",0,b])},96221,a=>{"use strict";let b=(0,a.i(70106).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},17171,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(30553),e=c.forwardRef((a,c)=>(0,b.jsx)(d.Primitive.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));e.displayName="Label";var f=a.i(187),g=a.i(97895);let h=(0,f.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),i=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(e,{ref:d,className:(0,g.cn)(h(),a),...c}));i.displayName=e.displayName,a.s(["Label",()=>i],17171)},4720,a=>{"use strict";let b=(0,a.i(70106).default)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);a.s(["FileText",()=>b],4720)},92700,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(33217),e=a.i(70025),f=a.i(37927),g=a.i(12971),h=a.i(77687),i=a.i(40695),j=a.i(5522),k=a.i(3130),l=a.i(17171),m=a.i(96221),n=a.i(15618),o=a.i(81560),p=a.i(4720);let q=(0,a.i(70106).default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var r=a.i(87682),s=a.i(14001),t=a.i(72228);function u(){let{toast:a}=(0,h.useToast)(),u=(0,f.useQueryClient)(),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)("Notices"),[D,E]=(0,c.useState)((0,t.format)(new Date,"MMM d, yyyy")),[F,G]=(0,c.useState)(null),{data:H,isLoading:I}=(0,d.useQuery)({queryKey:["/api/election-documents"]}),J=(0,e.useMutation)({mutationFn:async a=>{let b=await fetch("/api/election-documents",{method:"POST",body:a});if(!b.ok)throw Error((await b.json()).message||"Failed to upload");return b.json()},onSuccess:()=>{u.invalidateQueries({queryKey:["/api/election-documents"]}),a({title:"Success",description:"Document uploaded successfully"}),y(""),A(""),G(null);let b=document.getElementById("file-upload");b&&(b.value="")},onError:b=>{a({title:"Error",description:b.message,variant:"destructive"})},onSettled:()=>w(!1)}),K=(0,e.useMutation)({mutationFn:async a=>{await (0,g.apiRequest)("DELETE",`/api/election-documents/${a}`)},onSuccess:()=>{u.invalidateQueries({queryKey:["/api/election-documents"]}),a({title:"Success",description:"Document deleted"})}});return(0,b.jsx)(s.AdminLayout,{children:(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:"Manage Election Documents"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-2",children:"Upload and manage election-related PDFs."})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,b.jsxs)(k.Card,{className:"lg:col-span-1 shadow-md border-t-4 border-t-primary",children:[(0,b.jsxs)(k.CardHeader,{children:[(0,b.jsx)(k.CardTitle,{children:"Upload New Document"}),(0,b.jsx)(k.CardDescription,{children:"Add a new PDF to the election panel."})]}),(0,b.jsx)(k.CardContent,{children:(0,b.jsxs)("form",{onSubmit:b=>{if(b.preventDefault(),!F||!x||!B)return void a({title:"Error",description:"Please fill all required fields",variant:"destructive"});w(!0);let c=new FormData;c.append("file",F),c.append("title",x),c.append("description",z),c.append("category",B),c.append("date",D),J.mutate(c)},className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{htmlFor:"title",children:"Document Title"}),(0,b.jsx)(j.Input,{id:"title",value:x,onChange:a=>y(a.target.value),placeholder:"e.g. Election Notification",required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{htmlFor:"category",children:"Category"}),(0,b.jsxs)(r.Select,{value:B,onValueChange:C,children:[(0,b.jsx)(r.SelectTrigger,{children:(0,b.jsx)(r.SelectValue,{placeholder:"Select Category"})}),(0,b.jsx)(r.SelectContent,{children:["Foundational","Candidates","Notices","Ballots","Results","Records"].map(a=>(0,b.jsx)(r.SelectItem,{value:a,children:a},a))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{htmlFor:"date",children:"Display Date"}),(0,b.jsx)(j.Input,{id:"date",value:D,onChange:a=>E(a.target.value),placeholder:"e.g. Jan 11, 2026"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{htmlFor:"description",children:"Description (Optional)"}),(0,b.jsx)(j.Input,{id:"description",value:z,onChange:a=>A(a.target.value),placeholder:"Brief description of the document"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{htmlFor:"file-upload",children:"PDF File"}),(0,b.jsxs)("div",{className:"border-2 border-dashed rounded-lg p-6 flex flex-col items-center justify-center bg-slate-50 hover:bg-slate-100 transition-colors cursor-pointer relative",children:[(0,b.jsx)("input",{id:"file-upload",type:"file",accept:"application/pdf",onChange:a=>G(a.target.files?.[0]||null),className:"absolute inset-0 opacity-0 cursor-pointer"}),F?(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(p.FileText,{className:"h-8 w-8 text-primary mx-auto mb-2"}),(0,b.jsx)("p",{className:"text-sm font-medium text-emerald-600 truncate max-w-[200px]",children:F.name}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(F.size/1024/1024).toFixed(2)," MB"]})]}):(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(q,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),(0,b.jsx)("p",{className:"text-sm font-medium text-slate-700",children:"Tap to select PDF"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Max 10MB"})]})]})]}),(0,b.jsx)(i.Button,{type:"submit",className:"w-full",disabled:v||J.isPending,children:v||J.isPending?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Uploading..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(n.Plus,{className:"mr-2 h-4 w-4"}),"Upload Document"]})})]})})]}),(0,b.jsxs)("div",{className:"lg:col-span-2 space-y-4",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold",children:"Existing Documents"}),I?(0,b.jsx)("div",{className:"flex justify-center p-12",children:(0,b.jsx)(m.Loader2,{className:"h-8 w-8 animate-spin text-primary"})}):H?.length===0?(0,b.jsx)("p",{className:"text-muted-foreground text-center p-8 border rounded-lg bg-slate-50",children:"No documents uploaded yet."}):(0,b.jsx)("div",{className:"grid gap-4",children:H?.map(a=>(0,b.jsxs)("div",{className:"flex items-start justify-between p-4 bg-white border rounded-lg shadow-sm hover:shadow-md transition-shadow",children:[(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)("div",{className:"p-2 bg-red-100 text-red-600 rounded-lg",children:(0,b.jsx)(p.FileText,{className:"h-6 w-6"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-slate-900",children:a.title}),(0,b.jsxs)("p",{className:"text-xs text-slate-500 mb-1",children:[a.category," â€¢ ",a.date]}),(0,b.jsx)("p",{className:"text-sm text-slate-600 line-clamp-1",children:a.description||a.filename})]})]}),(0,b.jsx)(i.Button,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-700 hover:bg-red-50",onClick:()=>{confirm("Are you sure you want to delete this document?")&&K.mutate(a.id)},disabled:K.isPending,children:(0,b.jsx)(o.Trash2,{className:"h-4 w-4"})})]},a.id))})]})]})]})})}a.s(["default",()=>u],92700)}];

//# sourceMappingURL=_4674ee9c._.js.map